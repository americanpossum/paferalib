function LessonSelect(){this.lang=1;this.multiple=0;this.lessonids=[];this.finishedfunc=""}LessonSelect.prototype.Choose=function(a,c){this.multiple=a;this.finishedfunc=c;var b=$(".FullScreenContent");b.ht('<img src="/images/loading.gif">');$(".FullScreen").set("+DarkBlueGradient").set("$width",pc.ViewPortRect().width).show();window.scroll(0,0);db.Find("courses","Course","",{orderby:"title"},function(k){var j=k.coursescount;var f=k.courses;var e=[];for(var g=0;g<f.length;g++){var h=f[g];e.push(['<div class="Card HoverHighlight AutoWidth" onclick="lessonselect.Lessons('+h.id+')" data-optimum-width=20>',"<span class=Title>"+h.title+"</span>","</div>"].join("\n"))}e=e.concat(["<br class=Cleared>","<div>","<a class=Button onclick=\"$('.FullScreen').hide('slow')\">"+T[36]+"</a>","</div>"]);b.ht(e.join("\n"));pc.AutoWidth()})};LessonSelect.prototype.Lessons=function(b){var a=$(".FullScreenContent");a.ht('<img src="/images/loading.gif">');window.scroll(0,0);db.Linked("lessons","Course",b,"Lesson",0,0,0,function(h){var c=[];var e=h.lessons;for(var f=0;f<e.length;f++){var g=e[f];c.push(['<div class="Card HoverHighlight AutoWidth" onclick="lessonselect.OnLessonClick(this, '+g.id+", '"+g.title+"')\" data-optimum-width=20>","<span class=Title>"+g.title+"</span>","</div>"].join("\n"))}c=c.concat(["<div class=Cleared></div>","</div>","<table class=ActionButtons>","<tr>",'<td class=ConfirmButton onclick="lessonselect.Finished()">Start</td>',"<td></td>",'<td class=CancelButton onclick="lessonselect.Cancel()">'+T[36]+"</td>","</tr>","</div>"]);a.ht(c.join("\n"));pc.AutoWidth()})};LessonSelect.prototype.Finished=function(){this.Cancel();this.finishfunc(this.lessonids)};LessonSelect.prototype.Cancel=function(){$(".FullScreen").set("-DarkBlueGradient").hide()};LessonSelect.prototype.OnLessonClick=function(c,b,d){if(!this.multiple){this.finishedfunc(b,d);this.Cancel();return}c=$(c);var a=this.lessonids.indexOf(b);if(a!=-1){c.set("-Selected");this.lessonids.splice(a,1)}else{c.set("+Selected");this.lessonids.push(b)}};var lessonselect=new LessonSelect();