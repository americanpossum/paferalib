function IsArray(a){return(a instanceof Array)||(Object.prototype.toString.apply(a)==="[object Array]")}String.prototype.endswith=function(a){return this.indexOf(a,this.length-a.length)!==-1};Array.prototype.contains=function(a){for(var c=0,b=this.length;c<b;c++){if(this[c]==a){return true}}return false};_loader={Init:function(){this.filesloaded=[];this.filesprocessing=[];this.filestoload=[];this.onfinished=[];this.numadded=0;this.numloaded=0},OnFinished:function(a,b){if(typeof a!="function"){return}b=b||0;if(_loader.filesprocessing.length||_loader.filestoload.length){_loader.onfinished.push([a,b])}else{a()}},InQueue:function(c){for(var a=0,b=_loader.filestoload.length;a<b;a++){if(_loader.filestoload[a][0]==c){return true}}return(_loader.filesloaded.indexOf(c)!==-1||_loader.filesprocessing.indexOf(c)!==-1)},Load:function(a){if(!a){return _loader}if(IsArray(a)){_loader.filestoload=_loader.filestoload.concat(a);if(!_loader.filesprocessing.length){_loader.LoadNext()}return _loader}if(_loader.InQueue(a)){return _loader}if(_loader.filesprocessing.length){_loader.filestoload.push(a);return _loader}_loader.ReallyLoad(a)},LoadNext:function(){if(_loader.filestoload.length){var j=_loader.filestoload.shift();if(IsArray(j)){for(var a=0,c=j.length;a<c;a++){_loader.ReallyLoad(j[a])}}else{_loader.ReallyLoad(j)}return _loader}if(!_loader.filesprocessing.length){for(var a=0,c=_loader.onfinished.length;a<c;a++){var b=_loader.onfinished[a];setTimeout(b[0],b[1])}_loader.onfinished=[]}return _loader},ReallyLoad:function(b){if(!_loader.numadded){setTimeout(_loader.CheckLoaded,10000)}_loader.numadded++;var c=document.getElementsByTagName("head")[0];if(b.endswith(".js")){var a=document.createElement("script")}else{var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href=b}a.src=b;a.onload=_loader.OnLoaded;_loader.filesprocessing.push(b);c.appendChild(a);return _loader},OnLoaded:function(b){_loader.numloaded++;var j=this.href||this.src;for(var a=0,c=_loader.filesprocessing.length;a<c;a++){if(j.indexOf(_loader.filesprocessing[a])!==-1){_loader.filesprocessing.splice(a,1);break}}_loader.LoadNext()},CheckLoaded:function(){if(_loader.numadded&&!_loader.numloaded){document.body.innerHTML=T[52]}}};_loader.Init();!function(b,c){var a=c(b,b.document);b.lazySizes=a,"object"==typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a)}(window,function(a,b){if(b.getElementsByClassName){var c,e=b.documentElement,f=a.addEventListener,g=a.setTimeout,h=a.requestAnimationFrame||g,k=a.setImmediate||g,m=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],q=function(x,y){var w=new RegExp("(\\s|^)"+y+"(\\s|$)");return x.className.match(w)&&w},r=function(w,x){q(w,x)||(w.className+=" "+x)},s=function(x,y){var w;(w=q(x,y))&&(x.className=x.className.replace(w," "))},t=function(y,z,w){var x=w?"addEventListener":"removeEventListener";w&&t(y,z),o.forEach(function(A){y[x](A,z)})},u=function(w,x,y,z,A){var B=b.createEvent("CustomEvent");return B.initCustomEvent(x,!z,!A,y||{}),w.dispatchEvent(B),B},v=function(w,x){var y;a.HTMLPictureElement||((y=a.picturefill||a.respimage||c.pf)?y({reevaluate:!0,elements:[w]}):x&&x.src&&(w.src=x.src))},S=function(w,x){return(getComputedStyle(w,null)||{})[x]},U=function(x,y,w){for(w=w||x.offsetWidth;w<c.minSize&&y&&!x._lazysizesWidth;){w=y.offsetWidth,y=y.parentNode}return w},j=function(x){var C,w=0,y=a.Date,z=function(){C=!1,w=y.now(),x()},A=function(){k(z)},B=function(){h(A)};return function(){if(!C){var D=c.throttle-(y.now()-w);C=!0,6>D&&(D=6),g(B,D)}}},l=function(){var Q,af,al,x,A,C,E,G,I,ah,aj,am,w,y=/^img$/i,z=/^iframe$/i,B="onscroll" in a&&!/glebot/.test(navigator.userAgent),D=0,F=0,H=0,J=0,K=function(V){H--,V&&V.target&&t(V.target,K),(!V||0>H||!V.target)&&(H=0)},L=function(W,Y){var V,X=W,Z="hidden"!=S(W,"visibility");for(G-=Y,aj+=Y,I-=Y,ah+=Y;Z&&(X=X.offsetParent);){Z=(S(X,"opacity")||1)>0,Z&&"visible"!=S(X,"overflow")&&(V=X.getBoundingClientRect(),Z=ah>V.left&&I<V.right&&aj>V.top-1&&G<V.bottom+1)}return Z},M=function(){var aa,ab,W,X,ac,ad,V,Y,Z;if((A=c.loadMode)&&8>H&&(aa=Q.length)){for(ab=0,J++,w>F&&1>H&&J>3&&A>2?(F=w,J=0):F=A>1&&J>2&&6>H?am:D;aa>ab;ab++){Q[ab]&&!Q[ab]._lazyRace&&(B?((Y=Q[ab].getAttribute("data-expand"))&&(ad=1*Y)||(ad=F),Z!==ad&&(C=innerWidth+ad,E=innerHeight+ad,V=-1*ad,Z=ad),W=Q[ab].getBoundingClientRect(),(aj=W.bottom)>=V&&(G=W.top)<=E&&(ah=W.right)>=V&&(I=W.left)<=C&&(aj||ah||I||G)&&(al&&3>H&&!Y&&(3>A||4>J)||L(Q[ab],ad))?(ai(Q[ab],W.width),ac=!0,H>6&&(F=D)):!ac&&al&&!X&&3>H&&4>J&&A>2&&(af[0]||c.preloadAfterLoad)&&(af[0]||!Y&&(aj||ah||I||G||"auto"!=Q[ab].getAttribute(c.sizesAttr)))&&(X=af[0]||Q[ab])):ai(Q[ab]))}X&&!ac&&ai(X)}},N=j(M),O=function(V){r(V.target,c.loadedClass),s(V.target,c.loadingClass),t(V.target,O)},R=function(V,W){try{V.contentWindow.location.replace(W)}catch(X){V.setAttribute("src",W)}},ag=function(){var V,W=[],X=function(){for(;W.length;){W.shift()()}V=!1};return function(Y){W.push(Y),V||(V=!0,h(X))}}(),ai=function(ab,ad){var ar,at,au,av,Y,V,W,X,aa,ac,ae,aq=y.test(ab.nodeName),Z=aq&&(ab.getAttribute(c.sizesAttr)||ab.getAttribute("sizes")),aw="auto"==Z;(!aw&&al||!aq||!ab.src&&!ab.srcset||ab.complete||q(ab,c.errorClass))&&(aw&&(ad=Math.max(ad||0,ab.offsetWidth)),ab._lazyRace=!0,H++,ag(function(){if(ab._lazyRace&&delete ab._lazyRace,s(ab,c.lazyClass),!(aa=u(ab,"lazybeforeunveil")).defaultPrevented){if(Z&&(aw?(r(ab,c.autosizesClass),n.updateElem(ab,!0,ad)):ab.setAttribute("sizes",Z)),V=ab.getAttribute(c.srcsetAttr),Y=ab.getAttribute(c.srcAttr),aq&&(W=ab.parentNode,X=W&&m.test(W.nodeName||"")),ac=aa.detail.firesLoad||"src" in ab&&(V||Y||X),aa={target:ab},ac&&(t(ab,K,!0),clearTimeout(x),x=g(K,2500),r(ab,c.loadingClass),t(ab,O,!0)),X){for(ar=W.getElementsByTagName("source"),at=0,au=ar.length;au>at;at++){(ae=c.customMedia[ar[at].getAttribute("data-media")||ar[at].getAttribute("media")])&&ar[at].setAttribute("media",ae),av=ar[at].getAttribute(c.srcsetAttr),av&&ar[at].setAttribute("srcset",av)}}V?ab.setAttribute("srcset",V):Y&&(z.test(ab.nodeName)?R(ab,Y):ab.setAttribute("src",Y)),(V||X)&&v(ab,{src:Y})}(!ac||ab.complete)&&(ac?K(aa):H--,O(aa))}))},ak=function(){var V,W=function(){c.loadMode=3,N()};al=!0,c.loadMode=3,J++,f("scroll",function(){3==c.loadMode&&(c.loadMode=2),clearTimeout(V),V=g(W,99)},!0)};return{_:function(){Q=b.getElementsByClassName(c.lazyClass),af=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),am=c.expand,w=Math.round(am*c.expFactor),f("scroll",N,!0),f("resize",N,!0),a.MutationObserver?new MutationObserver(N).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e.addEventListener("DOMNodeInserted",N,!0),e.addEventListener("DOMAttrModified",N,!0),setInterval(N,999)),f("hashchange",N,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(V){b.addEventListener(V,N,!0)}),/d$|^c/.test(b.readyState)?ak():(f("load",ak),b.addEventListener("DOMContentLoaded",N)),N()},checkElems:N,unveil:ai}}(),n=function(){var w,x=function(D,E,F){var G,H,A,B,C=D.parentNode;if(C&&(F=U(D,C,F),B=u(D,"lazybeforesizes",{width:F,dataAttr:!!E}),!B.defaultPrevented&&(F=B.detail.width,F&&F!==D._lazysizesWidth))){if(D._lazysizesWidth=F,F+="px",D.setAttribute("sizes",F),m.test(C.nodeName||"")){for(G=C.getElementsByTagName("source"),H=0,A=G.length;A>H;H++){G[H].setAttribute("sizes",F)}}B.detail.dataAttr||v(D,B.detail)}},y=function(){var A,B=w.length;if(B){for(A=0;B>A;A++){x(w[A])}}},z=j(y);return{_:function(){w=b.getElementsByClassName(c.autosizesClass),f("resize",z)},checkElems:z,updateElem:x}}(),p=function(){p.i||(p.i=!0,n._(),l._())};return function(){var w,x={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:2,expand:359,loadMode:2,throttle:125};c=a.lazySizesConfig||a.lazysizesConfig||{};for(w in x){w in c||(c[w]=x[w])}a.lazySizesConfig=c,g(function(){c.init&&p()})}(),{cfg:c,autoSizer:n,loader:l,init:p,uP:v,aC:r,rC:s,hC:q,fire:u,gW:U}}});var MINIFIED=function(){var cW=window;var cr="Nia";var cK="NiaP";var bQ={},bE={};var bP=1;var cF=/^[ic]/.test(document.readyState)?bg:[];var cf={};var cC=0;var bg=null;var cP;function b7(a){return a.substr(0,3)}var cZ=bf("January,February,March,April,May,June,July,August,September,October,November,December",/,/g);var bc=b8(cZ,b7);var cT=bf("Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",/,/g);var bk=b8(cT,b7);var cQ=bf("am,pm",/,/g);var bO=bf("am,am,am,am,am,am,am,am,am,am,am,am,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm",/,/g);var bA={y:["FullYear",bT],Y:["FullYear",function(a){return a%100}],M:["Month",cR],n:["Month",bc],N:["Month",cZ],d:["Date",bT],m:["Minutes",bT],H:["Hours",bT],h:["Hours",function(a){return(a%12)||12}],k:["Hours",cR],K:["Hours",function(a){return a%12}],s:["Seconds",bT],S:["Milliseconds",bT],a:["Hours",bO],w:["Day",bk],W:["Day",cT],z:["TimezoneOffset",function(a,c,e){if(e){return e}var f=a>0?"-":"+";var b=a<0?-a:a;return f+be(2,Math.floor(b/60))+be(2,b%60)}]};var co={y:0,Y:[0,-2000],M:[1,1],n:[1,bc],N:[1,cZ],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,cQ]};var bs=99;var cN={};var bo=[];function b0(a){return a!=bg?""+a:""}function bI(b,a){return typeof b==a}function cs(a){return bI(a,"string")}function bR(a){return !!a&&bI(a,"object")}function ck(a){return a&&a.nodeType}function bD(a){return bI(a,"number")}function bu(a){return bR(a)&&!!a.getDay}function bK(a){return a===true||a===false}function b6(a){var b=typeof a;return b=="object"?!!(a&&a.getDay):(b=="string"||b=="number"||bK(a))}function bT(a){return a}function cR(a){return a+1}function cp(b,a,c){return b0(b).replace(a,c!=bg?c:"")}function ct(a){return cp(a,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function cI(a){return cp(a,/^\s+|\s+$/g)}function bi(b,e,c){for(var a in b){if(b.hasOwnProperty(a)){e.call(c||b,a,b[a])}}return b}function cS(a,e,c){if(a){for(var b=0;b<a.length;b++){e.call(c||a,a[b],b)}}return a}function bS(a,b,f){var e=[];var c=cJ(b)?b:function(g){return b!=g};cS(a,function(g,h){if(c.call(f||a,g,h)){e.push(g)}});return e}function bm(b,a,c,e){var f=[];b(a,function(g,h){if(bn(g=c.call(e||a,g,h))){cS(g,function(j){f.push(j)})}else{if(g!=bg){f.push(g)}}});return f}function b9(a,b,c){return bm(bi,a,b,c)}function b5(a,b,c){return bm(cS,a,b,c)}function cy(b){var a=0;bi(b,function(c){a++});return a}function bJ(a){var b=[];bi(a,function(c){b.push(c)});return b}function b8(b,a,c){var e=[];cS(b,function(f,g){e.push(a.call(c||b,f,g))});return e}function bp(b,a){if(bn(b)){var c=cj(a);return bM(cA(b,0,c.length),c)}else{return a!=bg&&b.substr(0,a.length)==a}}function bw(b,c){if(bn(b)){var a=cj(c);return bM(cA(b,-a.length),a)||!a.length}else{return c!=bg&&b.substr(b.length-c.length)==c}}function by(a){var b=a.length;if(bn(a)){return new cc(b8(a,function(){return a[--b]}))}else{return cp(a,/[\s\S]/g,function(){return a.charAt(--b)})}}function bv(b,c){var a={};cS(b,function(e,f){a[e]=c});return a}function bU(a,b){var c=b||{};for(var e in a){c[e]=a[e]}return c}function b1(c,b){var a=b;for(var e=0;e<c.length;e++){a=bU(c[e],a)}return a}function cn(a){return cJ(a)?a:function(b,c){if(a===b){return c}}}function ce(b,c,a){return c==bg?a:c<0?Math.max(b.length+c,0):Math.min(b.length,c)}function bL(c,h,a,e){var f=cn(h);var b=ce(c,e,c.length);var g;for(var j=ce(c,a,0);j<b;j++){if((g=f.call(c,c[j],j))!=bg){return g}}}function cD(c,h,a,e){var f=cn(h);var b=ce(c,e,-1);var g;for(var j=ce(c,a,c.length-1);j>b;j--){if((g=f.call(c,c[j],j))!=bg){return g}}}function cA(c,a,e){var f=[];if(c){var b=ce(c,e,c.length);for(var g=ce(c,a,0);g<b;g++){f.push(c[g])}}return f}function bW(a){return b8(a,bT)}function bj(a){return function(){return new cc(cG(a,arguments))}}function cU(a){var b={};return bS(a,function(c){if(b[c]){return false}else{return b[c]=1}})}function bq(a,c){var b=bv(c,1);return bS(a,function(e){var f=b[e];b[e]=0;return f})}function ci(a,b){for(var c=0;c<a.length;c++){if(a[c]==b){return true}}return false}function bM(e,a){var c=cJ(e)?e():e;var f=cJ(a)?a():a;var b;if(c==f){return true}else{if(c==bg||f==bg){return false}else{if(b6(c)||b6(f)){return bu(c)&&bu(f)&&+c==+f}else{if(bn(c)){return(c.length==f.length)&&!bL(c,function(g,h){if(!bM(g,f[h])){return true}})}else{return !bn(f)&&((b=bJ(c)).length==cy(f))&&!bL(b,function(g){if(!bM(c[g],f[g])){return true}})}}}}}function bB(b,a,c){if(cJ(b)){return b.apply(c&&a,b8(c||a,bT))}}function cG(b,a,c){return b8(b,function(e){return bB(e,a,c)})}function cz(a,b,e,c){return function(){return bB(a,b,b5([e,arguments,c],bT))}}function br(a,c,b){return cz(a,this,c,b)}function be(b,c){var e=c<0?"-":"";var a=(e?-c:c).toFixed(0);while(a.length<b){a="0"+a}return e+a}function b2(f,g,e){var h;var b=0;var a=e?g:by(g);var c=(e?f:by(f)).replace(/./g,function(j){if(j=="0"){h=false;return a.charAt(b++)||"0"}else{if(j=="#"){h=true;return a.charAt(b++)||""}else{return h&&!a.charAt(b)?"":j}}});return e?c:(g.substr(0,g.length-b)+by(c))}function bl(b,c,a){if(c==bg||!b){return 0}return parseFloat(b[c]+b[c+1])*60+parseFloat(b[c]+b[c+2])+a.getTimezoneOffset()}function cl(f,b){var a=cp(f,/^\?/);if(bu(b)){var c,e;if(e=/^\[(([+-])(\d\d)(\d\d))\]\s*(.*)/.exec(a)){c=e[1];b=bY(b,"minutes",bl(e,2,b));a=e[5]}return cp(a,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(j,h,k,m){var n=bA[h];if(n){var g=b["get"+n[0]]();var l=(m&&m.split(","));if(bn(n[1])){g=(l||n[1])[g]}else{g=n[1](g,l,c)}if(g!=bg&&!cs(g)){g=be(k.length+1,g)}return g}else{return j}})}else{return bL(a.split(/\s*\|\s*/),function(g){var h,k;if(h=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(g)){var j=b,l=+(h[3]);if(isNaN(l)||!bD(j)){j=(j==bg)?"null":b0(j);l=h[3]}if(h[1]){if((!h[2]&&j==l)||(h[1]=="<"&&j>l)||(h[1]==">"&&j<l)){return bg}}else{if(j!=l){return bg}}k=h[4]}else{k=g}if(bD(b)){return k.replace(/[0#](.*[0#])?/,function(r){var p=/^([^.]+)(\.)([^.]+)$/.exec(r)||/^([^,]+)(,)([^,]+)$/.exec(r);var q=b<0?"-":"";var n=/(\d+)(\.(\d+))?/.exec((q?-b:b).toFixed(p?p[3].length:0));var o=p?p[1]:r;var m=p?b2(p[3],cp(n[3],/0+$/),true):"";return(q?"-":"")+(o=="#"?n[1]:b2(o,n[1]))+(m.length?p[2]:"")+m})}else{return k}})}}function ca(o,s){var p={};var n=1;var m;var u;var h;var a=cp(o,/^\?/);if(a!=o&&!cI(s)){return bg}if(h=/^\[([+-])(\d\d)(\d\d)\]\s*(.*)/.exec(a)){m=h;a=h[4]}var l=new RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(w,y,A,x){if(/[dmhkyhs]/i.test(y)){p[n++]=y;var z=A.length+1;return"(\\d"+(z<2?"+":("{1,"+z+"}"))+")"}else{if(y=="z"){u=n;n+=3;return"([+-])(\\d\\d)(\\d\\d)"}else{if(/[Nna]/.test(y)){p[n++]=[y,x&&x.split(",")];return"([a-zA-Z\\u0080-\\u1fff]+)"}else{if(/w/i.test(y)){return"[a-zA-Z\\u0080-\\u1fff]+"}else{if(/\s/.test(y)){return"\\s+"}else{return ct(w)}}}}}}));if(!(h=l.exec(s))){return cP}var v=[0,0,0,0,0,0,0];for(var b=1;b<n;b++){var j=h[b];var r=p[b];if(bn(r)){var c=r[0];var k=co[c];var q=k[0];var g=r[1]||k[1];var f=bL(g,function(w,x){if(bp(j.toLowerCase(),w.toLowerCase())){return x}});if(f==bg){return cP}if(c=="a"){v[q]+=f*12}else{v[q]=f}}else{if(r){var e=parseFloat(j);var k=co[r];if(bn(k)){v[k[0]]+=e-k[1]}else{v[k]+=e}}}}var t=new Date(v[0],v[1],v[2],v[3],v[4],v[5],v[6]);return bY(t,"minutes",-bl(m,1,t)-bl(h,u,t))}function cg(e,b){var a=cp(e,/^\?/);if(a!=e&&!cI(b)){return bg}var f=(/(^|[^0#.,])(,|[0#.]*,[0#]+|[0#]+\.[0#]+\.[0#.,]*)($|[^0#.,])/.test(a))?",":".";var c=parseFloat(cp(cp(cp(b,f==","?/\./g:/,/g),f,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?cP:c}function cu(){return new Date()}function cd(a){return new Date(+a)}function bt(a){return a.charAt(0).toUpperCase()+a.substr(1)}function cw(a,b,c){a["set"+b](a["get"+b]()+c);return a}function bY(c,a,b){if(b==bg){return bY(cu(),c,a)}return cw(cd(c),bt(a),b)}function bN(a){var b=a||cu();return new Date(b.getFullYear(),b.getMonth(),b.getDate())}function cH(c,a,b){var g=+a;var l=+b;var n=l-g;if(n<0){return -cH(c,b,a)}var m={milliseconds:1,seconds:1000,minutes:60000,hours:3600000};var j=m[c];if(j){return n/j}var e=bt(c);var f={fullYear:86400000*365,month:86400000*365/12,date:86400000};var o=Math.floor((n/f[c])-2);var h=cw(new Date(g),e,o);for(var k=o;k<o*1.2+4;k++){if(+cw(h,e,1)>l){return k}}}function bZ(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function bX(a){return cp(a,/[\x00-\x1f'"\u2028\u2029]/g,bZ)}function bf(a,b){return a.split(b)}function bG(c,b){if(cN[c]){return cN[c]}else{var e="with(_.isObject(obj)?obj:{}){"+b8(bf(c,/{{|}}}?/g),function(j,k){var l,g=cI(j),h=cp(g,/^{/),m=(g==h)?"esc(":"";if(k%2){if(l=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(h)){return"each("+(cI(l[4])?l[4]:"this")+", function("+l[2]+"){"}else{if(l=/^if\b(.*)/.exec(h)){return"if("+l[1]+"){"}else{if(l=/^else\b\s*(if\b(.*))?/.exec(h)){return"}else "+(l[1]?"if("+l[2]+")":"")+"{"}else{if(l=/^\/(if)?/.exec(h)){return l[1]?"}\n":"});\n"}else{if(l=/^(var\s.*)/.exec(h)){return l[1]+";"}else{if(l=/^#(.*)/.exec(h)){return l[1]}else{if(l=/(.*)::\s*(.*)/.exec(h)){return"print("+m+'_.formatValue("'+bX(l[2])+'",'+(cI(l[1])?l[1]:"this")+(m&&")")+"));\n"}else{return"print("+m+(cI(h)?h:"this")+(m&&")")+");\n"}}}}}}}}else{if(j){return'print("'+bX(j)+'");\n'}}}).join("")+"}";var a=(new Function("obj","each","esc","print","_",e));var f=function(g,h){var j=[];a.call(h||g,g,function(k,l){if(bn(k)){cS(k,function(m,n){l.call(m,m,n)})}else{bi(k,function(n,m){l.call(m,n,m)})}},b||bT,function(){bB(j.push,j,arguments)},cj);return j.join("")};if(bo.push(f)>bs){delete cN[bo.shift()]}return cN[c]=f}}function b4(a){return cp(a,/[<>'"&]/g,function(b){return"&#"+b.charCodeAt(0)+";"})}function M(b,a){return bG(b,b4)(a)}function bh(a){return function(b,c){return new cc(a(this,b,c))}}function cM(a){return function(b,c,e){return a(this,b,c,e)}}function cb(a){return function(b,c,e){return new cc(a(b,c,e))}}function cJ(a){return typeof a=="function"&&!a.item}function bn(a){return a&&a.length!=bg&&!cs(a)&&!ck(a)&&!cJ(a)&&a!==cW}function bx(b,a,c){(b[a]=(b[a]||[])).push(c)}function cv(a,b){for(var c=0;a&&c<a.length;c++){if(a[c]===b){a.splice(c--,1)}}}function cq(a){return parseFloat(cp(a,/^[^\d-]+/))}function bz(a){return(a[cr]=(a[cr]||++bP))}function cm(a,c){var f=[];var e={};var b;bd(a,function(g){bd(c(g),function(h){if(!e[b=bz(h)]){f.push(h);e[b]=true}})});return f}function cO(e,f){var a={"$position":"absolute","$visibility":"hidden","$display":"block","$height":bg};var b=e.get(a);var c=e.set(a)["get"]("clientHeight");e.set(b);return c*f+"px"}function bH(a,f,c,e,b){if(cJ(f)){return this["on"](bg,a,f,c,e)}else{if(cs(e)){return this["on"](a,f,c,bg,e)}else{return this["each"](function(g,h){bd(a?cY(a,g):g,function(j){bd(b0(f).split(/\s/),function(p){var k=cp(p,/[?|]/g);var o=cp(p,/[^?|]/g);var l=(k=="blur"||k=="focus")&&!!b;var m=bP++;function n(w,t,r){var v=!b;var u=b?r:j;if(b){var s=ch(b,j);while(u&&u!=j&&!(v=s(u))){u=u.parentNode}}return(!v)||(k!=w)||((c.apply(cL(u),e||[t,h])&&o=="?")||o=="|")}function q(r){if(!n(k,r,r.target)){r.preventDefault();r.stopPropagation()}}j.addEventListener(k,q,l);if(!j.M){j.M={}}j.M[m]=n;c.M=bm(bd,[c.M,function(){j.removeEventListener(k,q,l);delete j.M[m]}],bT)})})})}}}function bF(a){cG(a.M);a.M=bg}function cE(a,b){bd(b,function(c){c.element.detachEvent("on"+c.eventType,c.handlerFunc)})}function a0(a){if(cF){cF.push(a)}else{setTimeout(a,0)}}function cV(c,b,a){return cY(c,b,a)[0]}function bC(e,c,b){var a=cL(document.createElement(e));return(bn(c)||(c!=bg&&!bR(c)))?a.add(c):a.set(c)["add"](b)}function bV(a){return bm(bd,a,function(c){var b;if(bn(c)){return bV(c)}else{if(ck(c)){b=c.cloneNode(true);b.removeAttribute&&b.removeAttribute("id");return b}else{return c}}})}function cL(c,a,b){return cJ(c)?a0(c):new cc(cY(c,a,b))}function cY(f,c,e){function a(g){return bn(g)?bm(bd,g,a):g}function b(g){return bS(bm(bd,g,a),function(h){var j=h;while(j=j.parentNode){if(j==c[0]||e){return j==c[0]}}})}if(c){if((c=cY(c)).length!=1){return cm(c,function(g){return cY(f,g,e)})}else{if(cs(f)){if(ck(c[0])!=1){return[]}else{return e?b(c[0].querySelectorAll(f)):c[0].querySelectorAll(f)}}else{return b(f)}}}else{if(cs(f)){return document.querySelectorAll(f)}else{return bm(bd,f,a)}}}function ch(h,c){function g(l,j){var k=RegExp("(^|\\s+)"+l+"(?=$|\\s)","i");return function(m){return l?k.test(m[j]):true}}var a={};var b=a;if(cJ(h)){return h}else{if(bD(h)){return function(k,j){return j==h}}else{if(!h||h=="*"||(cs(h)&&(b=/^([\w-]*)\.?([\w-]*)$/.exec(h)))){var e=g(b[1],"tagName");var f=g(b[2],"className");return function(j){return ck(j)==1&&e(j)&&f(j)}}else{if(c){return function(j){return cL(h,c)["find"](j)!=bg}}else{cL(h)["each"](function(j){a[bz(j)]=true});return function(j){return a[bz(j)]}}}}}}function cx(b){var a=ch(b);return function(c){return a(c)?bg:true}}function bd(a,b){if(bn(a)){cS(a,b)}else{if(a!=bg){b(a,0)}}return a}function cX(){this["state"]=null;this["values"]=[];this["parent"]=null}function b3(){var a=[];var c=arguments;var b=c.length;var j=0;var e=0;var f=new cX();f.errHandled=function(){e++;if(f.parent){f.parent.errHandled()}};var k=f.fire=function(m,l){if(f.state==null&&m!=null){f.state=!!m;f.values=bn(l)?l:[l];setTimeout(function(){cS(a,function(n){n()})},0)}return f};cS(c,function h(m,l){try{if(m.then){m.then(function(p){var o;if((bR(p)||cJ(p))&&cJ(o=p.then)){h(p,l)}else{f.values[l]=bW(arguments);if(++j==b){k(true,b<2?f.values[l]:f.values)}}},function(o){f.values[l]=bW(arguments);k(false,b<2?f.values[l]:[f.values[l][0],f.values,l])})}else{m(function(){k(true,bW(arguments))},function(){k(false,bW(arguments))})}}catch(n){k(false,[n,f.values,l])}});f.stop=function(){cS(c,function(l){if(l.stop){l.stop()}});return f.stop0&&bB(f.stop0)};var g=f.then=function(m,n){var o=b3();var l=function(){try{var q=(f.state?m:n);if(cJ(q)){(function r(v){try{var s,u=0;if((bR(v)||cJ(v))&&cJ(s=v.then)){if(v===o){throw new TypeError()}s.call(v,function(w){if(!u++){r(w)}},function(w){if(!u++){o.fire(false,[w])}});o.stop0=v.stop}else{o.fire(true,[v])}}catch(t){if(!(u++)){o.fire(false,[t]);if(!e){throw t}}}})(bB(q,cP,f.values))}else{o.fire(f.state,f.values)}}catch(p){o.fire(false,[p]);if(!e){throw p}}};if(cJ(n)){f.errHandled()}o.stop0=f.stop;o.parent=f;if(f.state!=null){setTimeout(l,0)}else{a.push(l)}return o};f.always=function(l){return g(l,l)};f.error=function(l){return g(0,l)};return f}function cc(f,a){var b=this,e=0;if(f){for(var h=0,g=f.length;h<g;h++){var c=f[h];if(a&&bn(c)){for(var j=0,k=c.length;j<k;j++){b[e++]=c[j]}}else{b[e++]=c}}}else{b[e++]=a}b.length=e;b._=true}function cj(){return new cc(arguments,true)}bU({each:cM(cS),filter:bh(bS),collect:bh(b5),map:bh(b8),toObject:cM(bv),equals:cM(bM),sub:bh(cA),reverse:cM(by),find:cM(bL),findLast:cM(cD),startsWith:cM(bp),endsWith:cM(bw),contains:cM(ci),call:bh(cG),array:cM(bW),unite:cM(bj),merge:cM(b1),uniq:bh(cU),intersection:bh(bq),join:function(a){return b8(this,bT).join(a)},reduce:function(a,b){cS(this,function(c,e){b=a.call(this,b,c,e)});return b},sort:function(a){return new cc(b8(this,bT).sort(a))},remove:function(){bd(this,function(a){if(a.parentNode){a.parentNode.removeChild(a)}})},text:function(){return bm(bd,this,function(a){return a.textContent})["join"]("")},trav:function(c,f,a){var b=bD(f);var e=ch(b?bg:f);var g=b?f:a;return new cc(cm(this,function(j){var k=[];var h=j;while((h=h[c])&&k.length!=g){if(e(h)){k.push(h)}}return k}))},next:function(b,a){return this["trav"]("nextSibling",b,a||1)},up:function(b,a){return this["trav"]("parentNode",b,a||1)},select:function(b,a){return cL(b,this,a)},is:function(a){return !this["find"](cx(a))},only:function(a){return new cc(bS(this,ch(a)))},not:function(a){return new cc(bS(this,cx(a)))},get:function(g,j){var h=this;var e=h[0];if(e){if(cs(g)){var f=/^(\W*)(.*)/.exec(cp(g,/^%/,"@data-"));var a=f[1];var c;if(bE[a]){c=bE[a](this,f[2])}else{if(g=="$"){c=h.get("className")}else{if(g=="$$"){c=h.get("@style")}else{if(g=="$$slide"){c=h.get("$height")}else{if(g=="$$fade"||g=="$$show"){if(h.get("$visibility")=="hidden"||h.get("$display")=="none"){c=0}else{if(g=="$$fade"){c=isNaN(h.get("$opacity",true))?1:h.get("$opacity",true)}else{c=1}}}else{if(a=="$"){c=cW.getComputedStyle(e,bg)["getPropertyValue"](cp(f[2],/[A-Z]/g,function(k){return"-"+k.toLowerCase()}))}else{if(a=="@"){c=e.getAttribute(f[2])}else{c=e[f[2]]}}}}}}}return j?cq(c):c}else{var b={};(bn(g)?bd:bi)(g,function(k){b[k]=h.get(k,j)});return b}}},set:function(c,a){var f=this;if(a!==cP){var e=/^(\W*)(.*)/.exec(cp(cp(c,/^\$float$/,"cssFloat"),/^%/,"@data-"));var b=e[1];if(bQ[b]){bQ[b](this,e[2],a)}else{if(c=="$$fade"){this["set"]({"$visibility":a?"visible":"hidden","$opacity":a})}else{if(c=="$$slide"){f.set({"$visibility":a?"visible":"hidden","$overflow":"hidden","$height":/px/.test(a)?a:function(h,j,g){return cO(cL(g),a)}})}else{if(c=="$$show"){if(a){f.set({"$visibility":a?"visible":"hidden","$display":""})["set"]({"$display":function(g){return g=="none"?"block":g}})}else{f.set({"$display":"none"})}}else{if(c=="$$"){f.set("@style",a)}else{bd(this,function(h,g){var j=cJ(a)?a(cL(h)["get"](c),g,h):a;if(b=="$"){if(e[2]){h.style[e[2]]=j}else{bd(j&&j.split(/\s+/),function(m){var l=cp(m,/^[+-]/);var k=h.className||"";var n=cp(k,RegExp("(^|\\s+)"+l+"(?=$|\\s)"));if(/^\+/.test(m)||(l==m&&k==n)){n+=" "+l}h.className=cI(n)})}}else{if(c=="$$scrollX"){h.scroll(j,cL(h)["get"]("$$scrollY"))}else{if(c=="$$scrollY"){h.scroll(cL(h)["get"]("$$scrollX"),j)}else{if(b=="@"){if(j==bg){h.removeAttribute(e[2])}else{h.setAttribute(e[2],j)}}else{h[e[2]]=j}}}}})}}}}}}else{if(cs(c)||cJ(c)){f.set("$",c)}else{bi(c,function(g,h){f.set(g,h)})}}return f},show:function(){return this["set"]("$$show",1)},hide:function(){return this["set"]("$$show",0)},add:function(b,a){return this["each"](function(c,e){var g;function f(h){if(bn(h)){bd(h,f)}else{if(cJ(h)){f(h(c,e))}else{if(h!=bg){var j=ck(h)?h:document.createTextNode(h);if(g){g.parentNode.insertBefore(j,g.nextSibling)}else{if(a){a(j,c,c.parentNode)}else{c.appendChild(j)}}g=j}}}}f(e&&!cJ(b)?bV(b):b)})},fill:function(a){return this["each"](function(b){cL(b.childNodes)["remove"]()})["add"](a)},addAfter:function(a){return this["add"](a,function(c,e,b){b.insertBefore(c,e.nextSibling)})},addBefore:function(a){return this["add"](a,function(c,e,b){b.insertBefore(c,e)})},addFront:function(a){return this["add"](a,function(b,c){c.insertBefore(b,c.firstChild)})},replace:function(a){return this["add"](a,function(c,e,b){b.replaceChild(c,e)})},clone:bh(bV),animate:function(e,a,c){var g=b3();var h=this;var b=bm(bd,this,function(l,o){var k=cL(l),n,m={};bi(n=k.get(e),function(q,p){var r=e[q];m[q]=cJ(r)?r(p,o,l):q=="$$slide"?cO(k,r):r});return k.dial(n,m,c)});var f=a||500;var j;g.stop0=function(){g.fire(false);return j()};j=cL.loop(function(k){cG(b,[k/f]);if(k>=f){j();g.fire(true,[h])}});return g},dial:function(b,e,h){var g=this;var c=h||0;var f=cJ(c)?c:function(k,l,j){return j*(l-k)*(c+(1-c)*j*(3-2*j))+k};function a(j,k){return(/^#/.test(j))?parseInt(j.length>6?j.substr(k*2+1,2):((j=j.charAt(k+1))+j),16):cq(j.split(",")[k])}return function(j){bi(b,function(k,m){var l=e[k],n=0;g.set(k,j<=0?m:j>=1?l:(/^#|rgb\(/.test(l))?("rgb("+Math.round(f(a(m,n),a(l,n++),j))+","+Math.round(f(a(m,n),a(l,n++),j))+","+Math.round(f(a(m,n),a(l,n++),j))+")"):cp(l,/-?[\d.]+/,b0(f(cq(m),cq(l),j))))})}},toggle:function(a,b,g,e){var h=this;var f=false;var c;var j;if(b){h.set(a);return function(k){if(k!==f){j=(f=(k===true||k===false?k:!f))?b:a;if(g){(c=h.animate(j,c?c.stop():g,e))["then"](function(){c=bg})}else{h.set(j)}}}}else{return h.toggle(cp(a,/\b(?=\w)/g,"-"),cp(a,/\b(?=\w)/g,"+"))}},values:function(a){var b=a||{};this["each"](function(e){var c=e.name||e.id,g=b0(e.value);if(/form/i.test(e.tagName)){for(var f=0;f<e.elements.length;f++){cL(e.elements[f])["values"](b)}}else{if(c&&(!/ox|io/i.test(e.type)||e.checked)){b[c]=b[c]==bg?g:bm(bd,[b[c],g],bT)}}});return b},offset:function(){var a=this[0];var b={x:0,y:0};while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b},on:bH,onOver:function(a,c){var b=this,e=[];if(cJ(c)){return this["on"](a,"|mouseover |mouseout",function(f,g){var h=f.relatedTarget||f.toElement;var j=f.type!="mouseout";if(e[g]!==j){if(j||(!h)||(h!=b[g]&&!cL(h)["up"](b[g]).length)){e[g]=j;c.call(this,j,f)}}})}else{return this["onOver"](bg,a)}},onFocus:function(c,b,a){if(cJ(b)){return this["on"](c,"|blur",b,[false],a)["on"](c,"|focus",b,[true],a)}else{return this["onFocus"](bg,c,b)}},onChange:function cB(a,c,b){if(cJ(c)){return this["on"](a,"|input |change |click",function(f,g){var e=this[0];var h=/ox|io/i.test(e.type)?e.checked:e.value;if(e[cK]!=h){c.call(this,e[cK]=h,g)}},b)}else{return this["onChange"](bg,a,c)}},onClick:function(a,c,e,b){if(cJ(c)){return this["on"](a,"click",c,e,b)}else{return this["onClick"](bg,a,c,e)}},trigger:function(b,a){return this["each"](function(f,g){var c=true,e=f;while(e&&c){bi(e.M,function(h,j){c=c&&j(b,a,f)});e=e.parentNode}})},per:function(a,b){if(cJ(a)){for(var e=this.length,c=0;c<e;c++){a.call(this,new cc(bg,this[c]),c)}}else{cL(a,this)["per"](b)}return this},ht:function(a,c){var b=arguments.length>2?b1(cA(arguments,1)):c;return this["set"]("innerHTML",cJ(a)?a(b):/{{/.test(a)?M(a,b):/^#\S+$/.test(a)?M(cV(a)["text"],b):a)}},cc.prototype);bU({request:function(m,k,e,c){var f=c||{};var a,l=0,g=b3(),h=e&&(e.constructor==f.constructor);try{g.xhr=a=new XMLHttpRequest();g.stop0=function(){a.abort()};if(h){e=bm(bi,e,function j(o,n){return bm(bd,n,function(p){return encodeURIComponent(o)+((p!=bg)?"="+encodeURIComponent(p):"")})}).join("&")}if(e!=bg&&!/post/i.test(m)){k+="?"+e;e=bg}a.open(m,k,true,f.user,f.pass);if(h&&/post/i.test(m)){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}bi(f.headers,function(o,n){a.setRequestHeader(o,n)});bi(f.xhr,function(o,n){a[o]=n});a.onreadystatechange=function(){if(a.readyState==4&&!l++){if(a.status>=200&&a.status<300){g.fire(true,[a.responseText,a])}else{g.fire(false,[a.status,a.responseText,a])}}};a.send(e)}catch(b){if(!l){g.fire(false,[0,bg,b0(b)])}}return g},toJSON:JSON.stringify,parseJSON:JSON.parse,ready:a0,loop:function(c){var a;var e=0;var b=bP++;var g=cW.requestAnimationFrame||function(j){setTimeout(function(){j(+new Date())},33)};function h(j){bi(cf,function(k,l){l(j)});if(cC){g(h)}}function f(){if(cf[b]){delete cf[b];cC--}return e}cf[b]=function(j){a=a||j;c(e=j-a,f)};if(!(cC++)){g(h)}return f},off:bF,setCookie:function(c,b,e,a){document.cookie=c+"="+(a?b:escape(b))+(e?("; expires="+(bR(e)?e:new Date((+new Date())+e*86400000)).toUTCString()):"")},getCookie:function(c,a){var b,e=(b=new RegExp("(^|;)\\s*"+c+"=([^;]*)").exec(document.cookie))&&b[2];return a?e:e&&unescape(e)},wait:function(c,e){var b=b3();var a=setTimeout(function(){b.fire(true,e)},c);b.stop0=function(){b.fire(false);clearTimeout(a)};return b}},cL);bU({filter:cb(bS),collect:cb(b5),map:cb(b8),sub:cb(cA),reverse:by,each:cS,toObject:bv,find:bL,findLast:cD,contains:ci,startsWith:bp,endsWith:bw,equals:bM,call:cb(cG),array:bW,unite:bj,merge:b1,uniq:cb(cU),intersection:cb(bq),keys:cb(bJ),values:cb(function(a,c){var b=[];if(c){cS(c,function(e){b.push(a[e])})}else{bi(a,function(f,e){b.push(e)})}return b}),copyObj:bU,extend:function(a){return b1(cA(arguments,1),a)},range:function(a,f){var c=[],b=(f==bg)?a:f;for(var e=(f!=bg)?a:0;e<b;e++){c.push(e)}return new cc(c)},bind:cz,partial:br,eachObj:bi,mapObj:function(a,b,c){var e={};bi(a,function(g,f){e[g]=b.call(c||a,g,f)});return e},filterObj:function(a,b,e){var c={};bi(a,function(g,f){if(b.call(e||a,g,f)){c[g]=f}});return c},isList:bn,isFunction:cJ,isObject:bR,isNumber:bD,isBool:bK,isDate:bu,isValue:b6,isString:cs,toString:b0,dateClone:cd,dateAdd:bY,dateDiff:cH,dateMidnight:bN,pad:be,formatValue:cl,parseDate:ca,parseNumber:cg,trim:cI,isEmpty:function(a,b){return a==bg||!a.length||(b&&/^\s*$/.test(a))},escapeRegExp:ct,escapeHtml:b4,format:function(b,c,a){return bG(b,a)(c)},template:bG,formatHtml:M,promise:b3},cj);document.addEventListener("DOMContentLoaded",function(){cG(cF);cF=bg},false);return{HTML:function(){var a=bC("div");return cj(bB(a.ht,a,arguments)[0].childNodes)},_:cj,"$":cL,"$$":cV,EE:bC,M:cc,getter:bE,setter:bQ}};MINI=MINIFIED();_=MINI._,$=MINI.$,$$=MINI.$$,EE=MINI.EE,HTML=MINI.HTML;(function(){function ac(at){return"function"==typeof at||"object"==typeof at&&null!==at}function F(at){return"function"==typeof at}function al(at){return"object"==typeof at&&null!==at}function D(at){s=at}function A(at){u=at}function ag(){return function(){process.nextTick(aj)}}function E(){return function(){aa(aj)}}function an(){var at=0,au=new g(aj),av=document.createTextNode("");return au.observe(av,{characterData:!0}),function(){av.data=at=++at%2}}function G(){var at=new MessageChannel;return at.port1.onmessage=aj,function(){at.port2.postMessage(0)}}function aq(){return function(){setTimeout(aj,1)}}function aj(){for(var at=0;N>at;at+=2){var au=w[at],av=w[at+1];au(av),w[at]=void 0,w[at+1]=void 0}N=0}function ad(){try{var at=require,au=at("vertx");return aa=au.runOnLoop||au.runOnContext,E()}catch(av){return aq()}}function B(){}function af(){return new TypeError("You cannot resolve a promise with itself")}function ae(){return new TypeError("A promises callback cannot return that same promise.")}function ak(at){try{return at.then}catch(au){return v.error=au,v}}function ar(ax,au,av,at){try{ax.call(au,av,at)}catch(aw){return aw}}function H(at,au,av){u(function(ax){var ay=!1,aw=ar(av,au,function(az){ay||(ay=!0,au!==az?J(ax,az):X(ax,az))},function(az){ay||(ay=!0,a(ax,az))},"Settle: "+(ax._label||" unknown promise"));!ay&&aw&&(ay=!0,a(ax,aw))},at)}function am(at,au){au._state===o?X(at,au._result):au._state===ao?a(at,au._result):Z(au,void 0,function(av){J(at,av)},function(av){a(at,av)})}function M(at,av){if(av.constructor===at.constructor){am(at,av)}else{var au=ak(av);au===v?a(at,v.error):void 0===au?X(at,av):F(au)?H(at,av,au):X(at,av)}}function J(au,at){au===at?a(au,af()):ac(at)?M(au,at):X(au,at)}function ap(at){at._onerror&&at._onerror(at._result),m(at)}function X(at,au){at._state===h&&(at._result=au,at._state=o,0!==at._subscribers.length&&u(m,at))}function a(at,au){at._state===h&&(at._state=ao,at._result=au,u(ap,at))}function Z(ax,at,av,ay){var aw=ax._subscribers,au=aw.length;ax._onerror=null,aw[au]=at,aw[au+o]=av,aw[au+ao]=ay,0===au&&ax._state&&u(m,ax)}function m(ax){var at=ax._subscribers,av=ax._state;if(0!==at.length){for(var ay,aw,au=ax._result,az=0;az<at.length;az+=3){ay=at[az],aw=at[az+av],ay?l(av,ay,aw,au):aw(au)}ax._subscribers.length=0}}function q(){this.error=null}function j(at,au){try{return at(au)}catch(av){return z.error=av,z}}function l(ax,az,aB,aA){var ay,at,av,au,aw=F(aB);if(aw){if(ay=j(aB,aA),ay===z?(au=!0,at=ay.error,ay=null):av=!0,az===ay){return void a(az,ae())}}else{ay=aA,av=!0}az._state!==h||(aw&&av?J(az,ay):au?a(az,at):ax===o?X(az,ay):ax===ao&&a(az,ay))}function k(at,au){try{au(function(aw){J(at,aw)},function(aw){a(at,aw)})}catch(av){a(at,av)}}function ai(at,au){var av=this;av._instanceConstructor=at,av.promise=new at(B),av._validateInput(au)?(av._input=au,av.length=au.length,av._remaining=au.length,av._init(),0===av.length?X(av.promise,av._result):(av.length=av.length||0,av._enumerate(),0===av._remaining&&X(av.promise,av._result))):a(av.promise,av._validationError())}function n(at){return new L(this,at).promise}function K(ax){function at(aA){J(aw,aA)}function av(aA){a(aw,aA)}var ay=this,aw=new ay(B);if(!f(ax)){return a(aw,new TypeError("You must pass an array to race.")),aw}for(var au=ax.length,az=0;aw._state===h&&au>az;az++){Z(ay.resolve(ax[az]),void 0,at,av)}return aw}function p(at){var au=this;if(at&&"object"==typeof at&&at.constructor===au){return at}var av=new au(B);return J(av,at),av}function r(at){var au=this,av=new au(B);return a(av,at),av}function ah(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function b(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function c(at){this._id=I++,this._state=void 0,this._result=void 0,this._subscribers=[],B!==at&&(F(at)||ah(),this instanceof c||b(),k(this,at))}function Y(){var at;if("undefined"!=typeof global){at=global}else{if("undefined"!=typeof self){at=self}else{try{at=Function("return this")()}catch(au){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var av=at.Promise;(!av||"[object Promise]"!==Object.prototype.toString.call(av.resolve())||av.cast)&&(at.Promise=U)}var V;V=Array.isArray?Array.isArray:function(at){return"[object Array]"===Object.prototype.toString.call(at)};var aa,s,C,f=V,N=0,u=({}.toString,function(at,au){w[N]=at,w[N+1]=au,N+=2,2===N&&(s?s(aj):C())}),y="undefined"!=typeof window?window:void 0,e=y||{},g=e.MutationObserver||e.WebKitMutationObserver,t="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,w=new Array(1000);C=t?ag():g?an():x?G():void 0===y&&"function"==typeof require?ad():aq();var h=void 0,o=1,ao=2,v=new q,z=new q;ai.prototype._validateInput=function(at){return f(at)},ai.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},ai.prototype._init=function(){this._result=new Array(this.length)};var L=ai;ai.prototype._enumerate=function(){for(var ax=this,au=ax.length,av=ax.promise,at=ax._input,aw=0;av._state===h&&au>aw;aw++){ax._eachEntry(at[aw],aw)}},ai.prototype._eachEntry=function(aw,au){var at=this,av=at._instanceConstructor;al(aw)?aw.constructor===av&&aw._state!==h?(aw._onerror=null,at._settledAt(aw._state,au,aw._result)):at._willSettleAt(av.resolve(aw),au):(at._remaining--,at._result[au]=aw)},ai.prototype._settledAt=function(ax,au,av){var at=this,aw=at.promise;aw._state===h&&(at._remaining--,ax===ao?a(aw,av):at._result[au]=av),0===at._remaining&&X(aw,at._result)},ai.prototype._willSettleAt=function(at,au){var av=this;Z(at,void 0,function(aw){av._settledAt(o,au,aw)},function(aw){av._settledAt(ao,au,aw)})};var O=n,R=K,W=p,ab=r,I=0,U=c;c.all=O,c.race=R,c.resolve=W,c.reject=ab,c._setScheduler=D,c._setAsap=A,c._asap=u,c.prototype={constructor:c,then:function(ax,at){var av=this,ay=av._state;if(ay===o&&!ax||ay===ao&&!at){return this}var aw=new this.constructor(B),au=av._result;if(ay){var az=arguments[ay-1];u(function(){l(ay,aw,az,au)})}else{Z(av,aw,ax,at)}return aw},"catch":function(at){return this.then(null,at)}};var Q=Y,S={Promise:U,polyfill:Q};"function"==typeof define&&define.amd?define(function(){return S}):"undefined"!=typeof module&&module.exports?module.exports=S:"undefined"!=typeof this&&(this.ES6Promise=S),Q()}).call(this),"undefined"==typeof Promise&&ES6Promise.polyfill(),Function.prototype.bind||(Function.prototype.bind=function(k){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var g=Array.prototype.slice.call(arguments,1),h=this,e=function(){},j=function(){return h.apply(this instanceof e&&k?this:k,g.concat(Array.prototype.slice.call(arguments)))};return e.prototype=this.prototype,j.prototype=new e,j}),Array.prototype.map||(Array.prototype.map=function(o,e){if(void 0===this||null===this){throw new TypeError("this is null or not defined")}var q,s=Object(this),r=s.length>>>0;if("function"!=typeof o){throw new TypeError(o+" is not a function")}arguments.length>1&&(q=e);for(var p=new Array(r),a=0;r>a;){var n,m;a in s&&(n=s[a],m=o.call(q,n,a,s),p[a]=m),a++}return p}),Array.prototype.filter||(Array.prototype.filter=function(m){if(void 0===this||null===this){throw new TypeError("this is null or not defined")}var e=Object(this),k=e.length>>>0;if("function"!=typeof m){throw new TypeError(m+" is not a function")}for(var n=[],l=arguments.length>=2?arguments[1]:void 0,j=0;k>j;j++){if(j in e){var o=e[j];m.call(l,o,j,e)&&n.push(o)}}return n}),Array.prototype.forEach||(Array.prototype.forEach=function(m,e){var k,n;if(null===this||void 0===this){throw new TypeError(" this is null or not defined")}var l=Object(this),j=l.length>>>0;if("function"!=typeof m){throw new TypeError(m+" is not a function")}for(arguments.length>1&&(k=e),n=0;j>n;){var o;n in l&&(o=l[n],m.call(k,o,n,l)),n++}}),!function(c,e){"function"==typeof define&&define.amd?define("stackframe",[],e):"object"==typeof exports?module.exports=e():c.StackFrame=e()}(this,function(){function c(a){return !isNaN(parseFloat(a))&&isFinite(a)}function e(k,m,a,l,b,n){void 0!==k&&this.setFunctionName(k),void 0!==m&&this.setArgs(m),void 0!==a&&this.setFileName(a),void 0!==l&&this.setLineNumber(l),void 0!==b&&this.setColumnNumber(b),void 0!==n&&this.setSource(n)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(a){this.functionName=String(a)},getArgs:function(){return this.args},setArgs:function(a){if("[object Array]"!==Object.prototype.toString.call(a)){throw new TypeError("Args must be an Array")}this.args=a},getFileName:function(){return this.fileName},setFileName:function(a){this.fileName=String(a)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(a){if(!c(a)){throw new TypeError("Line Number must be a Number")}this.lineNumber=Number(a)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(a){if(!c(a)){throw new TypeError("Column Number must be a Number")}this.columnNumber=Number(a)},getSource:function(){return this.source},setSource:function(a){this.source=String(a)},toString:function(){var j=this.getFunctionName()||"{anonymous}",a="("+(this.getArgs()||[]).join(",")+")",h=this.getFileName()?"@"+this.getFileName():"",b=c(this.getLineNumber())?":"+this.getLineNumber():"",k=c(this.getColumnNumber())?":"+this.getColumnNumber():"";return j+a+h+b+k}},e});var SourceMap=function(e){function f(b){if(g[b]){return g[b].exports}var a=g[b]={exports:{},id:b,loaded:!1};return e[b].call(a.exports,a,a.exports,f),a.loaded=!0,a.exports}var g={};return f.m=e,f.c=g,f.p="",f(0)}([function(e,u,o){function s(g){var b=g;return"string"==typeof g&&(b=JSON.parse(g.replace(/^\)\]\}'/,""))),null!=b.sections?new t(b):new r(b)}function r(j){var g=j;"string"==typeof j&&(g=JSON.parse(j.replace(/^\)\]\}'/,"")));var k=a.getArg(g,"version"),v=a.getArg(g,"sources"),m=a.getArg(g,"names",[]),p=a.getArg(g,"sourceRoot",null),b=a.getArg(g,"sourcesContent",null),h=a.getArg(g,"mappings"),q=a.getArg(g,"file",null);if(k!=this._version){throw new Error("Unsupported version: "+k)}v=v.map(a.normalize).map(function(w){return p&&a.isAbsolute(p)&&a.isAbsolute(w)?a.relative(p,w):w}),this._names=c.fromArray(m,!0),this._sources=c.fromArray(v,!0),this.sourceRoot=p,this.sourcesContent=b,this._mappings=h,this.file=q}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function t(j){var k=j;"string"==typeof j&&(k=JSON.parse(j.replace(/^\)\]\}'/,"")));var h=a.getArg(k,"version"),g=a.getArg(k,"sections");if(h!=this._version){throw new Error("Unsupported version: "+h)}this._sources=new c,this._names=new c;var b={line:-1,column:0};this._sections=g.map(function(q){if(q.url){throw new Error("Support for url field in sections not implemented.")}var p=a.getArg(q,"offset"),v=a.getArg(p,"line"),m=a.getArg(p,"column");if(v<b.line||v===b.line&&m<b.column){throw new Error("Section offsets must be ordered and non-overlapping.")}return b=p,{generatedOffset:{generatedLine:v+1,generatedColumn:m+1},consumer:new s(a.getArg(q,"map"))}})}var a=o(1),y=o(2),c=o(3).ArraySet,n=o(4),f=o(6).quickSort;s.fromSourceMap=function(b){return r.fromSourceMap(b)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(h,b){var g=h.charAt(b);return";"===g||","===g},s.prototype._parseMappings=function(g,b){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(h,j,k){var p,m=j||null,g=k||s.GENERATED_ORDER;switch(g){case s.GENERATED_ORDER:p=this._generatedMappings;break;case s.ORIGINAL_ORDER:p=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var b=this.sourceRoot;p.map(function(v){var q=null===v.source?null:this._sources.at(v.source);return null!=q&&null!=b&&(q=a.join(b,q)),{source:q,generatedLine:v.generatedLine,generatedColumn:v.generatedColumn,originalLine:v.originalLine,originalColumn:v.originalColumn,name:null===v.name?null:this._names.at(v.name)}},this).forEach(h,m)},s.prototype.allGeneratedPositionsFor=function(q){var k=a.getArg(q,"line"),p={source:a.getArg(q,"source"),originalLine:k,originalColumn:a.getArg(q,"column",0)};if(null!=this.sourceRoot&&(p.source=a.relative(this.sourceRoot,p.source)),!this._sources.has(p.source)){return[]}p.source=this._sources.indexOf(p.source);var j=[],m=this._findMapping(p,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,y.LEAST_UPPER_BOUND);if(m>=0){var h=this._originalMappings[m];if(void 0===q.column){for(var g=h.originalLine;h&&h.originalLine===g;){j.push({line:a.getArg(h,"generatedLine",null),column:a.getArg(h,"generatedColumn",null),lastColumn:a.getArg(h,"lastGeneratedColumn",null)}),h=this._originalMappings[++m]}}else{for(var b=h.originalColumn;h&&h.originalLine===k&&h.originalColumn==b;){j.push({line:a.getArg(h,"generatedLine",null),column:a.getArg(h,"generatedColumn",null),lastColumn:a.getArg(h,"lastGeneratedColumn",null)}),h=this._originalMappings[++m]}}}return j},u.SourceMapConsumer=s,r.prototype=Object.create(s.prototype),r.prototype.consumer=s,r.fromSourceMap=function(k){var g=Object.create(r.prototype),p=g._names=c.fromArray(k._names.toArray(),!0),x=g._sources=c.fromArray(k._sources.toArray(),!0);g.sourceRoot=k._sourceRoot,g.sourcesContent=k._generateSourcesContent(g._sources.toArray(),g.sourceRoot),g.file=k._file;for(var b=k._mappings.toArray().slice(),h=g.__generatedMappings=[],j=g.__originalMappings=[],v=0,w=b.length;w>v;v++){var q=b[v],m=new l;m.generatedLine=q.generatedLine,m.generatedColumn=q.generatedColumn,q.source&&(m.source=x.indexOf(q.source),m.originalLine=q.originalLine,m.originalColumn=q.originalColumn,q.name&&(m.name=p.indexOf(q.name)),j.push(m)),h.push(m)}return f(g.__originalMappings,a.compareByOriginalPositions),g},r.prototype._version=3,Object.defineProperty(r.prototype,"sources",{get:function(){return this._sources.toArray().map(function(b){return null!=this.sourceRoot?a.join(this.sourceRoot,b):b},this)}}),r.prototype._parseMappings=function(k,m){for(var w,R,x,S,U,h=1,A=0,q=0,p=0,v=0,j=0,V=k.length,b=0,X={},W={},g=[],Q=[];V>b;){if(";"===k.charAt(b)){h++,b++,A=0}else{if(","===k.charAt(b)){b++}else{for(w=new l,w.generatedLine=h,S=b;V>S&&!this._charIsMappingSeparator(k,S);S++){}if(R=k.slice(b,S),x=X[R]){b+=R.length}else{for(x=[];S>b;){n.decode(k,b,W),U=W.value,b=W.rest,x.push(U)}if(2===x.length){throw new Error("Found a source, but no line and column")}if(3===x.length){throw new Error("Found a source and line, but no column")}X[R]=x}w.generatedColumn=A+x[0],A=w.generatedColumn,x.length>1&&(w.source=v+x[1],v+=x[1],w.originalLine=q+x[2],q=w.originalLine,w.originalLine+=1,w.originalColumn=p+x[3],p=w.originalColumn,x.length>4&&(w.name=j+x[4],j+=x[4])),Q.push(w),"number"==typeof w.originalLine&&g.push(w)}}}f(Q,a.compareByGeneratedPositionsDeflated),this.__generatedMappings=Q,f(g,a.compareByOriginalPositions),this.__originalMappings=g},r.prototype._findMapping=function(g,m,h,k,j,b){if(g[h]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+g[h])}if(g[k]<0){throw new TypeError("Column must be greater than or equal to 0, got "+g[k])}return y.search(g,m,j,b)},r.prototype.computeColumnSpans=function(){for(var h=0;h<this._generatedMappings.length;++h){var b=this._generatedMappings[h];if(h+1<this._generatedMappings.length){var g=this._generatedMappings[h+1];if(b.generatedLine===g.generatedLine){b.lastGeneratedColumn=g.generatedColumn-1;continue}}b.lastGeneratedColumn=1/0}},r.prototype.originalPositionFor=function(g){var m={generatedLine:a.getArg(g,"line"),generatedColumn:a.getArg(g,"column")},h=this._findMapping(m,this._generatedMappings,"generatedLine","generatedColumn",a.compareByGeneratedPositionsDeflated,a.getArg(g,"bias",s.GREATEST_LOWER_BOUND));if(h>=0){var j=this._generatedMappings[h];if(j.generatedLine===m.generatedLine){var b=a.getArg(j,"source",null);null!==b&&(b=this._sources.at(b),null!=this.sourceRoot&&(b=a.join(this.sourceRoot,b)));var k=a.getArg(j,"name",null);return null!==k&&(k=this._names.at(k)),{source:b,line:a.getArg(j,"originalLine",null),column:a.getArg(j,"originalColumn",null),name:k}}}return{source:null,line:null,column:null,name:null}},r.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(b){return null==b}):!1},r.prototype.sourceContentFor=function(h,b){if(!this.sourcesContent){return null}if(null!=this.sourceRoot&&(h=a.relative(this.sourceRoot,h)),this._sources.has(h)){return this.sourcesContent[this._sources.indexOf(h)]}var g;if(null!=this.sourceRoot&&(g=a.urlParse(this.sourceRoot))){var j=h.replace(/^file:\/\//,"");if("file"==g.scheme&&this._sources.has(j)){return this.sourcesContent[this._sources.indexOf(j)]}if((!g.path||"/"==g.path)&&this._sources.has("/"+h)){return this.sourcesContent[this._sources.indexOf("/"+h)]}}if(b){return null}throw new Error('"'+h+'" is not in the SourceMap.')},r.prototype.generatedPositionFor=function(j){var k=a.getArg(j,"source");if(null!=this.sourceRoot&&(k=a.relative(this.sourceRoot,k)),!this._sources.has(k)){return{line:null,column:null,lastColumn:null}}k=this._sources.indexOf(k);var h={source:k,originalLine:a.getArg(j,"line"),originalColumn:a.getArg(j,"column")},g=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",a.compareByOriginalPositions,a.getArg(j,"bias",s.GREATEST_LOWER_BOUND));if(g>=0){var b=this._originalMappings[g];if(b.source===h.source){return{line:a.getArg(b,"generatedLine",null),column:a.getArg(b,"generatedColumn",null),lastColumn:a.getArg(b,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},u.BasicSourceMapConsumer=r,t.prototype=Object.create(s.prototype),t.prototype.constructor=s,t.prototype._version=3,Object.defineProperty(t.prototype,"sources",{get:function(){for(var h=[],b=0;b<this._sections.length;b++){for(var g=0;g<this._sections[b].consumer.sources.length;g++){h.push(this._sections[b].consumer.sources[g])}}return h}}),t.prototype.originalPositionFor=function(h){var b={generatedLine:a.getArg(h,"line"),generatedColumn:a.getArg(h,"column")},g=y.search(b,this._sections,function(p,k){var m=p.generatedLine-k.generatedOffset.generatedLine;return m?m:p.generatedColumn-k.generatedOffset.generatedColumn}),j=this._sections[g];return j?j.consumer.originalPositionFor({line:b.generatedLine-(j.generatedOffset.generatedLine-1),column:b.generatedColumn-(j.generatedOffset.generatedLine===b.generatedLine?j.generatedOffset.generatedColumn-1:0),bias:h.bias}):{source:null,line:null,column:null,name:null}},t.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(b){return b.consumer.hasContentsOfAllSources()})},t.prototype.sourceContentFor=function(j,g){for(var b=0;b<this._sections.length;b++){var k=this._sections[b],h=k.consumer.sourceContentFor(j,!0);if(h){return h}}if(g){return null}throw new Error('"'+j+'" is not in the SourceMap.')},t.prototype.generatedPositionFor=function(j){for(var g=0;g<this._sections.length;g++){var b=this._sections[g];if(-1!==b.consumer.sources.indexOf(a.getArg(j,"source"))){var k=b.consumer.generatedPositionFor(j);if(k){var h={line:k.line+(b.generatedOffset.generatedLine-1),column:k.column+(b.generatedOffset.generatedLine===k.line?b.generatedOffset.generatedColumn-1:0)};return h}}}return{line:null,column:null}},t.prototype._parseMappings=function(h,w){this.__generatedMappings=[],this.__originalMappings=[];for(var p=0;p<this._sections.length;p++){for(var q=this._sections[p],k=q.consumer._generatedMappings,j=0;j<k.length;j++){var v=k[p],b=q.consumer._sources.at(v.source);null!==q.consumer.sourceRoot&&(b=a.join(q.consumer.sourceRoot,b)),this._sources.add(b),b=this._sources.indexOf(b);var g=q.consumer._names.at(v.name);this._names.add(g),g=this._names.indexOf(g);var m={source:b,generatedLine:v.generatedLine+(q.generatedOffset.generatedLine-1),generatedColumn:v.column+(q.generatedOffset.generatedLine===v.generatedLine)?q.generatedOffset.generatedColumn-1:0,originalLine:v.originalLine,originalColumn:v.originalColumn,name:g};this.__generatedMappings.push(m),"number"==typeof m.originalLine&&this.__originalMappings.push(m)}}f(this.__generatedMappings,a.compareByGeneratedPositionsDeflated),f(this.__originalMappings,a.compareByOriginalPositions)},u.IndexedSourceMapConsumer=t},function(g,G){function h(k,b,j){if(b in k){return k[b]}if(3===arguments.length){return j}throw new Error('"'+b+'" is a required argument.')}function p(j){var b=j.match(o);return b?{scheme:b[1],auth:b[2],host:b[3],port:b[4],path:b[5]}:null}function l(j){var b="";return j.scheme&&(b+=j.scheme+":"),b+="//",j.auth&&(b+=j.auth+"@"),j.host&&(b+=j.host),j.port&&(b+=":"+j.port),j.path&&(b+=j.path),b}function s(x){var j=x,b=p(x);if(b){if(!b.path){return x}j=b.path}for(var y,v=G.isAbsolute(j),k=j.split(/\/+/),q=0,w=k.length-1;w>=0;w--){y=k[w],"."===y?k.splice(w,1):".."===y?q++:q>0&&(""===y?(k.splice(w+1,q),q=0):(k.splice(w,2),q--))}return j=k.join("/"),""===j&&(j=v?"/":"."),b?(b.path=j,l(b)):j}function u(j,q){""===j&&(j="."),""===q&&(q=".");var b=p(q),k=p(j);if(k&&(j=k.path||"/"),b&&!b.scheme){return k&&(b.scheme=k.scheme),l(b)}if(b||q.match(c)){return q}if(k&&!k.host&&!k.path){return k.host=q,l(k)}var v="/"===q.charAt(0)?q:s(j.replace(/\/+$/,"")+"/"+q);return k?(k.path=v,l(k)):v}function e(k,b){""===k&&(k="."),k=k.replace(/\/$/,"");for(var j=0;0!==b.indexOf(k+"/");){var q=k.lastIndexOf("/");if(0>q){return b}if(k=k.slice(0,q),k.match(/^([^\/]+:\/)?\/*$/)){return b}++j}return Array(j+1).join("../")+b.substr(k.length+1)}function a(b){return"$"+b}function f(b){return b.substr(1)}function t(k,b,j){var q=k.source-b.source;return 0!==q?q:(q=k.originalLine-b.originalLine,0!==q?q:(q=k.originalColumn-b.originalColumn,0!==q||j?q:(q=k.generatedColumn-b.generatedColumn,0!==q?q:(q=k.generatedLine-b.generatedLine,0!==q?q:k.name-b.name))))}function n(k,b,j){var q=k.generatedLine-b.generatedLine;return 0!==q?q:(q=k.generatedColumn-b.generatedColumn,0!==q||j?q:(q=k.source-b.source,0!==q?q:(q=k.originalLine-b.originalLine,0!==q?q:(q=k.originalColumn-b.originalColumn,0!==q?q:k.name-b.name))))}function m(j,b){return j===b?0:j>b?1:-1}function r(k,b){var j=k.generatedLine-b.generatedLine;return 0!==j?j:(j=k.generatedColumn-b.generatedColumn,0!==j?j:(j=m(k.source,b.source),0!==j?j:(j=k.originalLine-b.originalLine,0!==j?j:(j=k.originalColumn-b.originalColumn,0!==j?j:m(k.name,b.name)))))}G.getArg=h;var o=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,c=/^data:.+\,.+$/;G.urlParse=p,G.urlGenerate=l,G.normalize=s,G.join=u,G.isAbsolute=function(b){return"/"===b.charAt(0)||!!b.match(o)},G.relative=e,G.toSetString=a,G.fromSetString=f,G.compareByOriginalPositions=t,G.compareByGeneratedPositionsDeflated=n,G.compareByGeneratedPositionsInflated=r},function(e,f){function g(c,n,b,p,o,r){var q=Math.floor((n-c)/2)+c,a=o(b,p[q],!0);return 0===a?q:a>0?n-q>1?g(q,n,b,p,o,r):r==f.LEAST_UPPER_BOUND?n<p.length?n:-1:q:q-c>1?g(c,q,b,p,o,r):r==f.LEAST_UPPER_BOUND?q:0>c?-1:c}f.GREATEST_LOWER_BOUND=1,f.LEAST_UPPER_BOUND=2,f.search=function(b,c,a,l){if(0===c.length){return -1}var k=g(-1,c.length,b,c,a,l||f.GREATEST_LOWER_BOUND);if(0>k){return -1}for(;k-1>=0&&0===a(c[k],c[k-1],!0);){--k}return k}},function(k,g,h){function e(){this._array=[],this._set={}}var j=h(1);e.fromArray=function(c,f){for(var a=new e,b=0,m=c.length;m>b;b++){a.add(c[b],f)}return a},e.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},e.prototype.add=function(b,f){var a=j.toSetString(b),c=this._set.hasOwnProperty(a),m=this._array.length;(!c||f)&&this._array.push(b),c||(this._set[a]=m)},e.prototype.has=function(a){var b=j.toSetString(a);return this._set.hasOwnProperty(b)},e.prototype.indexOf=function(a){var b=j.toSetString(a);if(this._set.hasOwnProperty(b)){return this._set[b]}throw new Error('"'+a+'" is not in the set.')},e.prototype.at=function(a){if(a>=0&&a<this._array.length){return this._array[a]}throw new Error("No element indexed by "+a)},e.prototype.toArray=function(){return this._array.slice()},g.ArraySet=e},function(q,c,s){function u(b){return 0>b?(-b<<1)+1:(b<<1)+0}function t(g){var b=1===(1&g),f=g>>1;return b?-f:f}var r=s(5),a=5,n=1<<a,e=n-1,o=n;c.encode=function(h){var b,g="",f=u(h);do{b=f&e,f>>>=a,f>0&&(b|=o),g+=r.encode(b)}while(f>0);return g},c.decode=function(f,l,b){var k,h,m=f.length,j=0,g=0;do{if(l>=m){throw new Error("Expected more digits in base 64 VLQ value.")}if(h=r.decode(f.charCodeAt(l++)),-1===h){throw new Error("Invalid base64 digit: "+f.charAt(l-1))}k=!!(h&o),h&=e,j+=h<<g,g+=a}while(k);b.value=t(j),b.rest=l}},function(e,f){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");f.encode=function(a){if(a>=0&&a<g.length){return g[a]}throw new TypeError("Must be between 0 and 63: "+a)},f.decode=function(l){var x=65,r=90,t=97,s=122,n=48,u=57,b=43,a=47,c=26,o=52;return l>=x&&r>=l?l-x:l>=t&&s>=l?l-t+c:l>=n&&u>=l?l-n+o:l==b?62:l==a?63:-1}},function(k,g){function h(b,f,a){var c=b[f];b[f]=b[a],b[a]=c}function e(a,b){return Math.round(a+Math.random()*(b-a))}function j(r,b,t,a){if(a>t){var f=e(t,a),c=t-1;h(r,f,a);for(var l=r[a],u=t;a>u;u++){b(r[u],l)<=0&&(c+=1,h(r,c,u))}h(r,c+1,u);var s=c+1;j(r,b,t,s-1),j(r,b,s+1,a)}}g.quickSort=function(a,b){j(a,b,0,a.length-1)}}]);!function(c,e){"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],e):"object"==typeof exports?module.exports=e(require("source-map/lib/source-map-consumer"),require("stackframe")):c.StackTraceGPS=e(c.SourceMap,c.StackFrame)}(this,function(o,e){function q(b,c,g){var f=new XMLHttpRequest;f.open("get",b),f.onerror=g,f.onreadystatechange=function(){if(4===f.readyState){if(f.status>=200&&f.status<400){return c(f.responseText)}g(new Error("Unable to retrieve "+b))}},f.send()}function s(h,I,u){for(var j,G,l,H=/function\s+([^(]*?)\s*\(([^)]*)\)/,f=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,b=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,g=h.split("\n"),t="",k=Math.min(I,20),c=0;k>c;++c){if(j=g[I-c-1],l=j.indexOf("//"),l>=0&&(j=j.substr(0,l)),j){if(t=j+t,G=f.exec(t),G&&G[1]){return G[1]}if(G=H.exec(t),G&&G[1]){return G[1]}if(G=b.exec(t),G&&G[1]){return G[1]}}}return void 0}function r(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create){throw new Error("Unable to consume source maps in older browsers")}}function p(b){if("object"!=typeof b){throw new TypeError("Given StackFrame is not an object")}if("string"!=typeof b.fileName){throw new TypeError("Given file name is not a String")}if("number"!=typeof b.lineNumber||b.lineNumber%1!==0||b.lineNumber<1){throw new TypeError("Given line number must be a positive integer")}if("number"!=typeof b.columnNumber||b.columnNumber%1!==0||b.columnNumber<0){throw new TypeError("Given column number must be a non-negative integer")}return !0}function a(c){var b=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)$/.exec(c);if(b&&b[1]){return b[1]}throw new Error("sourceMappingURL not found")}function n(c,h,g,l,j){var k=new o.SourceMapConsumer(c),b=k.originalPositionFor({line:g,column:l}),f=k.sourceContentFor(b.source);return f&&(j[b.source]=f),new e(b.name,h,b.source,b.line,b.column)}return function m(b){return this instanceof m?(b=b||{},this.sourceCache=b.sourceCache||{},this.ajax=q,this._atob=function(c){if(window&&window.atob){return window.atob(c)}if("undefined"!=typeof Buffer){return new Buffer(c,"base64").toString("utf-8")}throw new Error("No base64 decoder available")},this._get=function(c){return new Promise(function(g,j){var h="data:"===c.substr(0,5);if(this.sourceCache[c]){g(this.sourceCache[c])}else{if(b.offline&&!h){j(new Error("Cannot make network requests in offline mode"))}else{if(h){var l="application/json;base64";if(c.substr(5,l.length)!==l){j(new Error("The encoding of the inline sourcemap is not supported"))}else{var k="data:".length+l.length+",".length,f=c.substr(k),u=this._atob(f);this.sourceCache[c]=u,g(u)}}else{this.ajax(c,function(t){this.sourceCache[c]=t,g(t)}.bind(this),j)}}}}.bind(this))},this.pinpoint=function(c){return new Promise(function(g,f){this.getMappedLocation(c).then(function(j){function h(){g(j)}this.findFunctionName(j).then(g,h)["catch"](h)}.bind(this),f)}.bind(this))},this.findFunctionName=function(c){return new Promise(function(f,g){p(c),this._get(c.fileName).then(function(h){var j=s(h,c.lineNumber,c.columnNumber);f(new e(j,c.args,c.fileName,c.lineNumber,c.columnNumber))},g)}.bind(this))},void (this.getMappedLocation=function(c){return new Promise(function(f,h){r(),p(c);var j=this.sourceCache,g=c.fileName;this._get(g).then(function(l){var t=a(l),k="data:"===t.substr(0,5);"/"===t[0]||k||(t=g.substring(0,g.lastIndexOf("/")+1)+t),this._get(t).then(function(v){var w=c.lineNumber,x=c.columnNumber;f(n(v,c.args,w,x,j))},h)["catch"](h)}.bind(this),h)["catch"](h)}.bind(this))})):new m(b)}}),function(c,e){"function"==typeof define&&define.amd?define("stack-generator",["stackframe"],e):"object"==typeof exports?module.exports=e(require("stackframe")):c.StackGenerator=e(c.StackFrame)}(this,function(b){return{backtrace:function(m){var h=[],k=10;"object"==typeof m&&"number"==typeof m.maxStackSize&&(k=m.maxStackSize);for(var j=arguments.callee;j&&h.length<k;){var a=[].slice.call(j.arguments);/function(?:\s+([\w$]+))+\s*\(/.test(j.toString())?h.push(new b(RegExp.$1||void 0,a)):h.push(new b(void 0,a));try{j=j.caller}catch(l){break}}return h}}}),function(c,e){"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],e):"object"==typeof exports?module.exports=e(require("stackframe")):c.ErrorStackParser=e(c.StackFrame)}(this,function(e){var f=/(^|@)\S+\:\d+/,g=/\s+at .*(\S+\:\d+|\(native\))/;return{parse:function(a){if("undefined"!=typeof a.stacktrace||"undefined"!=typeof a["opera#sourceloc"]){return this.parseOpera(a)}if(a.stack&&a.stack.match(g)){return this.parseV8OrIE(a)}if(a.stack&&a.stack.match(f)){return this.parseFFOrSafari(a)}throw new Error("Cannot parse given Error object")},extractLocation:function(c){if(-1===c.indexOf(":")){return[c]}var k=c.replace(/[\(\)\s]/g,"").split(":"),a=k.pop(),j=k[k.length-1];if(!isNaN(parseFloat(j))&&isFinite(j)){var b=k.pop();return[k.join(":"),b,a]}return[k.join(":"),a,void 0]},parseV8OrIE:function(a){return a.stack.split("\n").filter(function(b){return !!b.match(g)},this).map(function(k){var b=k.replace(/^\s+/,"").split(/\s+/).slice(1),j=this.extractLocation(b.pop()),c=b[0]&&"Anonymous"!==b[0]?b[0]:void 0;return new e(c,void 0,j[0],j[1],j[2],k)},this)},parseFFOrSafari:function(a){return a.stack.split("\n").filter(function(b){return !!b.match(f)},this).map(function(k){var b=k.split("@"),j=this.extractLocation(b.pop()),c=b.shift()||void 0;return new e(c,void 0,j[0],j[1],j[2],k)},this)},parseOpera:function(a){return !a.stacktrace||a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?this.parseOpera9(a):a.stack?this.parseOpera11(a):this.parseOpera10(a)},parseOpera9:function(m){for(var a=/Line (\d+).*script (?:in )?(\S+)/i,c=m.message.split("\n"),b=[],n=2,l=c.length;l>n;n+=2){var o=a.exec(c[n]);o&&b.push(new e(void 0,void 0,o[2],o[1],void 0,c[n]))}return b},parseOpera10:function(m){for(var a=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,c=m.stacktrace.split("\n"),b=[],n=0,l=c.length;l>n;n+=2){var o=a.exec(c[n]);o&&b.push(new e(o[3]||void 0,void 0,o[2],o[1],void 0,c[n]))}return b},parseOpera11:function(a){return a.stack.split("\n").filter(function(b){return !!b.match(f)&&!b.match(/^Error created at/)},this).map(function(o){var b,m=o.split("@"),c=this.extractLocation(m.pop()),p=m.shift()||"",n=p.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;p.match(/\(([^\)]*)\)/)&&(b=p.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var q=void 0===b||"[arguments not available]"===b?void 0:b.split(",");return new e(n,q,c[0],c[1],c[2],o)},this)}}}),function(c,e){"function"==typeof define&&define.amd?define("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],e):"object"==typeof exports?module.exports=e(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps")):c.StackTrace=e(c.ErrorStackParser,c.StackGenerator,c.StackTraceGPS)}(this,function(l,e,j){function m(b,c){var a={};return[b,c].forEach(function(f){for(var g in f){f.hasOwnProperty(g)&&(a[g]=f[g])}return a}),a}function k(a){return a.stack||a["opera#sourceloc"]}var h={filter:function(a){return -1===(a.functionName||"").indexOf("StackTrace$$")&&-1===(a.functionName||"").indexOf("ErrorStackParser$$")&&-1===(a.functionName||"").indexOf("StackTraceGPS$$")&&-1===(a.functionName||"").indexOf("StackGenerator$$")}};return{get:function(a){try{throw new Error}catch(b){return k(b)?this.fromError(b,a):this.generateArtificially(a)}},fromError:function(b,a){return a=m(h,a),new Promise(function(c){var f=l.parse(b);"function"==typeof a.filter&&(f=f.filter(a.filter)),c(Promise.all(f.map(function(g){return new Promise(function(o){function n(p){o(g)}new j(a).pinpoint(g).then(o,n)["catch"](n)})})))}.bind(this))},generateArtificially:function(b){b=m(h,b);var a=e.backtrace(b);return"function"==typeof b.filter&&(a=a.filter(b.filter)),Promise.resolve(a)},instrument:function(b,f,a,c){if("function"!=typeof b){throw new Error("Cannot instrument non-function object")}if("function"==typeof b.__stacktraceOriginalFn){return b}var g=function(){try{this.get().then(f,a)["catch"](a),b.apply(c||this,arguments)}catch(n){throw k(n)&&this.fromError(n).then(f,a)["catch"](a),n}}.bind(this);return g.__stacktraceOriginalFn=b,g},deinstrument:function(a){if("function"!=typeof a){throw new Error("Cannot de-instrument non-function object")}return"function"==typeof a.__stacktraceOriginalFn?a.__stacktraceOriginalFn:a},report:function(a,b){return new Promise(function(c,g){var f=new XMLHttpRequest;f.onerror=g,f.onreadystatechange=function(){4===f.readyState&&(f.status>=200&&f.status<400?c(f.responseText):g(new Error("POST to "+b+" failed with status: "+f.status)))},f.open("post",b),f.setRequestHeader("Content-Type","application/json"),f.send({stack:a})})}}});!function(){var r=function(){this.init()};r.prototype={init:function(){var b=this||t;return b._codecs={},b._howls=[],b._muted=!1,b._volume=1,b._canPlayEvent="canplaythrough",b._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,b.masterGain=null,b.noAudio=!1,b.usingWebAudio=!0,b.autoSuspend=!0,b.ctx=null,b.mobileAutoEnable=!0,b._setup(),b},volume:function(f){var b=this||t;if(f=parseFloat(f),b.ctx||n(),"undefined"!=typeof f&&f>=0&&f<=1){if(b._volume=f,b._muted){return b}b.usingWebAudio&&(b.masterGain.gain.value=f);for(var j=0;j<b._howls.length;j++){if(!b._howls[j]._webAudio){for(var g=b._howls[j]._getSoundIds(),c=0;c<g.length;c++){var h=b._howls[j]._soundById(g[c]);h&&h._node&&(h._node.volume=h._volume*f)}}}return b}return b._volume},mute:function(f){var b=this||t;b.ctx||n(),b._muted=f,b.usingWebAudio&&(b.masterGain.gain.value=f?0:b._volume);for(var j=0;j<b._howls.length;j++){if(!b._howls[j]._webAudio){for(var g=b._howls[j]._getSoundIds(),c=0;c<g.length;c++){var h=b._howls[j]._soundById(g[c]);h&&h._node&&(h._node.muted=!!f||h._muted)}}}return b},unload:function(){for(var b=this||t,c=b._howls.length-1;c>=0;c--){b._howls[c].unload()}return b.usingWebAudio&&"undefined"!=typeof b.ctx.close&&(b.ctx.close(),b.ctx=null,n()),b},codecs:function(b){return(this||t)._codecs[b]},_setup:function(){var b=this||t;return b.state=b.ctx?b.ctx.state||"running":"running",b._autoSuspend(),b.noAudio||b._setupCodecs(),b},_setupCodecs:function(){var h=this||t,f="undefined"!=typeof Audio?new Audio:null;if(!f||"function"!=typeof f.canPlayType){return h}var g=f.canPlayType("audio/mpeg;").replace(/^no$/,""),c=h._navigator&&h._navigator.userAgent.match(/OPR\/([0-6].)/g),b=c&&parseInt(c[0].split("/")[1],10)<33;return h._codecs={mp3:!(b||!g&&!f.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!g,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!f.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},h},_enableMobileAudio:function(){var c=this||t,g=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(c._navigator&&c._navigator.userAgent),b=!!("ontouchend" in window||c._navigator&&c._navigator.maxTouchPoints>0||c._navigator&&c._navigator.msMaxTouchPoints>0);if(!c._mobileEnabled&&c.ctx&&(g||b)){c._mobileEnabled=!1,c._mobileUnloaded||44100===c.ctx.sampleRate||(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var f=function(){var h=c.ctx.createBufferSource();h.buffer=c._scratchBuffer,h.connect(c.ctx.destination),"undefined"==typeof h.start?h.noteOn(0):h.start(0),h.onended=function(){h.disconnect(0),c._mobileEnabled=!0,c.mobileAutoEnable=!1,document.removeEventListener("touchend",f,!0)}};return document.addEventListener("touchend",f,!0),c}},_autoSuspend:function(){var f=this;if(f.autoSuspend&&f.ctx&&"undefined"!=typeof f.ctx.suspend&&t.usingWebAudio){for(var c=0;c<f._howls.length;c++){if(f._howls[c]._webAudio){for(var b=0;b<f._howls[c]._sounds.length;b++){if(!f._howls[c]._sounds[b]._paused){return f}}}}return f._suspendTimer&&clearTimeout(f._suspendTimer),f._suspendTimer=setTimeout(function(){f.autoSuspend&&(f._suspendTimer=null,f.state="suspending",f.ctx.suspend().then(function(){f.state="suspended",f._resumeAfterSuspend&&(delete f._resumeAfterSuspend,f._autoResume())}))},30000),f}},_autoResume:function(){var b=this;if(b.ctx&&"undefined"!=typeof b.ctx.resume&&t.usingWebAudio){return"running"===b.state&&b._suspendTimer?(clearTimeout(b._suspendTimer),b._suspendTimer=null):"suspended"===b.state?(b.state="resuming",b.ctx.resume().then(function(){b.state="running"}),b._suspendTimer&&(clearTimeout(b._suspendTimer),b._suspendTimer=null)):"suspending"===b.state&&(b._resumeAfterSuspend=!0),b}}};var t=new r,u=function(b){var c=this;return b.src&&0!==b.src.length?void c.init(b):void console.error("An array of source files must be passed with any new Howl.")};u.prototype={init:function(b){var c=this;return t.ctx||n(),c._autoplay=b.autoplay||!1,c._format="string"!=typeof b.format?b.format:[b.format],c._html5=b.html5||!1,c._muted=b.mute||!1,c._loop=b.loop||!1,c._pool=b.pool||5,c._preload="boolean"!=typeof b.preload||b.preload,c._rate=b.rate||1,c._sprite=b.sprite||{},c._src="string"!=typeof b.src?b.src:[b.src],c._volume=void 0!==b.volume?b.volume:1,c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._onend=b.onend?[{fn:b.onend}]:[],c._onfade=b.onfade?[{fn:b.onfade}]:[],c._onload=b.onload?[{fn:b.onload}]:[],c._onloaderror=b.onloaderror?[{fn:b.onloaderror}]:[],c._onpause=b.onpause?[{fn:b.onpause}]:[],c._onplay=b.onplay?[{fn:b.onplay}]:[],c._onstop=b.onstop?[{fn:b.onstop}]:[],c._onmute=b.onmute?[{fn:b.onmute}]:[],c._onvolume=b.onvolume?[{fn:b.onvolume}]:[],c._onrate=b.onrate?[{fn:b.onrate}]:[],c._onseek=b.onseek?[{fn:b.onseek}]:[],c._webAudio=t.usingWebAudio&&!c._html5,"undefined"!=typeof t.ctx&&t.ctx&&t.mobileAutoEnable&&t._enableMobileAudio(),t._howls.push(c),c._preload&&c.load(),c},load:function(){var g=this,c=null;if(t.noAudio){return void g._emit("loaderror",null,"No audio support.")}"string"==typeof g._src&&(g._src=[g._src]);for(var h=0;h<g._src.length;h++){var b,f;if(g._format&&g._format[h]){b=g._format[h]}else{if(f=g._src[h],"string"!=typeof f){g._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}b=/^data:audio\/([^;,]+);/i.exec(f),b||(b=/\.([^.]+)$/.exec(f.split("?",1)[0])),b&&(b=b[1].toLowerCase())}if(t.codecs(b)){c=g._src[h];break}}return c?(g._src=c,g._state="loading","https:"===window.location.protocol&&"http:"===c.slice(0,5)&&(g._html5=!0,g._webAudio=!1),new a(g),g._webAudio&&e(g),g):void g._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(h,J){var K=this,j=null;if("number"==typeof h){j=h,h=null}else{if("string"==typeof h&&"loaded"===K._state&&!K._sprite[h]){return null}if("undefined"==typeof h){h="__default";for(var L=0,b=0;b<K._sounds.length;b++){K._sounds[b]._paused&&!K._sounds[b]._ended&&(L++,j=K._sounds[b]._id)}1===L?h=null:j=null}}var g=j?K._soundById(j):K._inactiveSound();if(!g){return null}if(j&&!h&&(h=g._sprite||"__default"),"loaded"!==K._state&&!K._sprite[h]){return K._queue.push({event:"play",action:function(){K.play(K._soundById(g._id)?g._id:void 0)}}),g._id}if(j&&!g._paused){return J||setTimeout(function(){K._emit("play",g._id)},0),g._id}K._webAudio&&t._autoResume();var l=g._seek>0?g._seek:K._sprite[h][0]/1000,M=(K._sprite[h][0]+K._sprite[h][1])/1000-l,I=1000*M/Math.abs(g._rate);g._paused=!1,g._ended=!1,g._sprite=h,g._seek=l,g._start=K._sprite[h][0]/1000,g._stop=(K._sprite[h][0]+K._sprite[h][1])/1000,g._loop=!(!g._loop&&!K._sprite[h][2]);var m=g._node;if(K._webAudio){var k=function(){K._refreshBuffer(g);var w=g._muted||K._muted?0:g._volume;m.gain.setValueAtTime(w,t.ctx.currentTime),g._playStart=t.ctx.currentTime,"undefined"==typeof m.bufferSource.start?g._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,M):g._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,M),I!==1/0&&(K._endTimers[g._id]=setTimeout(K._ended.bind(K,g),I)),J||setTimeout(function(){K._emit("play",g._id)},0)};"loaded"===K._state?k():(K.once("load",k,g._id),K._clearTimer(g._id))}else{var f=function(){m.currentTime=l,m.muted=g._muted||K._muted||t._muted||m.muted,m.volume=g._volume*t.volume(),m.playbackRate=g._rate,setTimeout(function(){m.play(),I!==1/0&&(K._endTimers[g._id]=setTimeout(K._ended.bind(K,g),I)),J||K._emit("play",g._id)},0)},c="loaded"===K._state&&(window&&window.ejecta||!m.readyState&&t._navigator.isCocoonJS);if(4===m.readyState||c){f()}else{var p=function(){f(),m.removeEventListener(t._canPlayEvent,p,!1)};m.addEventListener(t._canPlayEvent,p,!1),K._clearTimer(g._id)}}return g._id},pause:function(c){var f=this;if("loaded"!==f._state){return f._queue.push({event:"pause",action:function(){f.pause(c)}}),f}for(var g=f._getSoundIds(c),b=0;b<g.length;b++){f._clearTimer(g[b]);var h=f._soundById(g[b]);if(h&&!h._paused){if(h._seek=f.seek(g[b]),h._rateSeek=0,h._paused=!0,f._stopFade(g[b]),h._node){if(f._webAudio){if(!h._node.bufferSource){return f}"undefined"==typeof h._node.bufferSource.stop?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),f._cleanBuffer(h._node)}else{isNaN(h._node.duration)&&h._node.duration!==1/0||h._node.pause()}}arguments[1]||f._emit("pause",h._id)}}return f},stop:function(h,c){var g=this;if("loaded"!==g._state){return g._queue.push({event:"stop",action:function(){g.stop(h)}}),g}for(var j=g._getSoundIds(h),f=0;f<j.length;f++){g._clearTimer(j[f]);var b=g._soundById(j[f]);if(b&&!b._paused&&(b._seek=b._start||0,b._rateSeek=0,b._paused=!0,b._ended=!0,g._stopFade(j[f]),b._node)){if(g._webAudio){if(!b._node.bufferSource){return g}"undefined"==typeof b._node.bufferSource.stop?b._node.bufferSource.noteOff(0):b._node.bufferSource.stop(0),g._cleanBuffer(b._node)}else{isNaN(b._node.duration)&&b._node.duration!==1/0||(b._node.currentTime=b._start||0,b._node.pause())}}b&&!c&&g._emit("stop",b._id)}return g},mute:function(f,b){var j=this;if("loaded"!==j._state){return j._queue.push({event:"mute",action:function(){j.mute(f,b)}}),j}if("undefined"==typeof b){if("boolean"!=typeof f){return j._muted}j._muted=f}for(var g=j._getSoundIds(b),c=0;c<g.length;c++){var h=j._soundById(g[c]);h&&(h._muted=f,j._webAudio&&h._node?h._node.gain.setValueAtTime(f?0:h._volume,t.ctx.currentTime):h._node&&(h._node.muted=!!t._muted||f),j._emit("mute",h._id))}return j},volume:function(){var b,j,f=this,c=arguments;if(0===c.length){return f._volume}if(1===c.length){var h=f._getSoundIds(),l=h.indexOf(c[0]);l>=0?j=parseInt(c[0],10):b=parseFloat(c[0])}else{c.length>=2&&(b=parseFloat(c[0]),j=parseInt(c[1],10))}var k;if(!("undefined"!=typeof b&&b>=0&&b<=1)){return k=j?f._soundById(j):f._sounds[0],k?k._volume:0}if("loaded"!==f._state){return f._queue.push({event:"volume",action:function(){f.volume.apply(f,c)}}),f}"undefined"==typeof j&&(f._volume=b),j=f._getSoundIds(j);for(var g=0;g<j.length;g++){k=f._soundById(j[g]),k&&(k._volume=b,c[2]||f._stopFade(j[g]),f._webAudio&&k._node&&!k._muted?k._node.gain.setValueAtTime(b,t.ctx.currentTime):k._node&&!k._muted&&(k._node.volume=b*t.volume()),f._emit("volume",k._id))}return f},fade:function(h,J,K,j){var L=this,b=Math.abs(h-J),g=h>J?"out":"in",l=b/0.01,M=K/l;if("loaded"!==L._state){return L._queue.push({event:"fade",action:function(){L.fade(h,J,K,j)}}),L}L.volume(h,j);for(var I=L._getSoundIds(j),m=0;m<I.length;m++){var k=L._soundById(I[m]);if(k){if(j||L._stopFade(I[m]),L._webAudio&&!k._muted){var f=t.ctx.currentTime,c=f+K/1000;k._volume=h,k._node.gain.setValueAtTime(h,f),k._node.gain.linearRampToValueAtTime(J,c)}var p=h;k._interval=setInterval(function(w,x){p+="in"===g?0.01:-0.01,p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,L._webAudio?("undefined"==typeof j&&(L._volume=p),x._volume=p):L.volume(p,w,!0),p===J&&(clearInterval(x._interval),x._interval=null,L.volume(p,w),L._emit("fade",w))}.bind(L,I[m],k),M)}}return L},_stopFade:function(f){var c=this,b=c._soundById(f);return b&&b._interval&&(c._webAudio&&b._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(b._interval),b._interval=null,c._emit("fade",f)),c},loop:function(){var f,b,c,j=this,h=arguments;if(0===h.length){return j._loop}if(1===h.length){if("boolean"!=typeof h[0]){return c=j._soundById(parseInt(h[0],10)),!!c&&c._loop}f=h[0],j._loop=f}else{2===h.length&&(f=h[0],b=parseInt(h[1],10))}for(var g=j._getSoundIds(b),k=0;k<g.length;k++){c=j._soundById(g[k]),c&&(c._loop=f,j._webAudio&&c._node&&c._node.bufferSource&&(c._node.bufferSource.loop=f))}return j},rate:function(){var m,f,c=this,j=arguments;if(0===j.length){f=c._sounds[0]._id}else{if(1===j.length){var g=c._getSoundIds(),k=g.indexOf(j[0]);k>=0?f=parseInt(j[0],10):m=parseFloat(j[0])}else{2===j.length&&(m=parseFloat(j[0]),f=parseInt(j[1],10))}}var l;if("number"!=typeof m){return l=c._soundById(f),l?l._rate:c._rate}if("loaded"!==c._state){return c._queue.push({event:"rate",action:function(){c.rate.apply(c,j)}}),c}"undefined"==typeof f&&(c._rate=m),f=c._getSoundIds(f);for(var p=0;p<f.length;p++){if(l=c._soundById(f[p])){l._rateSeek=c.seek(f[p]),l._playStart=c._webAudio?t.ctx.currentTime:l._playStart,l._rate=m,c._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.value=m:l._node&&(l._node.playbackRate=m);var h=c.seek(f[p]),b=(c._sprite[l._sprite][0]+c._sprite[l._sprite][1])/1000-h,E=1000*b/Math.abs(l._rate);!c._endTimers[f[p]]&&l._paused||(c._clearTimer(f[p]),c._endTimers[f[p]]=setTimeout(c._ended.bind(c,l),E)),c._emit("rate",l._id)}}return c},seek:function(){var m,c,f=this,h=arguments;if(0===h.length){c=f._sounds[0]._id}else{if(1===h.length){var g=f._getSoundIds(),k=g.indexOf(h[0]);k>=0?c=parseInt(h[0],10):(c=f._sounds[0]._id,m=parseFloat(h[0]))}else{2===h.length&&(m=parseFloat(h[0]),c=parseInt(h[1],10))}}if("undefined"==typeof c){return f}if("loaded"!==f._state){return f._queue.push({event:"seek",action:function(){f.seek.apply(f,h)}}),f}var l=f._soundById(c);if(l){if(!("number"==typeof m&&m>=0)){if(f._webAudio){var p=f.playing(c)?t.ctx.currentTime-l._playStart:0,j=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(j+p*Math.abs(l._rate))}return l._node.currentTime}var b=f.playing(c);b&&f.pause(c,!0),l._seek=m,l._ended=!1,f._clearTimer(c),b&&f.play(c,!0),!f._webAudio&&l._node&&(l._node.currentTime=m),f._emit("seek",c)}return f},playing:function(g){var f=this;if("number"==typeof g){var c=f._soundById(g);return !!c&&!c._paused}for(var b=0;b<f._sounds.length;b++){if(!f._sounds[b]._paused){return !0}}return !1},duration:function(g){var f=this,c=f._duration,b=f._soundById(g);return b&&(c=f._sprite[b._sprite][1]/1000),c},state:function(){return this._state},unload:function(){for(var f=this,c=f._sounds,h=0;h<c.length;h++){c[h]._paused||(f.stop(c[h]._id),f._emit("end",c[h]._id)),f._webAudio||(c[h]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",c[h]._node.removeEventListener("error",c[h]._errorFn,!1),c[h]._node.removeEventListener(t._canPlayEvent,c[h]._loadFn,!1)),delete c[h]._node,f._clearTimer(c[h]._id);var b=t._howls.indexOf(f);b>=0&&t._howls.splice(b,1)}var g=!0;for(h=0;h<t._howls.length;h++){if(t._howls[h]._src===f._src){g=!1;break}}return v&&g&&delete v[f._src],f._state="unloaded",f._sounds=[],f=null,null},on:function(h,c,g,j){var f=this,b=f["_on"+h];return"function"==typeof c&&b.push(j?{id:g,fn:c,once:j}:{id:g,fn:c}),f},off:function(f,b,c){var j=this,h=j["_on"+f],g=0;if(b){for(g=0;g<h.length;g++){if(b===h[g].fn&&c===h[g].id){h.splice(g,1);break}}}else{if(f){j["_on"+f]=[]}else{var k=Object.keys(j);for(g=0;g<k.length;g++){0===k[g].indexOf("_on")&&Array.isArray(j[k[g]])&&(j[k[g]]=[])}}}return j},once:function(g,f,c){var b=this;return b.on(g,f,c,1),b},_emit:function(h,c,g){for(var j=this,f=j["_on"+h],b=f.length-1;b>=0;b--){f[b].id&&f[b].id!==c&&"load"!==h||(setTimeout(function(k){k.call(this,c,g)}.bind(j,f[b].fn),0),f[b].once&&j.off(h,f[b].fn,f[b].id))}return j},_loadQueue:function(){var b=this;if(b._queue.length>0){var c=b._queue[0];b.once(c.event,function(){b._queue.shift(),b._loadQueue()}),c.action()}return b},_ended:function(h){var f=this,g=h._sprite,c=!(!h._loop&&!f._sprite[g][2]);if(f._emit("end",h._id),!f._webAudio&&c&&f.stop(h._id,!0).play(h._id),f._webAudio&&c){f._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=t.ctx.currentTime;var b=1000*(h._stop-h._start)/Math.abs(h._rate);f._endTimers[h._id]=setTimeout(f._ended.bind(f,h),b)}return f._webAudio&&!c&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,f._clearTimer(h._id),f._cleanBuffer(h._node),t._autoSuspend()),f._webAudio||c||f.stop(h._id),f},_clearTimer:function(b){var c=this;return c._endTimers[b]&&(clearTimeout(c._endTimers[b]),delete c._endTimers[b]),c},_soundById:function(b){for(var c=this,f=0;f<c._sounds.length;f++){if(b===c._sounds[f]._id){return c._sounds[f]}}return null},_inactiveSound:function(){var b=this;b._drain();for(var c=0;c<b._sounds.length;c++){if(b._sounds[c]._ended){return b._sounds[c].reset()}}return new a(b)},_drain:function(){var g=this,f=g._pool,c=0,b=0;if(!(g._sounds.length<f)){for(b=0;b<g._sounds.length;b++){g._sounds[b]._ended&&c++}for(b=g._sounds.length-1;b>=0;b--){if(c<=f){return}g._sounds[b]._ended&&(g._webAudio&&g._sounds[b]._node&&g._sounds[b]._node.disconnect(0),g._sounds.splice(b,1),c--)}}},_getSoundIds:function(g){var f=this;if("undefined"==typeof g){for(var c=[],b=0;b<f._sounds.length;b++){c.push(f._sounds[b]._id)}return c}return[g]},_refreshBuffer:function(b){var c=this;return b._node.bufferSource=t.ctx.createBufferSource(),b._node.bufferSource.buffer=v[c._src],b._panner?b._node.bufferSource.connect(b._panner):b._node.bufferSource.connect(b._node),b._node.bufferSource.loop=b._loop,b._loop&&(b._node.bufferSource.loopStart=b._start||0,b._node.bufferSource.loopEnd=b._stop),b._node.bufferSource.playbackRate.value=b._rate,c},_cleanBuffer:function(b){var c=this;if(c._scratchBuffer){b.bufferSource.onended=null,b.bufferSource.disconnect(0);try{b.bufferSource.buffer=c._scratchBuffer}catch(b){}}return b.bufferSource=null,c}};var a=function(b){this._parent=b,this.init()};a.prototype={init:function(){var b=this,c=b._parent;return b._muted=c._muted,b._loop=c._loop,b._volume=c._volume,b._muted=c._muted,b._rate=c._rate,b._seek=0,b._paused=!0,b._ended=!0,b._sprite="__default",b._id=Math.round(Date.now()*Math.random()),c._sounds.push(b),b.create(),b},create:function(){var f=this,c=f._parent,b=t._muted||f._muted||f._parent._muted?0:f._volume;return c._webAudio?(f._node="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),f._node.gain.setValueAtTime(b,t.ctx.currentTime),f._node.paused=!0,f._node.connect(t.masterGain)):(f._node=new Audio,f._errorFn=f._errorListener.bind(f),f._node.addEventListener("error",f._errorFn,!1),f._loadFn=f._loadListener.bind(f),f._node.addEventListener(t._canPlayEvent,f._loadFn,!1),f._node.src=c._src,f._node.preload="auto",f._node.volume=b*t.volume(),f._node.load()),f},reset:function(){var b=this,c=b._parent;return b._muted=c._muted,b._loop=c._loop,b._volume=c._volume,b._muted=c._muted,b._rate=c._rate,b._seek=0,b._rateSeek=0,b._paused=!0,b._ended=!0,b._sprite="__default",b._id=Math.round(Date.now()*Math.random()),b},_errorListener:function(){var b=this;b._node.error&&4===b._node.error.code&&(t.noAudio=!0),b._parent._emit("loaderror",b._id,b._node.error?b._node.error.code:0),b._node.removeEventListener("error",b._errorListener,!1)},_loadListener:function(){var b=this,c=b._parent;c._duration=Math.ceil(10*b._node.duration)/10,0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1000*c._duration]}),"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue()),c._autoplay&&c.play(),b._node.removeEventListener(t._canPlayEvent,b._loadFn,!1)}};var v={},e=function(h){var f=h._src;if(v[f]){return h._duration=v[f].duration,void s(h)}if(/^data:[^;]+;base64,/.test(f)){for(var g=atob(f.split(",")[1]),c=new Uint8Array(g.length),j=0;j<g.length;++j){c[j]=g.charCodeAt(j)}q(c.buffer,h)}else{var b=new XMLHttpRequest;b.open("GET",f,!0),b.responseType="arraybuffer",b.onload=function(){var k=(b.status+"")[0];return"0"!==k&&"2"!==k&&"3"!==k?void h._emit("loaderror",null,"Failed loading audio file with status: "+b.status+"."):void q(b.response,h)},b.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete v[f],h.load())},o(b)}},o=function(b){try{b.send()}catch(c){b.onerror()}},q=function(b,c){t.ctx.decodeAudioData(b,function(f){f&&c._sounds.length>0&&(v[c._src]=f,s(c,f))},function(){c._emit("loaderror",null,"Decoding audio data failed.")})},s=function(b,c){c&&!b._duration&&(b._duration=c.duration),0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,1000*b._duration]}),"loaded"!==b._state&&(b._state="loaded",b._emit("load"),b._loadQueue()),b._autoplay&&b.play()},n=function(){t.noAudio=!1;try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(h){t.usingWebAudio=!1}if(!t.usingWebAudio){if("undefined"!=typeof Audio){try{var h=new Audio;"undefined"==typeof h.oncanplaythrough&&(t._canPlayEvent="canplay")}catch(h){t.noAudio=!0}}else{t.noAudio=!0}}try{var h=new Audio;h.muted&&(t.noAudio=!0)}catch(h){}var f=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),g=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=g?parseInt(g[1],10):null;if(f&&c&&c<9){var b=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());(t._navigator&&t._navigator.standalone&&!b||t._navigator&&!t._navigator.standalone&&!b)&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain="undefined"==typeof t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.value=1,t.masterGain.connect(t.ctx.destination)),t._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:t,Howl:u}}),"undefined"!=typeof exports&&(exports.Howler=t,exports.Howl=u),"undefined"!=typeof window?(window.HowlerGlobal=r,window.Howler=t,window.Howl=u,window.Sound=a):"undefined"!=typeof global&&(global.HowlerGlobal=r,global.Howler=t,global.Howl=u,global.Sound=a)}();!function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(f){var e=this;if(!e.ctx||!e.ctx.listener){return e}for(var a=e._howls.length-1;a>=0;a--){e._howls[a].stereo(f)}return e},HowlerGlobal.prototype.pos=function(h,e,a){var g=this;return g.ctx&&g.ctx.listener?(e="number"!=typeof e?g._pos[1]:e,a="number"!=typeof a?g._pos[2]:a,"number"!=typeof h?g._pos:(g._pos=[h,e,a],g.ctx.listener.setPosition(g._pos[0],g._pos[1],g._pos[2]),g)):g},HowlerGlobal.prototype.orientation=function(m,e,p,l,o,q){var a=this;if(!a.ctx||!a.ctx.listener){return a}var n=a._orientation;return e="number"!=typeof e?n[1]:e,p="number"!=typeof p?n[2]:p,l="number"!=typeof l?n[3]:l,o="number"!=typeof o?n[4]:o,q="number"!=typeof q?n[5]:q,"number"!=typeof m?n:(a._orientation=[m,e,p,l,o,q],a.ctx.listener.setOrientation(m,e,p,l,o,q),a)},Howl.prototype.init=function(a){return function(e){var f=this;return f._orientation=e.orientation||[1,0,0],f._stereo=e.stereo||null,f._pos=e.pos||null,f._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:0,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:"inverse",maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:10000,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:"HRTF",refDistance:"undefined"!=typeof e.refDistance?e.refDistance:1,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:1},f._onstereo=e.onstereo?[{fn:e.onstereo}]:[],f._onpos=e.onpos?[{fn:e.onpos}]:[],f._onorientation=e.onorientation?[{fn:e.onorientation}]:[],a.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(j,n){var k=this;if(!k._webAudio){return k}if("loaded"!==k._state){return k._queue.push({event:"stereo",action:function(){k.stereo(j,n)}}),k}var m="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof n){if("number"!=typeof j){return k._stereo}k._stereo=j,k._pos=[j,0,0]}for(var o=k._getSoundIds(n),a=0;a<o.length;a++){var l=k._soundById(o[a]);if(l){if("number"!=typeof j){return l._stereo}l._stereo=j,l._pos=[j,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",l._panner&&l._panner.pan||b(l,m),"spatial"===m?l._panner.setPosition(j,0,0):l._panner.pan.value=j),k._emit("stereo",l._id)}}return k},Howl.prototype.pos=function(f,p,l,o){var q=this;if(!q._webAudio){return q}if("loaded"!==q._state){return q._queue.push({event:"pos",action:function(){q.pos(f,p,l,o)}}),q}if(p="number"!=typeof p?0:p,l="number"!=typeof l?-0.5:l,"undefined"==typeof o){if("number"!=typeof f){return q._pos}q._pos=[f,p,l]}for(var a=q._getSoundIds(o),m=0;m<a.length;m++){var n=q._soundById(a[m]);if(n){if("number"!=typeof f){return n._pos}n._pos=[f,p,l],n._node&&(n._panner&&!n._panner.pan||b(n,"spatial"),n._panner.setPosition(f,p,l)),q._emit("pos",n._id)}}return q},Howl.prototype.orientation=function(f,p,l,o){var q=this;if(!q._webAudio){return q}if("loaded"!==q._state){return q._queue.push({event:"orientation",action:function(){q.orientation(f,p,l,o)}}),q}if(p="number"!=typeof p?q._orientation[1]:p,l="number"!=typeof l?q._orientation[2]:l,"undefined"==typeof o){if("number"!=typeof f){return q._orientation}q._orientation=[f,p,l]}for(var a=q._getSoundIds(o),m=0;m<a.length;m++){var n=q._soundById(a[m]);if(n){if("number"!=typeof f){return n._orientation}n._orientation=[f,p,l],n._node&&(n._panner||(n._pos||(n._pos=q._pos||[0,0,-0.5]),b(n,"spatial")),n._panner.setOrientation(f,p,l)),q._emit("orientation",n._id)}}return q},Howl.prototype.pannerAttr=function(){var p,f,q,s=this,o=arguments;if(!s._webAudio){return s}if(0===o.length){return s._pannerAttr}if(1===o.length){if("object"!=typeof o[0]){return q=s._soundById(parseInt(o[0],10)),q?q._pannerAttr:s._pannerAttr}p=o[0],"undefined"==typeof f&&(s._pannerAttr={coneInnerAngle:"undefined"!=typeof p.coneInnerAngle?p.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:"undefined"!=typeof p.coneOuterAngle?p.coneOuterAngle:s._coneOuterAngle,coneOuterGain:"undefined"!=typeof p.coneOuterGain?p.coneOuterGain:s._coneOuterGain,distanceModel:"undefined"!=typeof p.distanceModel?p.distanceModel:s._distanceModel,maxDistance:"undefined"!=typeof p.maxDistance?p.maxDistance:s._maxDistance,panningModel:"undefined"!=typeof p.panningModel?p.panningModel:s._panningModel,refDistance:"undefined"!=typeof p.refDistance?p.refDistance:s._refDistance,rolloffFactor:"undefined"!=typeof p.rolloffFactor?p.rolloffFactor:s._rolloffFactor})}else{2===o.length&&(p=o[0],f=parseInt(o[1],10))}for(var m=s._getSoundIds(f),r=0;r<m.length;r++){if(q=s._soundById(m[r])){var n=q._pannerAttr;n={coneInnerAngle:"undefined"!=typeof p.coneInnerAngle?p.coneInnerAngle:n.coneInnerAngle,coneOuterAngle:"undefined"!=typeof p.coneOuterAngle?p.coneOuterAngle:n.coneOuterAngle,coneOuterGain:"undefined"!=typeof p.coneOuterGain?p.coneOuterGain:n.coneOuterGain,distanceModel:"undefined"!=typeof p.distanceModel?p.distanceModel:n.distanceModel,maxDistance:"undefined"!=typeof p.maxDistance?p.maxDistance:n.maxDistance,panningModel:"undefined"!=typeof p.panningModel?p.panningModel:n.panningModel,refDistance:"undefined"!=typeof p.refDistance?p.refDistance:n.refDistance,rolloffFactor:"undefined"!=typeof p.rolloffFactor?p.rolloffFactor:n.rolloffFactor};var a=q._panner;a?(a.coneInnerAngle=n.coneInnerAngle,a.coneOuterAngle=n.coneOuterAngle,a.coneOuterGain=n.coneOuterGain,a.distanceModel=n.distanceModel,a.maxDistance=n.maxDistance,a.panningModel=n.panningModel,a.refDistance=n.refDistance,a.rolloffFactor=n.rolloffFactor):(q._pos||(q._pos=s._pos||[0,0,-0.5]),b(q,"spatial"))}}return s},Sound.prototype.init=function(a){return function(){var e=this,f=e._parent;e._orientation=f._orientation,e._stereo=f._stereo,e._pos=f._pos,e._pannerAttr=f._pannerAttr,a.call(this),e._stereo?f.stereo(e._stereo):e._pos&&f.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(a){return function(){var e=this,f=e._parent;return e._orientation=f._orientation,e._pos=f._pos,e._pannerAttr=f._pannerAttr,a.call(this)}}(Sound.prototype.reset);var b=function(a,e){e=e||"spatial","spatial"===e?(a._panner=Howler.ctx.createPanner(),a._panner.coneInnerAngle=a._pannerAttr.coneInnerAngle,a._panner.coneOuterAngle=a._pannerAttr.coneOuterAngle,a._panner.coneOuterGain=a._pannerAttr.coneOuterGain,a._panner.distanceModel=a._pannerAttr.distanceModel,a._panner.maxDistance=a._pannerAttr.maxDistance,a._panner.panningModel=a._pannerAttr.panningModel,a._panner.refDistance=a._pannerAttr.refDistance,a._panner.rolloffFactor=a._pannerAttr.rolloffFactor,a._panner.setPosition(a._pos[0],a._pos[1],a._pos[2]),a._panner.setOrientation(a._orientation[0],a._orientation[1],a._orientation[2])):(a._panner=Howler.ctx.createStereoPanner(),a._panner.pan.value=a._stereo),a._panner.connect(a._node),a._paused||a._parent.pause(a._id,!0).play(a._id)}}();(function(a3){function bo(){}function an(m){if(!m||"object"!==typeof m){return !1}var l=aJ(m)||ap;return/object|function/.test(typeof l.Element)?m instanceof l.Element:1===m.nodeType&&"string"===typeof m.nodeName}function bm(l){return l===ap||!(!l||!l.Window)&&l instanceof l.Window}function E(l){return aj(l)&&void 0!==typeof l.length&&bd(l.splice)}function aj(l){return !!l&&"object"===typeof l}function bd(l){return"function"===typeof l}function aW(l){return"number"===typeof l}function a1(l){return"boolean"===typeof l}function aT(l){return"string"===typeof l}function e(l){if(!aT(l)){return !1}aO.querySelector(l);return !0}function ak(m,l){for(var n in l){m[n]=l[n]}return m}function bA(m,l){for(var q in l){var p=!1,n;for(n in a0){if(0===q.indexOf(n)&&a0[n].test(q)){p=!0;break}}p||(m[q]=l[q])}return m}function bq(m,l){m.page=m.page||{};m.page.x=l.page.x;m.page.y=l.page.y;m.client=m.client||{};m.client.x=l.client.x;m.client.y=l.client.y;m.timeStamp=l.timeStamp}function bs(m,l,n){m.page.x=n.page.x-l.page.x;m.page.y=n.page.y-l.page.y;m.client.x=n.client.x-l.client.x;m.client.y=n.client.y-l.client.y;m.timeStamp=(new Date).getTime()-l.timeStamp;l=Math.max(m.timeStamp/1000,0.001);m.page.speed=bv(m.page.x,m.page.y)/l;m.page.vx=m.page.x/l;m.page.vy=m.page.y/l;m.client.speed=bv(m.client.x,m.page.y)/l;m.client.vx=m.client.x/l;m.client.vy=m.client.y/l}function bh(l){return l instanceof ap.Event||bl&&ap.Touch&&l instanceof ap.Touch}function be(m,l,n){n=n||{};m=m||"page";n.x=l[m+"X"];n.y=l[m+"Y"];return n}function ay(m,l){l=l||{};aF&&bh(m)?(be("screen",m,l),l.x+=ap.scrollX,l.y+=ap.scrollY):be("page",m,l);return l}function al(m,l){l=l||{};aF&&bh(m)?be("screen",m,l):be("client",m,l);return l}function aS(l){return aW(l.pointerId)?l.pointerId:l.identifier}function ad(l){return l instanceof a4?l.correspondingUseElement:l}function aJ(l){if(bm(l)){return l}l=l.ownerDocument||l;return l.defaultView||l.parentWindow||ap}function h(l){return(l=l instanceof w?l.getBoundingClientRect():l.getClientRects()[0])&&{left:l.left,right:l.right,top:l.top,bottom:l.bottom,width:l.width||l.right-l.left,height:l.height||l.bottom-l.top}}function aC(m){var l,n=h(m);!az&&n&&(l=(l=aJ(m))||ap,m=l.scrollX||l.document.documentElement.scrollLeft,l=l.scrollY||l.document.documentElement.scrollTop,n.left+=m,n.right+=m,n.top+=l,n.bottom+=l);return n}function bz(m){var l=[];E(m)?(l[0]=m[0],l[1]=m[1]):"touchend"===m.type?1===m.touches.length?(l[0]=m.touches[0],l[1]=m.changedTouches[0]):0===m.touches.length&&(l[0]=m.changedTouches[0],l[1]=m.changedTouches[1]):(l[0]=m.touches[0],l[1]=m.touches[1]);return l}function c(m){for(var l={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},p,n=0;n<m.length;n++){for(p in l){l[p]+=m[n][p]}}for(p in l){l[p]/=m.length}return l}function bp(m){if(m.length||m.touches&&1<m.touches.length){m=bz(m);var l=Math.min(m[0].pageX,m[1].pageX),n=Math.min(m[0].pageY,m[1].pageY);return{x:l,y:n,left:l,top:n,width:Math.max(m[0].pageX,m[1].pageX)-l,height:Math.max(m[0].pageY,m[1].pageY)-n}}}function a7(m,l){l=l||a6.deltaSource;var q=l+"X",p=l+"Y",n=bz(m);return bv(n[0][q]-n[1][q],n[0][p]-n[1][p])}function aB(m,l,p){p=p||a6.deltaSource;var n=p+"X";p+="Y";m=bz(m);n=180*Math.atan((m[0][p]-m[1][p])/(m[0][n]-m[1][n]))/Math.PI;aW(l)&&(l=(n-l)%360,315<l?n-=360+n/360|0:135<l?n-=180+n/360|0:-315>l?n+=360+n/360|0:-135>l&&(n+=180+n/360|0));return n}function a5(m,l){var n=m?m.options.origin:a6.origin;"parent"===n?n=aV(l):"self"===n?n=m.getRect(l):e(n)&&(n=ag(l,n)||{x:0,y:0});bd(n)&&(n=n(m&&l));an(n)&&(n=aC(n));n.x="x" in n?n.x:n.left;n.y="y" in n?n.y:n.top;return n}function bt(m,l,q,p){var n=1-m;return n*n*l+2*n*m*q+m*m*p}function aG(m,l){for(;l;){if(l===m){return !0}l=l.parentNode}return !1}function ag(m,l){for(var n=aV(m);an(n);){if(aN(n,l)){return n}n=aV(n)}return null}function aV(l){if((l=l.parentNode)&&l instanceof a9){for(;(l=l.host)&&l&&l instanceof a9;){}}return l}function ah(m,l){return m._context===l.ownerDocument||aG(m._context,l)}function aE(m,l,n){return(m=m.options.ignoreFrom)&&an(n)?aT(m)?o(n,m,l):an(m)?aG(m,n):!1:!1}function bj(m,l,n){return(m=m.options.allowFrom)?an(n)?aT(m)?o(n,m,l):an(m)?aG(m,n):!1:!1:!0}function bi(m,l){if(!l){return !1}var n=l.options.drag.axis;return"xy"===m||"xy"===n||n===m}function bB(m,l){var n=m.options;/^resize/.test(l)&&(l="resize");return n[l].snap&&n[l].snap.enabled}function br(m,l){var n=m.options;/^resize/.test(l)&&(l="resize");return n[l].restrict&&n[l].restrict.enabled}function aZ(B,A,x){for(var v=B.options,t=v[x.name].max,v=v[x.name].maxPerElement,p=0,r=0,q=0,m=0,z=ao.length;m<z;m++){var l=ao[m],C=l.prepared.name;if(l.interacting()&&(p++,p>=s||l.target===B&&(r+=C===x.name|0,r>=t||l.element===A&&(q++,C!==x.name||q>=v)))){return !1}}return 0<s}function a(){this.prevDropElement=this.prevDropTarget=this.dropElement=this.dropTarget=this.element=this.target=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(bd(Function.prototype.bind)){this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this)}else{var l=this;this.boundInertiaFrame=function(){return l.inertiaFrame()};this.boundSmoothEndFrame=function(){return l.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this.prevEvent=this._curEventTarget=this._eventTarget=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1};this.restrictStatus.snap=this.snapStatus;this.resizing=this.dragging=this.gesturing=this.pointerWasMoved=this.pointerIsDown=!1;this.resizeAxes="xy";this.mouse=!1;ao.push(this)}function aQ(m,l,v){var t=0,r=ao.length,n=/mouse/i.test(m.pointerType||l)||4===m.pointerType,q;m=aS(m);if(/down|start/i.test(l)){for(t=0;t<r;t++){q=ao[t];var p=v;if(q.inertiaStatus.active&&q.target.options[q.prepared.name].inertia.allowResume&&q.mouse===n){for(;p;){if(p===q.element){return q}p=aV(p)}}}}if(n||!bl&&!aA){for(t=0;t<r;t++){if(ao[t].mouse&&!ao[t].inertiaStatus.active){return ao[t]}}for(t=0;t<r;t++){if(ao[t].mouse&&(!/down/.test(l)||!ao[t].inertiaStatus.active)){return q}}q=new a;q.mouse=!0;return q}for(t=0;t<r;t++){if(-1!==am(ao[t].pointerIds,m)){return ao[t]}}if(/up|end|out/i.test(l)){return null}for(t=0;t<r;t++){if(q=ao[t],!(q.prepared.name&&!q.target.options.gesture.enabled||q.interacting()||!n&&q.mouse)){return q}}return new a}function ar(l){return function(m){var t,r=ad(m.path?m.path[0]:m.target),q=ad(m.currentTarget),n;if(bl&&/touch/.test(m.type)){for(y=(new Date).getTime(),n=0;n<m.changedTouches.length;n++){var p=m.changedTouches[n];if(t=aQ(p,m.type,r)){t._updateEventTargets(r,q),t[l](p,m,r,q)}}}else{if(!aA&&/mouse/.test(m.type)){for(n=0;n<ao.length;n++){if(!ao[n].mouse&&ao[n].pointerIsDown){return}}if(500>(new Date).getTime()-y){return}}if(t=aQ(m,m.type,r)){t._updateEventTargets(r,q),t[l](m,m,r,q)}}}}function a2(Q,O,N,M,L,H){var K,J,G=Q.target,r=Q.snapStatus,B=Q.restrictStatus,x=Q.pointers,z=(G&&G.options||a6).deltaSource,q=z+"X",F=z+"Y",D=G?G.options:a6,v=a5(G,L),C="start"===M,A="end"===M;K=C?Q.startCoords:Q.curCoords;L=L||Q.element;J=ak({},K.page);K=ak({},K.client);J.x-=v.x;J.y-=v.y;K.x-=v.x;K.y-=v.y;var t=D[N].snap&&D[N].snap.relativePoints;!bB(G,N)||C&&t&&t.length||(this.snap={range:r.range,locked:r.locked,x:r.snappedX,y:r.snappedY,realX:r.realX,realY:r.realY,dx:r.dx,dy:r.dy},r.locked&&(J.x+=r.dx,J.y+=r.dy,K.x+=r.dx,K.y+=r.dy));!br(G,N)||C&&D[N].restrict.elementRect||!B.restricted||(J.x+=B.dx,J.y+=B.dy,K.x+=B.dx,K.y+=B.dy,this.restrict={dx:B.dx,dy:B.dy});this.pageX=J.x;this.pageY=J.y;this.clientX=K.x;this.clientY=K.y;this.x0=Q.startCoords.page.x-v.x;this.y0=Q.startCoords.page.y-v.y;this.clientX0=Q.startCoords.client.x-v.x;this.clientY0=Q.startCoords.client.y-v.y;this.ctrlKey=O.ctrlKey;this.altKey=O.altKey;this.shiftKey=O.shiftKey;this.metaKey=O.metaKey;this.button=O.button;this.buttons=O.buttons;this.target=L;this.t0=Q.downTimes[0];this.type=N+(M||"");this.interaction=Q;this.interactable=G;L=Q.inertiaStatus;L.active&&(this.detail="inertia");H&&(this.relatedTarget=H);A?"client"===z?(this.dx=K.x-Q.startCoords.client.x,this.dy=K.y-Q.startCoords.client.y):(this.dx=J.x-Q.startCoords.page.x,this.dy=J.y-Q.startCoords.page.y):C?this.dy=this.dx=0:"inertiastart"===M?(this.dx=Q.prevEvent.dx,this.dy=Q.prevEvent.dy):"client"===z?(this.dx=K.x-Q.prevEvent.clientX,this.dy=K.y-Q.prevEvent.clientY):(this.dx=J.x-Q.prevEvent.pageX,this.dy=J.y-Q.prevEvent.pageY);Q.prevEvent&&"inertia"===Q.prevEvent.detail&&!L.active&&D[N].inertia&&D[N].inertia.zeroResumeDelta&&(L.resumeDx+=this.dx,L.resumeDy+=this.dy,this.dx=this.dy=0);"resize"===N&&Q.resizeAxes?D.resize.square?("y"===Q.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=Q.resizeAxes,"x"===Q.resizeAxes?this.dy=0:"y"===Q.resizeAxes&&(this.dx=0)):"gesture"===N&&(this.touches=[x[0],x[1]],C?(this.distance=a7(x,z),this.box=bp(x),this.scale=1,this.ds=0,this.angle=aB(x,void 0,z),this.da=0):A||O instanceof a2?(this.distance=Q.prevEvent.distance,this.box=Q.prevEvent.box,this.scale=Q.prevEvent.scale,this.ds=this.scale-1,this.angle=Q.prevEvent.angle,this.da=this.angle-Q.gesture.startAngle):(this.distance=a7(x,z),this.box=bp(x),this.scale=this.distance/Q.gesture.startDistance,this.angle=aB(x,Q.gesture.prevAngle,z),this.ds=this.scale-Q.gesture.prevScale,this.da=this.angle-Q.gesture.prevAngle));C?(this.timeStamp=Q.downTimes[0],this.velocityY=this.velocityX=this.speed=this.duration=this.dt=0):"inertiastart"===M?(this.timeStamp=Q.prevEvent.timeStamp,this.dt=Q.prevEvent.dt,this.duration=Q.prevEvent.duration,this.speed=Q.prevEvent.speed,this.velocityX=Q.prevEvent.velocityX,this.velocityY=Q.prevEvent.velocityY):(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-Q.prevEvent.timeStamp,this.duration=this.timeStamp-Q.downTimes[0],O instanceof a2?(O=this[q]-Q.prevEvent[q],F=this[F]-Q.prevEvent[F],N=this.dt/1000,this.speed=bv(O,F)/N,this.velocityX=O/N,this.velocityY=F/N):(this.speed=Q.pointerDelta[z].speed,this.velocityX=Q.pointerDelta[z].vx,this.velocityY=Q.pointerDelta[z].vy));(A||"inertiastart"===M)&&600<Q.prevEvent.speed&&150>this.timeStamp-Q.prevEvent.timeStamp&&(M=180*Math.atan2(Q.prevEvent.velocityY,Q.prevEvent.velocityX)/Math.PI,0>M&&(M+=360),A=112.5<=M&&247.5>M,F=202.5<=M&&337.5>M,this.swipe={up:F,down:!F&&22.5<=M&&157.5>M,left:A,right:!A&&(292.5<=M||67.5>M),angle:M,speed:Q.prevEvent.speed,velocity:{x:Q.prevEvent.velocityX,y:Q.prevEvent.velocityY}})}function bu(){this.originalEvent.preventDefault()}function bk(m){var l="";"drag"===m.name&&(l=bg.drag);if("resize"===m.name){if(m.axis){l=bg[m.name+m.axis]}else{if(m.edges){for(var l="resize",p=["top","bottom","left","right"],n=0;4>n;n++){m.edges[p[n]]&&(l+=p[n])}l=bg[l]}}}return l}function aX(R,Q,O){R=this.getRect(O);var N=!1,M=null,J=null,L,K=ak({},Q.curCoords.page),M=this.options;if(!R){return null}if(aM.resize&&M.resize.enabled){if(N=M.resize,L={left:!1,right:!1,top:!1,bottom:!1},aj(N.edges)){for(var H in L){var t=L,D=H,z;R:{z=H;var A=N.edges[H],G=K,F=Q._eventTarget,C=O,x=R,r=N.margin||af;if(A){if(!0===A){var B=aW(x.width)?x.width:x.right-x.left,v=aW(x.height)?x.height:x.bottom-x.top;0>B&&("left"===z?z="right":"right"===z&&(z="left"));0>v&&("top"===z?z="bottom":"bottom"===z&&(z="top"));if("left"===z){z=G.x<(0<=B?x.left:x.right)+r;break R}if("top"===z){z=G.y<(0<=v?x.top:x.bottom)+r;break R}if("right"===z){z=G.x>(0<=B?x.right:x.left)-r;break R}if("bottom"===z){z=G.y>(0<=v?x.bottom:x.top)-r;break R}}z=an(F)?an(A)?A===F:o(F,A,C):!1}else{z=!1}}t[D]=z}L.left=L.left&&!L.right;L.top=L.top&&!L.bottom;N=L.left||L.right||L.top||L.bottom}else{O="y"!==M.resize.axis&&K.x>R.right-af,R="x"!==M.resize.axis&&K.y>R.bottom-af,N=O||R,J=(O?"x":"")+(R?"y":"")}}M=N?"resize":aM.drag&&M.drag.enabled?"drag":null;aM.gesture&&2<=Q.pointerIds.length&&!Q.dragging&&!Q.resizing&&(M="gesture");return M?{name:M,axis:J,edges:L}:null}function aI(m,l){if(!aj(m)){return null}var p=m.name,n=l.options;return("resize"===p&&n.resize.enabled||"drag"===p&&n.drag.enabled||"gesture"===p&&n.gesture.enabled)&&aM[p]?m:null}function k(x,v){var t={},r=aP[x.type],q=ad(x.path?x.path[0]:x.target),m=q;v=v?!0:!1;for(var p in x){t[p]=x[p]}t.originalEvent=x;for(t.preventDefault=bu;an(m);){for(p=0;p<r.selectors.length;p++){var n=r.contexts[p];if(aN(m,r.selectors[p])&&aG(n,q)&&aG(n,m)){n=r.listeners[p];t.currentTarget=m;for(var l=0;l<n.length;l++){if(n[l][1]===v){n[l][0](t)}}}}m=aV(m)}}function bw(l){return k.call(this,l,!0)}function aw(m,l){return bc.get(m,l)||new a8(m,l)}function a8(m,l){this._element=m;this._iEvents=this._iEvents||{};var p;if(e(m)){this.selector=m;var n=l&&l.context;p=n?aJ(n):ap;n&&(p.Node?n instanceof p.Node:an(n)||n===p.document)&&(this._context=n)}else{p=aJ(m),an(m,p)&&(aR?(at.add(this._element,aY.down,av.pointerDown),at.add(this._element,aY.move,av.pointerHover)):(at.add(this._element,"mousedown",av.pointerDown),at.add(this._element,"mousemove",av.pointerHover),at.add(this._element,"touchstart",av.pointerDown),at.add(this._element,"touchmove",av.pointerHover)))}this._doc=p.document;-1===am(ac,this._doc)&&ax(this._doc);bc.push(this);this.set(l)}function aU(m,l){var n=!1;return function(){n||(ap.console.warn(l),n=!0);return m.apply(this,arguments)}}function I(m){for(var l=0;l<ao.length;l++){ao[l].pointerEnd(m,m)}}function ax(m){if(-1===am(ac,m)){var l=m.defaultView||m.parentWindow,r;for(r in aP){at.add(m,r,k),at.add(m,r,bw,!0)}aR?(aY=aR===l.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},at.add(m,aY.down,av.selectorDown),at.add(m,aY.move,av.pointerMove),at.add(m,aY.over,av.pointerOver),at.add(m,aY.out,av.pointerOut),at.add(m,aY.up,av.pointerUp),at.add(m,aY.cancel,av.pointerCancel),at.add(m,aY.move,av.autoScrollMove)):(at.add(m,"mousedown",av.selectorDown),at.add(m,"mousemove",av.pointerMove),at.add(m,"mouseup",av.pointerUp),at.add(m,"mouseover",av.pointerOver),at.add(m,"mouseout",av.pointerOut),at.add(m,"touchstart",av.selectorDown),at.add(m,"touchmove",av.pointerMove),at.add(m,"touchend",av.pointerUp),at.add(m,"touchcancel",av.pointerCancel),at.add(m,"mousemove",av.autoScrollMove),at.add(m,"touchmove",av.autoScrollMove));at.add(l,"blur",I);try{if(l.frameElement){var q=l.frameElement.ownerDocument,p=q.defaultView;at.add(q,"mouseup",av.pointerEnd);at.add(q,"touchend",av.pointerEnd);at.add(q,"touchcancel",av.pointerEnd);at.add(q,"pointerup",av.pointerEnd);at.add(q,"MSPointerUp",av.pointerEnd);at.add(p,"blur",I)}}catch(n){aw.windowParentError=n}at.add(m,"dragstart",function(v){for(var t=0;t<ao.length;t++){var x=ao[t];if(x.element&&(x.element===v.target||aG(x.element,v.target))){x.checkAndPreventDefault(v,x.target,x.element);break}}});at.useAttachEvent&&(at.add(m,"selectstart",function(v){var t=ao[0];t.currentAction()&&t.checkAndPreventDefault(v)}),at.add(m,"dblclick",ar("ie8Dblclick")));ac.push(m)}}function am(m,l){for(var p=0,n=m.length;p<n;p++){if(m[p]===l){return p}}return -1}function aN(m,l,n){if(g){return g(m,l,n)}ap!==a3&&(l=l.replace(/\/deep\//g," "));return m[bf](l)}function o(m,l,n){for(;an(m);){if(aN(m,l)){return !0}m=aV(m);if(m===n){return aN(m,l)}}return !1}if(a3){var ap=function(){var l=a3.document.createTextNode("");return l.ownerDocument!==a3.document&&"function"===typeof a3.wrap&&a3.wrap(l)===l?a3.wrap(a3):a3}(),aO=ap.document,a9=ap.DocumentFragment||bo,w=ap.SVGElement||bo,ae=ap.SVGSVGElement||bo,a4=ap.SVGElementInstance||bo,j=ap.HTMLElement||ap.Element,aR=ap.PointerEvent||ap.MSPointerEvent,aY,bv=Math.hypot||function(m,l){return Math.sqrt(m*m+l*l)},by={},ac=[],bc=[],ao=[],aD=!1,aP={},a6={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:aO,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:Infinity,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},aq={interaction:null,i:null,x:0,y:0,scroll:function(){var m=aq.interaction.target.options[aq.interaction.prepared.name].autoScroll,l=m.container||aJ(aq.interaction.element),r=(new Date).getTime(),q=(r-aq.prevTimeX)/1000,p=(r-aq.prevTimeY)/1000,n;m.velocity?(n=m.velocity.x,m=m.velocity.y):n=m=m.speed;q*=n;p*=m;if(1<=q||1<=p){bm(l)?l.scrollBy(aq.x*q,aq.y*p):l&&(l.scrollLeft+=aq.x*q,l.scrollTop+=aq.y*p),1<=q&&(aq.prevTimeX=r),1<=p&&(aq.prevTimeY=r)}aq.isScrolling&&(aH(aq.i),aq.i=aL(aq.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(l){aq.isScrolling=!0;aH(aq.i);aq.interaction=l;aq.prevTimeX=(new Date).getTime();aq.prevTimeY=(new Date).getTime();aq.i=aL(aq.scroll)},stop:function(){aq.isScrolling=!1;aH(aq.i)}},bl="ontouchstart" in ap||ap.DocumentTouch&&aO instanceof ap.DocumentTouch,aA=!!aR,af=bl||aA?20:10,ai=1,y=0,s=Infinity,bg=aO.all&&!ap.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},aM={drag:!0,resize:!0,gesture:!0},f="onmousewheel" in aO?"mousewheel":"wheel",au="dragstart dragmove draginertiastart dragend dragenter dragleave dropactivate dropdeactivate dropmove drop resizestart resizemove resizeinertiastart resizeend gesturestart gesturemove gestureinertiastart gestureend down move up cancel tap doubletap hold".split(" "),aK={},aF="Opera"==navigator.appName&&bl&&navigator.userAgent.match("Presto"),az=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),bf="matches" in Element.prototype?"matches":"webkitMatchesSelector" in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector" in Element.prototype?"mozMatchesSelector":"oMatchesSelector" in Element.prototype?"oMatchesSelector":"msMatchesSelector",g,aL=a3.requestAnimationFrame,aH=a3.cancelAnimationFrame,at=function(){function B(L,K,J,H){var G,F=am(m,L),D=z[F],C,M,n=J;if(D&&D.events){if(t&&(C=l[F],M=am(C.supplied,J),n=C.wrapped[M]),"all"===K){for(K in D.events){D.events.hasOwnProperty(K)&&B(L,K,"all")}}else{if(D.events[K]){var N=D.events[K].length;if("all"===J){for(G=0;G<N;G++){B(L,K,D.events[K][G],Boolean(H))}return}for(G=0;G<N;G++){if(D.events[K][G]===J){L[r](q+K,n,H||!1);D.events[K].splice(G,1);t&&C&&(C.useCount[M]--,0===C.useCount[M]&&(C.supplied.splice(M,1),C.wrapped.splice(M,1),C.useCount.splice(M,1)));break}}D.events[K]&&0===D.events[K].length&&(D.events[K]=null,D.typeCount--)}D.typeCount||(z.splice(F,1),m.splice(F,1),l.splice(F,1))}}}function A(){this.returnValue=!1}function x(){this.cancelBubble=!0}function v(){this.immediatePropagationStopped=this.cancelBubble=!0}var t="attachEvent" in ap&&!("addEventListener" in ap),p=t?"attachEvent":"addEventListener",r=t?"detachEvent":"removeEventListener",q=t?"on":"",m=[],z=[],l=[];return{add:function(D,J,C,K){var n=am(m,D),H=z[n];H||(H={events:{},typeCount:0},n=m.push(D)-1,z.push(H),l.push(t?{supplied:[],wrapped:[],useCount:[]}:null));H.events[J]||(H.events[J]=[],H.typeCount++);if(-1===am(H.events[J],C)){if(t){var n=l[n],G=am(n.supplied,C),F=n.wrapped[G]||function(L){L.immediatePropagationStopped||(L.target=L.srcElement,L.currentTarget=D,L.preventDefault=L.preventDefault||A,L.stopPropagation=L.stopPropagation||x,L.stopImmediatePropagation=L.stopImmediatePropagation||v,/mouse|click/.test(L.type)&&(L.pageX=L.clientX+aJ(D).document.documentElement.scrollLeft,L.pageY=L.clientY+aJ(D).document.documentElement.scrollTop),C(L))};K=D[p](q+J,F,Boolean(K));-1===G?(n.supplied.push(C),n.wrapped.push(F),n.useCount.push(1)):n.useCount[G]++}else{K=D[p](J,C,K||!1)}H.events[J].push(C);return K}},remove:B,useAttachEvent:t,_elements:m,_targets:z,_attachedListeners:l}}(),a0={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};a.prototype={getPageXY:function(m,l){return ay(m,l,this)},getClientXY:function(m,l){return al(m,l,this)},setEventXY:function(m,l){var n=1<l.length?c(l):l[0];ay(n,by,this);m.page.x=by.x;m.page.y=by.y;al(n,by,this);m.client.x=by.x;m.client.y=by.y;m.timeStamp=(new Date).getTime()},pointerOver:function(x,v,t){function r(A,z){A&&ah(A,t)&&!aE(A,t,t)&&bj(A,t,t)&&aN(t,z)&&(q.push(A),m.push(t))}if(!this.prepared.name&&this.mouse){var q=[],m=[],p=this.element;this.addPointer(x);!this.target||!aE(this.target,this.element,t)&&bj(this.target,this.element,t)||(this.element=this.target=null,this.matches=[],this.matchElements=[]);var n=bc.get(t),l=n&&!aE(n,t,t)&&bj(n,t,t)&&aI(n.getAction(x,v,this,t),n);l&&!aZ(n,t,l)&&(l=null);l?(this.target=n,this.element=t,this.matches=[],this.matchElements=[]):(bc.forEachSelector(r),this.validateSelector(x,v,q,m)?(this.matches=q,this.matchElements=m,this.pointerHover(x,v,this.matches,this.matchElements),at.add(t,aR?aY.move:"mousemove",av.pointerHover)):this.target&&(aG(p,t)?(this.pointerHover(x,v,this.matches,this.matchElements),at.add(this.element,aR?aY.move:"mousemove",av.pointerHover)):(this.element=this.target=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(m,l,t,r,q,n){t=this.target;if(!this.prepared.name&&this.mouse){var p;this.setEventXY(this.curCoords,[m]);q?p=this.validateSelector(m,l,q,n):t&&(p=aI(t.getAction(this.pointers[0],l,this,this.element),this.target));t&&t.options.styleCursor&&(t._doc.documentElement.style.cursor=p?bk(p):"")}else{this.prepared.name&&this.checkAndPreventDefault(l,t,this.element)}},pointerOut:function(m,l,n){this.prepared.name||(bc.get(n)||at.remove(n,aR?aY.move:"mousemove",av.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(A,z,x,v){function t(B,l,C){C=g?C.querySelectorAll(l):void 0;ah(B,q)&&!aE(B,q,x)&&bj(B,q,x)&&aN(q,l,C)&&(p.matches.push(B),p.matchElements.push(q))}var p=this,r=at.useAttachEvent?ak({},z):z,q=x,n=this.addPointer(A),m;this.holdTimers[n]=setTimeout(function(){p.pointerHold(at.useAttachEvent?r:A,r,x,v)},a6._holdDuration);this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector){for(;an(q);){if(q===this.element&&aI(this.target.getAction(A,z,this,this.element),this.target).name===this.prepared.name){aH(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.collectEventTargets(A,z,x,"down");return}q=aV(q)}}if(!this.interacting()){this.setEventXY(this.curCoords,[A]);for(this.downEvent=z;an(q)&&!m;){this.matches=[],this.matchElements=[],bc.forEachSelector(t),m=this.validateSelector(A,z,this.matches,this.matchElements),q=aV(q)}if(m){return this.prepared.name=m.name,this.prepared.axis=m.axis,this.prepared.edges=m.edges,this.collectEventTargets(A,z,x,"down"),this.pointerDown(A,z,x,v,m)}this.downTimes[n]=(new Date).getTime();this.downTargets[n]=x;bA(this.downPointer,A);bq(this.prevCoords,this.curCoords);this.pointerWasMoved=!1}this.collectEventTargets(A,z,x,"down")},pointerDown:function(x,v,t,r,q){if(!q&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name){this.checkAndPreventDefault(v,this.target,this.element)}else{this.pointerIsDown=!0;this.downEvent=v;var m=this.addPointer(x),p;if(1<this.pointerIds.length&&this.target._element===this.element){var n=aI(q||this.target.getAction(x,v,this,this.element),this.target);aZ(this.target,this.element,n)&&(p=n);this.prepared.name=null}else{this.prepared.name||(n=bc.get(r))&&!aE(n,r,t)&&bj(n,r,t)&&(p=aI(q||n.getAction(x,v,this,r),n,t))&&aZ(n,r,p)&&(this.target=n,this.element=r)}var l=(n=this.target)&&n.options;!n||!q&&this.prepared.name?this.inertiaStatus.active&&r===this.element&&aI(n.getAction(x,v,this,this.element),n).name===this.prepared.name&&(aH(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(v,n,this.element)):(p=p||aI(q||n.getAction(x,v,this,r),n,this.element),this.setEventXY(this.startCoords,this.pointers),p&&(l.styleCursor&&(n._doc.documentElement.style.cursor=bk(p)),this.resizeAxes="resize"===p.name?p.axis:null,"gesture"===p&&2>this.pointerIds.length&&(p=null),this.prepared.name=p.name,this.prepared.axis=p.axis,this.prepared.edges=p.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[m]=(new Date).getTime(),this.downTargets[m]=t,bA(this.downPointer,x),bq(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(v,n,this.element)))}},setModifications:function(m,l){var q=this.target,p=!0,n=bB(q,this.prepared.name)&&(!q.options[this.prepared.name].snap.endOnly||l),q=br(q,this.prepared.name)&&(!q.options[this.prepared.name].restrict.endOnly||l);n?this.setSnapping(m):this.snapStatus.locked=!1;q?this.setRestriction(m):this.restrictStatus.restricted=!1;n&&this.snapStatus.locked&&!this.snapStatus.changed?p=q&&this.restrictStatus.restricted&&this.restrictStatus.changed:q&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(p=!1);return p},setStartOffsets:function(m,l,t){m=l.getRect(t);var r=a5(l,t);t=l.options[this.prepared.name].snap;l=l.options[this.prepared.name].restrict;var q,n;m?(this.startOffset.left=this.startCoords.page.x-m.left,this.startOffset.top=this.startCoords.page.y-m.top,this.startOffset.right=m.right-this.startCoords.page.x,this.startOffset.bottom=m.bottom-this.startCoords.page.y,q="width" in m?m.width:m.right-m.left,n="height" in m?m.height:m.bottom-m.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0;this.snapOffsets.splice(0);r=t&&"startCoords"===t.offset?{x:this.startCoords.page.x-r.x,y:this.startCoords.page.y-r.y}:t&&t.offset||{x:0,y:0};if(m&&t&&t.relativePoints&&t.relativePoints.length){for(var p=0;p<t.relativePoints.length;p++){this.snapOffsets.push({x:this.startOffset.left-q*t.relativePoints[p].x+r.x,y:this.startOffset.top-n*t.relativePoints[p].y+r.y})}}else{this.snapOffsets.push(r)}m&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-q*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-n*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-q*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-n*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(m,l,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===m.name?2:1)||(-1===am(ao,this)&&ao.push(this),this.prepared.name||this.setEventXY(this.startCoords),this.prepared.name=m.name,this.prepared.axis=m.axis,this.prepared.edges=m.edges,this.target=l,this.element=n,this.setStartOffsets(m.name,l,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(C,B,A,z,x){if(this.inertiaStatus.active){z=this.inertiaStatus.upCoords.page;var r=this.inertiaStatus.upCoords.client;this.setEventXY(this.curCoords,[{pageX:z.x+this.inertiaStatus.sx,pageY:z.y+this.inertiaStatus.sy,clientX:r.x+this.inertiaStatus.sx,clientY:r.y+this.inertiaStatus.sy}])}else{this.recordPointer(C),this.setEventXY(this.curCoords,this.pointers)}z=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var v,t,r=this.mouse?0:am(this.pointerIds,aS(C));this.pointerIsDown&&!this.pointerWasMoved&&(v=this.curCoords.client.x-this.startCoords.client.x,t=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=bv(v,t)>ai);z||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[r]),this.collectEventTargets(C,B,A,"move"));if(this.pointerIsDown){if(z&&this.pointerWasMoved&&!x){this.checkAndPreventDefault(B,this.target,this.element)}else{if(bs(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||C instanceof a2&&/inertiastart/.test(C.type))){if(!this.interacting()&&(bs(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){v=Math.abs(v);t=Math.abs(t);z=this.target.options.drag.axis;var q=v>t?"x":v<t?"y":"xy";if("xy"!==q&&"xy"!==z&&z!==q){this.prepared.name=null;for(var p=A;an(p);){if((t=bc.get(p))&&t!==this.target&&!t.options.drag.manualStart&&"drag"===t.getAction(this.downPointer,this.downEvent,this,p).name&&bi(q,t)){this.prepared.name="drag";this.target=t;this.element=p;break}p=aV(p)}if(!this.prepared.name){var m=this;t=function(n,l,D){D=g?D.querySelectorAll(l):void 0;if(n!==m.target&&ah(n,A)&&!n.options.drag.manualStart&&!aE(n,p,A)&&bj(n,p,A)&&aN(p,l,D)&&"drag"===n.getAction(m.downPointer,m.downEvent,m,p).name&&bi(q,n)&&aZ(n,p,"drag")){return n}};for(p=A;an(p);){if(v=bc.forEachSelector(t)){this.prepared.name="drag";this.target=v;this.element=p;break}p=aV(p)}}}}if((t=!!this.prepared.name&&!this.interacting())&&(this.target.options[this.prepared.name].manualStart||!aZ(this.target,this.element,this.prepared))){this.stop(B);return}if(this.prepared.name&&this.target){t&&this.start(this.prepared,this.target,this.element);if(this.setModifications(this.curCoords.page,x)||t){this.prevEvent=this[this.prepared.name+"Move"](B)}this.checkAndPreventDefault(B,this.target,this.element)}}bq(this.prevCoords,this.curCoords);(this.dragging||this.resizing)&&this.autoScrollMove(C)}}}},dragStart:function(m){var l=new a2(this,m,"drag","start",this.element);this.dragging=!0;this.target.fire(l);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];this.dynamicDrop||this.setActiveDrops(this.element);m=this.getDropEvents(m,l);m.activate&&this.fireActiveDrops(m.activate);return l},dragMove:function(m){var l=this.target,p=new a2(this,m,"drag","move",this.element),n=this.getDrop(p,m,this.element);this.dropTarget=n.dropzone;this.dropElement=n.element;m=this.getDropEvents(m,p);l.fire(p);m.leave&&this.prevDropTarget.fire(m.leave);m.enter&&this.dropTarget.fire(m.enter);m.move&&this.dropTarget.fire(m.move);this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return p},resizeStart:function(m){m=new a2(this,m,"resize","start",this.element);if(this.prepared.edges){var l=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var n=ak({},this.prepared.edges);n.top=n.top||n.left&&!n.bottom;n.left=n.left||n.top&&!n.right;n.bottom=n.bottom||n.right&&!n.top;n.right=n.right||n.bottom&&!n.left;this.prepared._linkedEdges=n}else{this.prepared._linkedEdges=null}this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=l.width/l.height);this.resizeRects={start:l,current:ak({},l),restricted:ak({},l),previous:ak({},l),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};m.rect=this.resizeRects.restricted;m.deltaRect=this.resizeRects.delta}this.target.fire(m);this.resizing=!0;return m},resizeMove:function(K){K=new a2(this,K,"resize","move",this.element);var J=this.prepared.edges,H=this.target.options.resize.invert,G="reposition"===H||"negate"===H;if(J){var F=K.dx,B=K.dy,D=this.resizeRects.start,C=this.resizeRects.current,A=this.resizeRects.restricted,z=this.resizeRects.delta,v=ak(this.resizeRects.previous,A),x=J;if(this.target.options.resize.preserveAspectRatio){var t=this.resizeStartAspectRatio,J=this.prepared._linkedEdges;if(x.left&&x.bottom||x.right&&x.top){B=-F/t}else{if(x.left||x.right){B=F/t}else{if(x.top||x.bottom){F=B*t}}}}else{if(this.target.options.resize.square){if(J=this.prepared._linkedEdges,x.left&&x.bottom||x.right&&x.top){B=-F}else{if(x.left||x.right){B=F}else{if(x.top||x.bottom){F=B}}}}}J.top&&(C.top+=B);J.bottom&&(C.bottom+=B);J.left&&(C.left+=F);J.right&&(C.right+=F);G?(ak(A,C),"reposition"===H&&(A.top>A.bottom&&(J=A.top,A.top=A.bottom,A.bottom=J),A.left>A.right&&(J=A.left,A.left=A.right,A.right=J))):(A.top=Math.min(C.top,D.bottom),A.bottom=Math.max(C.bottom,D.top),A.left=Math.min(C.left,D.right),A.right=Math.max(C.right,D.left));A.width=A.right-A.left;A.height=A.bottom-A.top;for(var r in A){z[r]=A[r]-v[r]}K.edges=this.prepared.edges;K.rect=A;K.deltaRect=z}this.target.fire(K);return K},gestureStart:function(l){l=new a2(this,l,"gesture","start",this.element);l.ds=0;this.gesture.startDistance=this.gesture.prevDistance=l.distance;this.gesture.startAngle=this.gesture.prevAngle=l.angle;this.gesture.scale=1;this.gesturing=!0;this.target.fire(l);return l},gestureMove:function(l){if(!this.pointerIds.length){return this.prevEvent}l=new a2(this,l,"gesture","move",this.element);l.ds=l.scale-this.gesture.scale;this.target.fire(l);this.gesture.prevAngle=l.angle;this.gesture.prevDistance=l.distance;Infinity===l.scale||null===l.scale||void 0===l.scale||isNaN(l.scale)||(this.gesture.scale=l.scale);return l},pointerHold:function(m,l,n){this.collectEventTargets(m,l,n,"hold")},pointerUp:function(m,l,q,p){var n=this.mouse?0:am(this.pointerIds,aS(m));clearTimeout(this.holdTimers[n]);this.collectEventTargets(m,l,q,"up");this.collectEventTargets(m,l,q,"tap");this.pointerEnd(m,l,q,p);this.removePointer(m)},pointerCancel:function(m,l,q,p){var n=this.mouse?0:am(this.pointerIds,aS(m));clearTimeout(this.holdTimers[n]);this.collectEventTargets(m,l,q,"cancel");this.pointerEnd(m,l,q,p);this.removePointer(m)},ie8Dblclick:function(m,l,n){this.prevTap&&l.clientX===this.prevTap.clientX&&l.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(m,l,n,"tap"))},pointerEnd:function(N,M,L,K){var J,F=this.target,H=F&&F.options,G=H&&this.prepared.name&&H[this.prepared.name].inertia;J=this.inertiaStatus;if(this.interacting()){if(J.active&&!J.ending){return}var D=(new Date).getTime(),C=!1,B=!1,A=!1,z=bB(F,this.prepared.name)&&H[this.prepared.name].snap.endOnly,x=br(F,this.prepared.name)&&H[this.prepared.name].restrict.endOnly,v=0,O=0,H=this.dragging?"x"===H.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===H.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,B=(C=G&&G.enabled&&"gesture"!==this.prepared.name&&M!==J.startEvent)&&50>D-this.curCoords.timeStamp&&H>G.minSpeed&&H>G.endSpeed;C&&!B&&(z||x)&&(G={},G.snap=G.restrict=G,z&&(this.setSnapping(this.curCoords.page,G),G.locked&&(v+=G.dx,O+=G.dy)),x&&(this.setRestriction(this.curCoords.page,G),G.restricted&&(v+=G.dx,O+=G.dy)),v||O)&&(A=!0);if(B||A){bq(J.upCoords,this.curCoords);this.pointers[0]=J.startEvent=new a2(this,M,this.prepared.name,"inertiastart",this.element);J.t0=D;F.fire(J.startEvent);B?(J.vx0=this.pointerDelta.client.vx,J.vy0=this.pointerDelta.client.vy,J.v0=H,this.calcInertia(J),M=ak({},this.curCoords.page),F=a5(F,this.element),M.x=M.x+J.xe-F.x,M.y=M.y+J.ye-F.y,F={useStatusXY:!0,x:M.x,y:M.y,dx:0,dy:0,snap:null},F.snap=F,v=O=0,z&&(M=this.setSnapping(this.curCoords.page,F),M.locked&&(v+=M.dx,O+=M.dy)),x&&(F=this.setRestriction(this.curCoords.page,F),F.restricted&&(v+=F.dx,O+=F.dy)),J.modifiedXe+=v,J.modifiedYe+=O,J.i=aL(this.boundInertiaFrame)):(J.smoothEnd=!0,J.xe=v,J.ye=O,J.sx=J.sy=0,J.i=aL(this.boundSmoothEndFrame));J.active=!0;return}(z||x)&&this.pointerMove(N,M,L,K,!0)}this.dragging?(J=new a2(this,M,"drag","end",this.element),x=this.getDrop(J,M,this.element),this.dropTarget=x.dropzone,this.dropElement=x.element,x=this.getDropEvents(M,J),x.leave&&this.prevDropTarget.fire(x.leave),x.enter&&this.dropTarget.fire(x.enter),x.drop&&this.dropTarget.fire(x.drop),x.deactivate&&this.fireActiveDrops(x.deactivate),F.fire(J)):this.resizing?(J=new a2(this,M,"resize","end",this.element),F.fire(J)):this.gesturing&&(J=new a2(this,M,"gesture","end",this.element),F.fire(J));this.stop(M)},collectDrops:function(x){var v=[],t=[],r;x=x||this.element;for(r=0;r<bc.length;r++){if(bc[r].options.drop.enabled){var q=bc[r],m=q.options.drop.accept;if(!(an(m)&&m!==x||aT(m)&&!aN(x,m))){for(var m=q.selector?q._context.querySelectorAll(q.selector):[q._element],p=0,n=m.length;p<n;p++){var l=m[p];l!==x&&(v.push(q),t.push(l))}}}}return{dropzones:v,elements:t}},fireActiveDrops:function(m){var l,q,p,n;for(l=0;l<this.activeDrops.dropzones.length;l++){q=this.activeDrops.dropzones[l],p=this.activeDrops.elements[l],p!==n&&(m.target=p,q.fire(m)),n=p}},setActiveDrops:function(l){l=this.collectDrops(l,!0);this.activeDrops.dropzones=l.dropzones;this.activeDrops.elements=l.elements;this.activeDrops.rects=[];for(l=0;l<this.activeDrops.dropzones.length;l++){this.activeDrops.rects[l]=this.activeDrops.dropzones[l].getRect(this.activeDrops.elements[l])}},getDrop:function(m,l,v){var t=[];aD&&this.setActiveDrops(v);for(var r=0;r<this.activeDrops.dropzones.length;r++){var n=this.activeDrops.elements[r];t.push(this.activeDrops.dropzones[r].dropCheck(m,l,this.target,v,n,this.activeDrops.rects[r])?n:null)}v=(l=t[0])?0:-1;for(var q,r=[],p=[],n=1;n<t.length;n++){if((m=t[n])&&m!==l){if(!l){l=m,v=n}else{if(m.parentNode!==m.ownerDocument){if(l.parentNode===m.ownerDocument){l=m,v=n}else{if(!r.length){for(q=l;q.parentNode&&q.parentNode!==q.ownerDocument;){r.unshift(q),q=q.parentNode}}if(l instanceof j&&m instanceof w&&!(m instanceof ae)){if(m===l.parentNode){continue}q=m.ownerSVGElement}else{q=m}for(p=[];q.parentNode!==q.ownerDocument;){p.unshift(q),q=q.parentNode}for(q=0;p[q]&&p[q]===r[q];){q++}q=[p[q-1],p[q],r[q]];for(p=q[0].lastChild;p;){if(p===q[1]){l=m;v=n;r=[];break}else{if(p===q[2]){break}}p=p.previousSibling}}}}}}t=v;return{dropzone:this.activeDrops.dropzones[t]||null,element:this.activeDrops.elements[t]||null}},getDropEvents:function(m,l){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dragleave"},l.dragLeave=this.prevDropElement,l.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dragenter"},l.dragEnter=this.dropElement,l.dropzone=this.dropTarget));"dragend"===l.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"drop"},l.dropzone=this.dropTarget);"dragstart"===l.type&&(n.activate={target:null,dropzone:null,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dropactivate"});"dragend"===l.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dropdeactivate"});"dragmove"===l.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,dragmove:l,timeStamp:l.timeStamp,type:"dropmove"},l.dropzone=this.dropTarget);return n},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=this.target=this.element=null},stop:function(m){if(this.interacting()){aq.stop();this.matches=[];this.matchElements=[];var l=this.target;l.options.styleCursor&&(l._doc.documentElement.style.cursor="");m&&bd(m.preventDefault)&&this.checkAndPreventDefault(m,l,this.element);this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1;this.prepared.name=this.prevEvent=null;for(m=this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;m<this.pointers.length;m++){-1===am(this.pointerIds,aS(this.pointers[m]))&&this.pointers.splice(m,1)}},inertiaFrame:function(){var m,l,q=this.inertiaStatus;m=this.target.options[this.prepared.name].inertia.resistance;l=(new Date).getTime()/1000-q.t0;if(l<q.te){l=1-(Math.exp(-m*l)-q.lambda_v0)/q.one_ve_v0;if(q.modifiedXe===q.xe&&q.modifiedYe===q.ye){q.sx=q.xe*l,q.sy=q.ye*l}else{var p=q.ye,n=q.modifiedYe;m=bt(l,0,q.xe,q.modifiedXe);l=bt(l,0,p,n);q.sx=m;q.sy=l}this.pointerMove(q.startEvent,q.startEvent);q.i=aL(this.boundInertiaFrame)}else{q.ending=!0,q.sx=q.modifiedXe,q.sy=q.modifiedYe,this.pointerMove(q.startEvent,q.startEvent),this.pointerEnd(q.startEvent,q.startEvent),q.active=q.ending=!1}},smoothEndFrame:function(){var m=this.inertiaStatus,l=(new Date).getTime()-m.t0,p=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(l<p){var n;n=l/p;m.sx=-m.xe*n*(n-2)+0;l/=p;m.sy=-m.ye*l*(l-2)+0;this.pointerMove(m.startEvent,m.startEvent);m.i=aL(this.boundSmoothEndFrame)}else{m.ending=!0,m.sx=m.xe,m.sy=m.ye,this.pointerMove(m.startEvent,m.startEvent),this.pointerEnd(m.startEvent,m.startEvent),m.smoothEnd=m.active=m.ending=!1}},addPointer:function(m){var l=aS(m),n=this.mouse?0:am(this.pointerIds,l);-1===n&&(n=this.pointerIds.length);this.pointerIds[n]=l;this.pointers[n]=m;return n},removePointer:function(l){l=aS(l);l=this.mouse?0:am(this.pointerIds,l);-1!==l&&(this.pointers.splice(l,1),this.pointerIds.splice(l,1),this.downTargets.splice(l,1),this.downTimes.splice(l,1),this.holdTimers.splice(l,1))},recordPointer:function(m){var l=this.mouse?0:am(this.pointerIds,aS(m));-1!==l&&(this.pointers[l]=m)},collectEventTargets:function(x,v,t,r){function q(A,z,B){B=g?B.querySelectorAll(z):void 0;A._iEvents[r]&&an(l)&&ah(A,l)&&!aE(A,l,t)&&bj(A,l,t)&&aN(l,z,B)&&(p.push(A),n.push(l))}var m=this.mouse?0:am(this.pointerIds,aS(x));if("tap"!==r||!this.pointerWasMoved&&this.downTargets[m]&&this.downTargets[m]===t){for(var p=[],n=[],l=t;l;){aw.isSet(l)&&aw(l)._iEvents[r]&&(p.push(aw(l)),n.push(l)),bc.forEachSelector(q),l=aV(l)}(p.length||"tap"===r)&&this.firePointers(x,v,t,p,n,r)}},firePointers:function(A,z,x,v,t,p){var r=this.mouse?0:am(this.pointerIds,aS(A)),q={},n,m;"doubletap"===p?q=A:(bA(q,z),z!==A&&bA(q,A),q.preventDefault=bu,q.stopPropagation=a2.prototype.stopPropagation,q.stopImmediatePropagation=a2.prototype.stopImmediatePropagation,q.interaction=this,q.timeStamp=(new Date).getTime(),q.originalEvent=z,q.originalPointer=A,q.type=p,q.pointerId=aS(A),q.pointerType=this.mouse?"mouse":aA?aT(A.pointerType)?A.pointerType:[,,"touch","pen","mouse"][A.pointerType]:"touch");"tap"===p&&(q.dt=q.timeStamp-this.downTimes[r],n=q.timeStamp-this.tapTime,m=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===q.target&&500>n),q["double"]=m,this.tapTime=q.timeStamp);for(A=0;A<v.length&&!(q.currentTarget=t[A],q.interactable=v[A],v[A].fire(q),q.immediatePropagationStopped||q.propagationStopped&&t[A+1]!==q.currentTarget);A++){}m?(v={},ak(v,q),v.dt=n,v.type="doubletap",this.collectEventTargets(v,z,x,"doubletap"),this.prevTap=v):"tap"===p&&(this.prevTap=q)},validateSelector:function(x,v,t,r){for(var q=0,m=t.length;q<m;q++){var p=t[q],n=r[q],l=aI(p.getAction(x,v,this,n),p);if(l&&aZ(p,n,l)){return this.target=p,this.element=n,l}}},setSnapping:function(S,R){var Q=this.target.options[this.prepared.name].snap,O=[],N,K,M;R=R||this.snapStatus;R.useStatusXY?K={x:R.x,y:R.y}:(N=a5(this.target,this.element),K=ak({},S),K.x-=N.x,K.y-=N.y);R.realX=K.x;R.realY=K.y;K.x-=this.inertiaStatus.resumeDx;K.y-=this.inertiaStatus.resumeDy;for(var L=Q.targets?Q.targets.length:0,J=0;J<this.snapOffsets.length;J++){var H=K.x-this.snapOffsets[J].x,G=K.y-this.snapOffsets[J].y;for(M=0;M<L;M++){(N=bd(Q.targets[M])?Q.targets[M](H,G,this):Q.targets[M])&&O.push({x:aW(N.x)?N.x+this.snapOffsets[J].x:H,y:aW(N.y)?N.y+this.snapOffsets[J].y:G,range:aW(N.range)?N.range:Q.range})}}var Q=null,J=!1,F=0,D=0;M=G=H=0;for(L=O.length;M<L;M++){N=O[M];var C=N.range,B=N.x-K.x,A=N.y-K.y,x=bv(B,A),z=x<=C;Infinity===C&&J&&Infinity!==D&&(z=!1);if(!Q||(z?J&&Infinity!==C?x/C<F/D:Infinity===C&&Infinity!==D||x<F:!J&&x<F)){Infinity===C&&(z=!0),Q=N,F=x,D=C,J=z,H=B,G=A,R.range=C}}Q?(O=R.snappedX!==Q.x||R.snappedY!==Q.y,R.snappedX=Q.x,R.snappedY=Q.y):(O=!0,R.snappedX=NaN,R.snappedY=NaN);R.dx=H;R.dy=G;R.changed=O||J&&!R.locked;R.locked=J;return R},setRestriction:function(m,l){var q=this.target,p=q&&q.options[this.prepared.name].restrict,n=p&&p.restriction;if(!n){return l}l=l||this.restrictStatus;p=l.useStatusXY?p={x:l.x,y:l.y}:p=ak({},m);l.snap&&l.snap.locked&&(p.x+=l.snap.dx||0,p.y+=l.snap.dy||0);p.x-=this.inertiaStatus.resumeDx;p.y-=this.inertiaStatus.resumeDy;l.dx=0;l.dy=0;l.restricted=!1;if(aT(n)&&(n="parent"===n?aV(this.element):"self"===n?q.getRect(this.element):ag(this.element,n),!n)){return l}bd(n)&&(n=n(p.x,p.y,this.element));an(n)&&(n=aC(n));(q=n)?"x" in n&&"y" in n?(n=Math.max(Math.min(q.x+q.width-this.restrictOffset.right,p.x),q.x+this.restrictOffset.left),q=Math.max(Math.min(q.y+q.height-this.restrictOffset.bottom,p.y),q.y+this.restrictOffset.top)):(n=Math.max(Math.min(q.right-this.restrictOffset.right,p.x),q.left+this.restrictOffset.left),q=Math.max(Math.min(q.bottom-this.restrictOffset.bottom,p.y),q.top+this.restrictOffset.top)):(n=p.x,q=p.y);l.dx=n-p.x;l.dy=q-p.y;l.changed=l.restrictedX!==n||l.restrictedY!==q;l.restricted=!(!l.dx&&!l.dy);l.restrictedX=n;l.restrictedY=q;return l},checkAndPreventDefault:function(m,l,p){if(l=l||this.target){l=l.options;var n=l.preventDefault;"auto"===n&&p&&!/^(input|select|textarea)$/i.test(m.target.nodeName)?/down|start/i.test(m.type)&&"drag"===this.prepared.name&&"xy"!==l.drag.axis||l[this.prepared.name]&&l[this.prepared.name].manualStart&&!this.interacting()||m.preventDefault():"always"===n&&m.preventDefault()}},calcInertia:function(m){var l=this.target.options[this.prepared.name].inertia,p=l.resistance,n=-Math.log(l.endSpeed/m.v0)/p;m.x0=this.prevEvent.pageX;m.y0=this.prevEvent.pageY;m.t0=m.startEvent.timeStamp/1000;m.sx=m.sy=0;m.modifiedXe=m.xe=(m.vx0-n)/p;m.modifiedYe=m.ye=(m.vy0-n)/p;m.te=n;m.lambda_v0=p/m.v0;m.one_ve_v0=1-l.endSpeed/m.v0},autoScrollMove:function(m){var l;if(l=this.interacting()){l=this.prepared.name;var r=this.target.options;/^resize/.test(l)&&(l="resize");l=r[l].autoScroll&&r[l].autoScroll.enabled}if(l){if(this.inertiaStatus.active){aq.x=aq.y=0}else{var q,p=this.target.options[this.prepared.name].autoScroll,n=p.container||aJ(this.element);bm(n)?(q=m.clientX<aq.margin,l=m.clientY<aq.margin,r=m.clientX>n.innerWidth-aq.margin,m=m.clientY>n.innerHeight-aq.margin):(n=h(n),q=m.clientX<n.left+aq.margin,l=m.clientY<n.top+aq.margin,r=m.clientX>n.right-aq.margin,m=m.clientY>n.bottom-aq.margin);aq.x=r?1:q?-1:0;aq.y=m?1:l?-1:0;aq.isScrolling||(aq.margin=p.margin,aq.speed=p.speed,aq.start(this))}}},_updateEventTargets:function(m,l){this._eventTarget=m;this._curEventTarget=l}};a2.prototype={preventDefault:bo,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var av={},bx="dragStart dragMove resizeStart resizeMove gestureStart gestureMove pointerOver pointerOut pointerHover selectorDown pointerDown pointerMove pointerUp pointerCancel pointerEnd addPointer removePointer recordPointer autoScrollMove".split(" "),u=0,b=bx.length;u<b;u++){var bn=bx[u];av[bn]=ar(bn)}bc.indexOfElement=function(m,l){l=l||aO;for(var p=0;p<this.length;p++){var n=this[p];if(n.selector===m&&n._context===l||!n.selector&&n._element===m){return p}}return -1};bc.get=function(m,l){return this[this.indexOfElement(m,l&&l.context)]};bc.forEachSelector=function(m){for(var l=0;l<this.length;l++){var n=this[l];if(n.selector&&(n=m(n,n.selector,n._context,l,this),void 0!==n)){return n}}};a8.prototype={setOnEvents:function(m,l){"drop"===m?(bd(l.ondrop)&&(this.ondrop=l.ondrop),bd(l.ondropactivate)&&(this.ondropactivate=l.ondropactivate),bd(l.ondropdeactivate)&&(this.ondropdeactivate=l.ondropdeactivate),bd(l.ondragenter)&&(this.ondragenter=l.ondragenter),bd(l.ondragleave)&&(this.ondragleave=l.ondragleave),bd(l.ondropmove)&&(this.ondropmove=l.ondropmove)):(m="on"+m,bd(l.onstart)&&(this[m+"start"]=l.onstart),bd(l.onmove)&&(this[m+"move"]=l.onmove),bd(l.onend)&&(this[m+"end"]=l.onend),bd(l.oninertiastart)&&(this[m+"inertiastart"]=l.oninertiastart));return this},draggable:function(l){return aj(l)?(this.options.drag.enabled=!1===l.enabled?!1:!0,this.setPerAction("drag",l),this.setOnEvents("drag",l),/^x$|^y$|^xy$/.test(l.axis)?this.options.drag.axis=l.axis:null===l.axis&&delete this.options.drag.axis,this):a1(l)?(this.options.drag.enabled=l,this):this.options.drag},setPerAction:function(m,l){for(var n in l){n in a6[m]&&(aj(l[n])?(this.options[m][n]=ak(this.options[m][n]||{},l[n]),aj(a6.perAction[n])&&"enabled" in a6.perAction[n]&&(this.options[m][n].enabled=!1===l[n].enabled?!1:!0)):a1(l[n])&&aj(a6.perAction[n])?this.options[m][n].enabled=l[n]:void 0!==l[n]&&(this.options[m][n]=l[n]))}},dropzone:function(l){return aj(l)?(this.options.drop.enabled=!1===l.enabled?!1:!0,this.setOnEvents("drop",l),/^(pointer|center)$/.test(l.overlap)?this.options.drop.overlap=l.overlap:aW(l.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,l.overlap),0)),"accept" in l&&(this.options.drop.accept=l.accept),"checker" in l&&(this.options.drop.checker=l.checker),this):a1(l)?(this.options.drop.enabled=l,this):this.options.drop},dropCheck:function(A,z,x,v,t,p){var r=!1;if(!(p=p||this.getRect(t))){return this.options.drop.checker?this.options.drop.checker(A,z,r,this,t,x,v):!1}var q=this.options.drop.overlap;if("pointer"===q){var n=ay(A),r=a5(x,v);n.x+=r.x;n.y+=r.y;r=n.x>p.left&&n.x<p.right;n=n.y>p.top&&n.y<p.bottom;r=r&&n}n=x.getRect(v);if("center"===q){var r=n.left+n.width/2,m=n.top+n.height/2,r=r>=p.left&&r<=p.right&&m>=p.top&&m<=p.bottom}aW(q)&&(r=Math.max(0,Math.min(p.right,n.right)-Math.max(p.left,n.left))*Math.max(0,Math.min(p.bottom,n.bottom)-Math.max(p.top,n.top))/(n.width*n.height)>=q);this.options.drop.checker&&(r=this.options.drop.checker(A,z,r,this,t,x,v));return r},dropChecker:function(l){return bd(l)?(this.options.drop.checker=l,this):null===l?(delete this.options.getRect,this):this.options.drop.checker},accept:function(l){return an(l)||e(l)?(this.options.drop.accept=l,this):null===l?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(l){return aj(l)?(this.options.resize.enabled=!1===l.enabled?!1:!0,this.setPerAction("resize",l),this.setOnEvents("resize",l),/^x$|^y$|^xy$/.test(l.axis)?this.options.resize.axis=l.axis:null===l.axis&&(this.options.resize.axis=a6.resize.axis),a1(l.preserveAspectRatio)?this.options.resize.preserveAspectRatio=l.preserveAspectRatio:a1(l.square)&&(this.options.resize.square=l.square),this):a1(l)?(this.options.resize.enabled=l,this):this.options.resize},squareResize:function(l){return a1(l)?(this.options.resize.square=l,this):null===l?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(l){return aj(l)?(this.options.gesture.enabled=!1===l.enabled?!1:!0,this.setPerAction("gesture",l),this.setOnEvents("gesture",l),this):a1(l)?(this.options.gesture.enabled=l,this):this.options.gesture},autoScroll:function(l){aj(l)?l=ak({actions:["drag","resize"]},l):a1(l)&&(l={actions:["drag","resize"],enabled:l});return this.setOptions("autoScroll",l)},snap:function(l){l=this.setOptions("snap",l);return l===this?this:l.drag},setOptions:function(m,l){var q=l&&E(l.actions)?l.actions:["drag"],p;if(aj(l)||a1(l)){for(p=0;p<q.length;p++){var n=/resize/.test(q[p])?"resize":q[p];aj(this.options[n])&&(n=this.options[n][m],aj(l)?(ak(n,l),n.enabled=!1===l.enabled?!1:!0,"snap"===m&&("grid"===n.mode?n.targets=[aw.createSnapGrid(ak({offset:n.gridOffset||{x:0,y:0}},n.grid||{}))]:"anchor"===n.mode?n.targets=n.anchors:"path"===n.mode&&(n.targets=n.paths),"elementOrigin" in l&&(n.relativePoints=[l.elementOrigin]))):a1(l)&&(n.enabled=l))}return this}q={};n=["drag","resize","gesture"];for(p=0;p<n.length;p++){m in a6[n[p]]&&(q[n[p]]=this.options[n[p]][m])}return q},inertia:function(l){l=this.setOptions("inertia",l);return l===this?this:l.drag},getAction:function(m,l,q,p){var n=this.defaultActionChecker(m,q,p);return this.options.actionChecker?this.options.actionChecker(m,l,n,this,p,q):n},defaultActionChecker:aX,actionChecker:function(l){return bd(l)?(this.options.actionChecker=l,this):null===l?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(l){l=l||this._element;this.selector&&!an(l)&&(l=this._context.querySelector(this.selector));return aC(l)},rectChecker:function(l){return bd(l)?(this.getRect=l,this):null===l?(delete this.options.getRect,this):this.getRect},styleCursor:function(l){return a1(l)?(this.options.styleCursor=l,this):null===l?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(l){return/^(always|never|auto)$/.test(l)?(this.options.preventDefault=l,this):a1(l)?(this.options.preventDefault=l?"always":"never",this):this.options.preventDefault},origin:function(l){return e(l)||aj(l)?(this.options.origin=l,this):this.options.origin},deltaSource:function(l){return"page"===l||"client"===l?(this.options.deltaSource=l,this):this.options.deltaSource},restrict:function(m){if(!aj(m)){return this.setOptions("restrict",m)}for(var l=["drag","resize","gesture"],q,p=0;p<l.length;p++){var n=l[p];n in m&&(q=ak({actions:[n],restriction:m[n]},m),q=this.setOptions("restrict",q))}return q},context:function(){return this._context},_context:aO,ignoreFrom:function(l){return e(l)||an(l)?(this.options.ignoreFrom=l,this):this.options.ignoreFrom},allowFrom:function(l){return e(l)||an(l)?(this.options.allowFrom=l,this):this.options.allowFrom},element:function(){return this._element},fire:function(m){if(!m||!m.type||-1===am(au,m.type)){return this}var l,q,p,n="on"+m.type;if(m.type in this._iEvents){for(l=this._iEvents[m.type],q=0,p=l.length;q<p&&!m.immediatePropagationStopped;q++){l[q](m)}}if(bd(this[n])){this[n](m)}if(m.type in aK&&(l=aK[m.type])){for(q=0,p=l.length;q<p&&!m.immediatePropagationStopped;q++){l[q](m)}}return this},on:function(m,l,p){var n;aT(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(E(m)){for(n=0;n<m.length;n++){this.on(m[n],l,p)}return this}if(aj(m)){for(n in m){this.on(n,m[n],l)}return this}"wheel"===m&&(m=f);p=p?!0:!1;if(-1!==am(au,m)){m in this._iEvents?this._iEvents[m].push(l):this._iEvents[m]=[l]}else{if(this.selector){if(!aP[m]){for(aP[m]={selectors:[],contexts:[],listeners:[]},n=0;n<ac.length;n++){at.add(ac[n],m,k),at.add(ac[n],m,bw,!0)}}m=aP[m];for(n=m.selectors.length-1;0<=n&&(m.selectors[n]!==this.selector||m.contexts[n]!==this._context);n--){}-1===n&&(n=m.selectors.length,m.selectors.push(this.selector),m.contexts.push(this._context),m.listeners.push([]));m.listeners[n].push([l,p])}else{at.add(this._element,m,l,p)}}return this},off:function(x,v,t){var r;aT(x)&&-1!==x.search(" ")&&(x=x.trim().split(/ +/));if(E(x)){for(r=0;r<x.length;r++){this.off(x[r],v,t)}return this}if(aj(x)){for(var q in x){this.off(q,x[q],v)}return this}q=-1;t=t?!0:!1;"wheel"===x&&(x=f);if(-1!==am(au,x)){(t=this._iEvents[x])&&-1!==(q=am(t,v))&&this._iEvents[x].splice(q,1)}else{if(this.selector){var m=aP[x],p=!1;if(!m){return this}for(q=m.selectors.length-1;0<=q;q--){if(m.selectors[q]===this.selector&&m.contexts[q]===this._context){var n=m.listeners[q];for(r=n.length-1;0<=r;r--){var l=n[r][1];if(n[r][0]===v&&l===t){n.splice(r,1);n.length||(m.selectors.splice(q,1),m.contexts.splice(q,1),m.listeners.splice(q,1),at.remove(this._context,x,k),at.remove(this._context,x,bw,!0),m.selectors.length||(aP[x]=null));p=!0;break}}if(p){break}}}}else{at.remove(this._element,x,v,t)}}return this},set:function(m){aj(m)||(m={});this.options=ak({},a6.base);var l,r=["drag","drop","resize","gesture"],q=["draggable","dropzone","resizable","gesturable"],p=ak(ak({},a6.perAction),m[n]||{});for(l=0;l<r.length;l++){var n=r[l];this.options[n]=ak({},a6[n]);this.setPerAction(n,p);this[q[l]](m[n])}r="accept actionChecker allowFrom deltaSource dropChecker ignoreFrom origin preventDefault rectChecker styleCursor".split(" ");l=0;for(b=r.length;l<b;l++){if(q=r[l],this.options[q]=a6.base[q],q in m){this[q](m[q])}}return this},unset:function(){at.remove(this._element,"all");if(aT(this.selector)){for(var m in aP){for(var l=aP[m];0<l.selectors.length;){l.selectors[0]===this.selector&&l.contexts[0]===this._context&&(l.selectors.splice(0,1),l.contexts.splice(0,1),l.listeners.splice(0,1),l.selectors.length||(aP[m]=null));at.remove(this._context,m,k);at.remove(this._context,m,bw,!0);break}}}else{at.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="")}this.dropzone(!1);bc.splice(am(bc,this),1);return aw}};a8.prototype.snap=aU(a8.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping");a8.prototype.restrict=aU(a8.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction");a8.prototype.inertia=aU(a8.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia");a8.prototype.autoScroll=aU(a8.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll");a8.prototype.squareResize=aU(a8.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square");a8.prototype.accept=aU(a8.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead");a8.prototype.dropChecker=aU(a8.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead");a8.prototype.context=aU(a8.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead");aw.isSet=function(m,l){return -1!==bc.indexOfElement(m,l&&l.context)};aw.on=function(m,l,p){aT(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(E(m)){for(var n=0;n<m.length;n++){aw.on(m[n],l,p)}return aw}if(aj(m)){for(n in m){aw.on(n,m[n],l)}return aw}-1!==am(au,m)?aK[m]?aK[m].push(l):aK[m]=[l]:at.add(aO,m,l,p);return aw};aw.off=function(m,l,q){aT(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(E(m)){for(var p=0;p<m.length;p++){aw.off(m[p],l,q)}return aw}if(aj(m)){for(p in m){aw.off(p,m[p],l)}return aw}if(-1===am(au,m)){at.remove(aO,m,l,q)}else{var n;m in aK&&-1!==(n=am(aK[m],l))&&aK[m].splice(n,1)}return aw};aw.enableDragging=aU(function(l){return null!==l&&void 0!==l?(aM.drag=l,aw):aM.drag},"interact.enableDragging is deprecated and will soon be removed.");aw.enableResizing=aU(function(l){return null!==l&&void 0!==l?(aM.resize=l,aw):aM.resize},"interact.enableResizing is deprecated and will soon be removed.");aw.enableGesturing=aU(function(l){return null!==l&&void 0!==l?(aM.gesture=l,aw):aM.gesture},"interact.enableGesturing is deprecated and will soon be removed.");aw.eventTypes=au;aw.debug=function(){var l=ao[0]||new a;return{interactions:ao,target:l.target,dragging:l.dragging,resizing:l.resizing,gesturing:l.gesturing,prepared:l.prepared,matches:l.matches,matchElements:l.matchElements,prevCoords:l.prevCoords,startCoords:l.startCoords,pointerIds:l.pointerIds,pointers:l.pointers,addPointer:av.addPointer,removePointer:av.removePointer,recordPointer:av.recordPointer,snap:l.snapStatus,restrict:l.restrictStatus,inertia:l.inertiaStatus,downTime:l.downTimes[0],downEvent:l.downEvent,downPointer:l.downPointer,prevEvent:l.prevEvent,Interactable:a8,interactables:bc,pointerIsDown:l.pointerIsDown,defaultOptions:a6,defaultActionChecker:aX,actionCursors:bg,dragMove:av.dragMove,resizeMove:av.resizeMove,gestureMove:av.gestureMove,pointerUp:av.pointerUp,pointerDown:av.pointerDown,pointerMove:av.pointerMove,pointerHover:av.pointerHover,eventTypes:au,events:at,globalEvents:aK,delegatedEvents:aP,prefixedPropREs:a0}};aw.getPointerAverage=c;aw.getTouchBBox=bp;aw.getTouchDistance=a7;aw.getTouchAngle=aB;aw.getElementRect=aC;aw.getElementClientRect=h;aw.matchesSelector=aN;aw.closest=ag;aw.margin=aU(function(l){return aW(l)?(af=l,aw):af},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.");aw.supportsTouch=function(){return bl};aw.supportsPointerEvent=function(){return aA};aw.stop=function(m){for(var l=ao.length-1;0<=l;l--){ao[l].stop(m)}return aw};aw.dynamicDrop=function(l){return a1(l)?(aD=l,aw):aD};aw.pointerMoveTolerance=function(l){return aW(l)?(ai=l,this):ai};aw.maxInteractions=function(l){return aW(l)?(s=l,this):s};aw.createSnapGrid=function(l){return function(m,q){var p=0,n=0;aj(l.offset)&&(p=l.offset.x,n=l.offset.y);return{x:Math.round((m-p)/l.x)*l.x+p,y:Math.round((q-n)/l.y)*l.y+n,range:l.range}}};ax(aO);bf in Element.prototype&&bd(Element.prototype[bf])||(g=function(m,l,p){p=p||m.parentNode.querySelectorAll(l);l=0;for(var n=p.length;l<n;l++){if(p[l]===m){return !0}}return !1});(function(){for(var m=0,l=["ms","moz","webkit","o"],n=0;n<l.length&&!a3.requestAnimationFrame;++n){aL=a3[l[n]+"RequestAnimationFrame"],aH=a3[l[n]+"CancelAnimationFrame"]||a3[l[n]+"CancelRequestAnimationFrame"]}aL||(aL=function(p){var t=(new Date).getTime(),q=Math.max(0,16-(t-m)),r=setTimeout(function(){p(t+q)},q);m=t+q;return r});aH||(aH=function(p){clearTimeout(p)})})();"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=aw),exports.interact=aw):"function"===typeof define&&define.amd?define("interact",function(){return aw}):a3.interact=aw}})("undefined"===typeof window?void 0:window);var NUMBERS="0123456789";var LOWERCASE="abcdefghijklmnopqrstuvwxyz";var UPPERCASE="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function ValidString(c,e){if(c==""){return false}for(i=0;i<c.length;i++){if(e.indexOf(c.charAt(i),0)==-1){return false}}return true}function IsNumber(b){return ValidString(b,NUMBERS)}function IsLower(b){return ValidString(b,LOWERCASE)}function IsUpper(b){return ValidString(b,UPPERCASE)}function IsAlpha(b){return ValidString(b,LOWERCASE+UPPERCASE)}function IsAlphanum(b){return ValidString(b,LOWERCASE+UPPERCASE+NUMBERS)}function EncodeEntities(b){if(!b){return""}return b.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(e){var f=e.charCodeAt(0);var a=e.charCodeAt(1);return"&#"+(((f-55296)*1024)+(a-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Merge(){var j={};for(var k=0,g=arguments.length;k<g;k++){var h=arguments[k];for(var f in h){j[f]=h[f]}}return j}function DeepCopy(g){var e,f,h;e=Array.isArray(g)?[]:{};for(h in g){f=g[h];e[h]=(typeof f==="object")?DeepCopy(f):f}return e}function PrintArray(u,y){var t=[];y=y||0;var r=[];for(var w=0;w<y+1;w++){r.push("\t")}r=r.join("");if(typeof(u)=="object"){var x=0;for(var p in u){if(p.length>x){x=p.length}}for(var p in u){var q=u[p];if(typeof(q)=="object"){t.push(r+p+":");t.push(PrintArray(q,y+1))}else{var j=p.length;var o=Math.floor((x-j)/6)+1;var s=[];for(var v=0;v<o;v++){s.push("\t")}s=s.join("");t.push(r+p+":"+s+q)}}}else{t.push(r+u+"\t("+typeof(u)+")")}return t.join("\n")}function PrintTimestamp(l,n){if(l){var p=new Date(l*1000)}else{var p=new Date()}var o=p.getFullYear();var q=p.getMonth()+1;q=q<10?"0"+q:q;var m=p.getDate();m=m<10?"0"+m:m;if(n){return o+"-"+q+"-"+m}var r=p.getHours();r=r<10?"0"+r:r;var s=p.getMinutes();s=s<10?"0"+s:s;var t=p.getSeconds();t=t<10?"0"+t:t;return o+"-"+q+"-"+m+" "+r+":"+s+":"+t}function SecondsToTime(h){var f=Math.floor(h/3600);f=f<10?"0"+f:f;var e=Math.floor((h%3600)/60);e=e<10?"0"+e:e;var g=h%60;g=g<10?"0"+g:g;return f+":"+e+":"+g}function GMTToLocal(g){if(!g){var h=new Date();var e=h.toISOString().substr(0,19);var g=h.toTimeString();return e.substr(0,11)+g.substr(0,8)+e.substr(19)}g=g.replace(" ","T");var h=new Date();var j=new Date(g);if(isNaN(j.getTime())){throw new Error("Invalid date: "+g)}j.setMinutes(j.getMinutes()+h.getTimezoneOffset());return j.toISOString().substr(0,19)}function LocalToGMT(f){var g=new Date();if(!f){var e=new Date(g.toISOString().substr(0,19).replace(" ","T")+"Z");e.setMinutes(e.getMinutes()-g.getTimezoneOffset());return e.toISOString().substr(0,19)}f=f.replace(" ","T");var e=new Date(f+"Z");if(isNaN(e.getTime())){throw new Error("Invalid date: "+f)}e.setMinutes(e.getMinutes()-g.getTimezoneOffset());return e.toISOString().substr(0,19)}function DisplayTime(b){return b.substr(0,19).replace("T"," ")}function Keys(g){var e=[];for(var f in g){e.push(f)}return e}function Values(g){var f=[];for(var e in g){switch(typeof g[e]){case"function":continue}f.push(g[e])}return f}function IsFunc(b){return typeof b==="function"}function IsEmpty(c){if(typeof c==="undefined"){return true}if(Array.isArray(c)){if(c.length==0){return true}}else{for(var e in c){if(c.hasOwnProperty(e)){return false}}return true}return false}function NestObjects(){var g=arguments[0];for(var h=1,f=arguments.length;h<f;h++){var e=arguments[h];if(IsEmpty(g[e])){g[e]={}}g=g[e]}return g}function basename(b){return b.replace(/\\/g,"/").replace(/.*\//,"")}function dirname(b){return b.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}String.prototype.startswith=function(b){return this.indexOf(b)==0};String.prototype.endswith=function(b){return this.indexOf(b,this.length-b.length)!==-1};String.prototype.replaceAll=function(e,f,g){return this.replace(new RegExp(e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(g?"gi":"g")),(typeof(f)=="string")?f.replace(/\$/g,"$$$$"):f)};String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})};Array.prototype.remove=function(){var f,h=arguments,a=h.length,g;while(a&&this.length){f=h[--a];while((g=this.indexOf(f))!==-1){this.splice(g,1)}}return this};Array.prototype.contains=function(g){var f=this.length;for(var e=0;e<this.length;e++){if(this[e]==g){return true}}return false};Array.prototype.addtext=function(e,c){c=c||"\n";this.push(e.join(c))};function Shuffle(a){var j=a.length,k,g,h;if(j==0){return false}while(--j){k=Math.floor(Math.random()*(j+1));g=a[j];h=a[k];a[j]=h;a[k]=g}return a}function strcmp(b,f,a){if(a){b=b.toUpperCase();f=f.toUpperCase()}if(b>f){return 1}if(f>b){return -1}return 0}function RandInt(c,e){return Math.floor(Math.random()*(e-c))+c}function Range(j,g,h){var f=Array();for(var k=j;k<g;k+=h){f.push(k)}return f}function IsString(b){return(typeof b=="string"||b instanceof String)}function IsNum(b){return typeof b=="number"}function IsArray(b){return(b instanceof Array)||(Object.prototype.toString.apply(b)==="[object Array]")}function IsObject(b){return b===Object(b)}function isIE(){var b=navigator.userAgent.toLowerCase();return(b.indexOf("msie")!=-1)?parseInt(b.split("msie")[1]):false}(function(){var a=/\{\{|\}\}|\{(\d*)((?:\.(?:\w+)|\[(?:[^\]]*)\])*)(?::(?:([^{}]?)([<>=^]))?([-+\x20])?(\#)?(0)?(\d*)(,)?(?:\.(\d+))?([bcdeEfFgGosxX%])?)?\}/g;function b(e){var f=-1;var j=Array.prototype.slice.call(arguments,1);return e.replace(a,function c(L,y,Q,m,g,R,q,I,C,H,t,A){function S(n,o){var s="";while(o>0){if(o&1){s+=n}o>>=1;n+=n}return s}var D;var ad;var h;var k=new ReferenceError(L+" is "+D+".");var J={b:function O(){if(q){q="0b"}return q+D.toString(16)},c:function B(){return String.fromCharCode(20)},d:function z(){return D},e:function v(){return D.toExponential(t||6)},E:function M(){return D.toExponential(t||6).toUpperCase()},f:function p(){return D.toFixed(t||6)},F:function K(){return J.f()},g:function r(){if(D===0){return 1/D===Infinity?"0":"-0"}if(t===0){t=1}var n=Math.abs(D);if(0.0001<=n&&n<Math.pow(10,t||6)){return +J.f()}else{return D.toExponential(t)}},G:function l(){return J.g().toUpperCase()},n:function af(){return J.g()},o:function ae(){if(q){q="0o"}return q+D.toString(8)},s:function N(){return(""+D).substring(0,t)},x:function U(){if(q){q="0x"}return q+D.toString(16)},X:function w(){if(q){q="0x"}return q+D.toString(16).toUpperCase()},"%":function u(){D*=100;return J.f()+"%"}};if(L==="{{"){return"{"}if(L==="}}"){return"}"}if(I){m=m||"0";g=g||"="}y=y||++f;D=j[y];Q.replace(/\.(\w+)|\[([^\]]*)\]/g,function(o,n,s){if(D==null){throw k}D=D[n||s]});if(D==null){throw k}if(!D.toExponential){if(A&&A!="s"){throw new TypeError(L+" used on "+D)}A="s";g=g||"<"}if(D==null){throw new TypeError(L+" is "+D)}ad=""+J[A||"g"]();if(H){h=ad.split(".");h[0]=h[0].replace(/(?=\d(?:\d{3})+$)/g,",");ad=h.join(".")}if(C){m=m||" ";switch(g){case"<":ad+=S(m,C-ad.length);break;case"=":switch(R){case"+":case" ":if(ad.charAt(0)==="-"){R="-";ad=ad.substring(1)}break;default:if(ad.charAt(0)!=="-"){R=""}break}ad=R+S(m,C-ad.length-(""+R).length)+ad;break;case"^":C-=ad.length;ad=S(m,Math.floor(C/2))+ad+S(m,Math.ceil(C/2));break;default:ad=S(m,C-ad.length)+ad;break}}return ad})}if(typeof module!=="undefined"){module.exports=b}else{this.format=b}}.call(this));function ToParams(k){var h=[];for(var j in k){if(k.hasOwnProperty(j)){var f=j,g=k[j];h.push(typeof g=="object"?ToParams(g,f):encodeURIComponent(f)+"="+encodeURIComponent(g))}}return h.join("&")}function DB(){this.intransaction=false;this.commands=[]}DB.prototype.Begin=function(){this.intransaction=true;return this};DB.prototype.Commit=function(){if(!this.commands.length){return}var b=_.promise();P.API("db/run",{commands:this.commands},function(a){b.fire(a.error?false:true,a)},{timeout:300,handleerror:0});this.intransaction=false;this.commands=[];return b};DB.prototype.Load=function(f,j,h,g,k){g=g||"*";k=k||[];this.commands.push({result:f,command:"load",model:j,ids:h,fields:g,methods:k});if(!this.intransaction){return this.Commit()}return this};DB.prototype.LoadMany=function(e,h,g,f){f=f||"*";this.commands.push({result:e,command:"loadmany",model:h,ids:g,fields:f});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Find=function(h,m,l,g){var j=null;var k=0;var g=g||{};start=g.start||0;limit=g.limit||100;orderby=g.orderby||"";fields=g.fields||"*";methods=g.methods||[];this.commands.push({result:h,command:"find",model:m,cond:l,start:start,limit:limit,orderby:orderby,fields:fields});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Update=function(f,e,h,g){this.commands.push({result:f,command:"update",model:e,ids:h,data:g});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Save=function(f,e,g){this.commands.push({result:f,command:"save",model:e,data:g});if(!this.intransaction){return this.Commit()}return this};DB.prototype.SaveMany=function(f,e,g){this.commands.push({result:f,command:"savemany",model:e,data:g});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Delete=function(f,g,e){this.commands.push({command:"delete",model:f,ids:g,cond:e});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Link=function(k,n,m,o,h,j,l){h=h||0;j=j||0;l=l||"";this.commands.push({command:"link",model1:k,id1:n,model2:m,id2:o,linktype:h,num:j,comment:l});if(!this.intransaction){return this.Commit()}return this};DB.prototype.LinkArray=function(k,n,m,o,h,j,l){h=h||0;j=j||0;l=l||"";this.commands.push({command:"linkarray",model1:k,id1:n,model2:m,id2:o,linktype:h,num:j,comment:l});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Unlink=function(h,k,j,f,g){this.commands.push({command:"unlink",model1:h,id1:k,model2:j,id2:f,linktype:g});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Linked=function(j,k,n,l,o,m,h){o=o||0;m=m||"";h=h||[];this.commands.push({result:j,command:"linked",model1:k,id1:n,model2:l,linktype:o,orderby:m,methods:h});if(!this.intransaction){return this.Commit()}return this};DB.prototype.UnlinkMany=function(g,e,h,f){f=f||0;this.commands.push({command:"unlinkmany",model1:g,id1:e,model2:h,linktype:f});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Query=function(e,c){this.commands.push({result:e,command:"query",query:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Eval=function(e,c){this.commands.push({result:e,command:"eval",code:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Fields=function(e,c){this.commands.push({result:e,command:"fields",model:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.ListTypes=function(b){this.commands.push({result:b,command:"listtypes"});if(!this.intransaction){return this.Commit()}return this};DB.prototype.SaveTranslation=function(f,h,g,e){this.commands.push({result:f,command:"savetranslation",model:h,ids:g,translations:e});if(!this.intransaction){return this.Commit()}return this};var _db=new DB();LBUTTON=0;RBUTTON=1;MBUTTON=2;P={Init:function(){this.lang=1;this.userid=0;this.wallpaper="blue";this.texttheme="dark";this.media={};this.events={};this.messageboxids=[];this.features=[];this.possumbot="possum";this.quickfuncs=[];this.istouch=0;this.mousex=0;this.mousey=0;this.currenty=0;this.holdpos=0;this.ignoreup=0;this.lastclicktime=0;this.emsize=0;this.firstview=1;this.screensize="small";this.currenturl="";this.viewportwidth=0;this.viewportheight=0;this.dontrestorecontent=[];this.timeoffset=new Date().getTimezoneOffset();this.ischrome=/\bChrome\b/.test(navigator.userAgent);this.isfirefox=/\bFirefox\b/.test(navigator.userAgent);this.issafari=/\bSafari\b/.test(navigator.userAgent);this.isedge=/\bEdge\b/.test(navigator.userAgent);this.useadvanced=this.ischrome||this.isfirefox||this.issafari||this.isedge;this.preloads={};this.screenorientation=window.innerWidth>window.innerHeight?"landscape":"portrait";this.currentpermissions="";this.inphoneapp=(typeof JSBridge!="undefined");this.onuploadfinished=0;this.layerstack=[]},URL:function(e,c){c=c||P.currentapp;return P.baseurl+c+"/"+e},APIURL:function(e,c){c=c||P.currentapp;return P.baseurl+"a/"+c+"/"+e},DataURL:function(e,c){c=c||P.currentapp;return P.baseurl+"d/"+c+"/"+e},ImageURL:function(e,c){c=c||P.currentapp;return P.baseurl+"i/"+c+"/"+e},SoundURL:function(e,c){c=c||P.currentapp;return P.baseurl+"s/"+c+"/"+e},CSSURL:function(e,c){c=c||P.currentapp;return P.baseurl+"c/"+c+"/"+e+".css"},JSURL:function(e,c){c=c||P.currentapp;return P.baseurl+"j/"+c+"/"+e+".js"},Target:function(c){c=c||window.event;var e=c.target||c.srcElement;return $(e)},Selected:function(e){var c=$$(e);return c.options[c.selectedIndex]},Debug:function(b){$$(".DebugMessages").innerHTML+=b+"\n"},CancelBubble:function(b){b=b||window.event;if(b.stopPropagation){b.preventDefault();b.stopPropagation()}else{b.cancelBubble=true}},HTML:function(f,e){var g=$$(f);if(g){g.innerHTML=e.join("\n")}},CodeDir:function(h){var f=[];for(var j=0,g=h.length;j<g;j+=3){f.push(h.substr(j,3))}return f.join("/")},DoneTyping:function(h,k,j){j=j||1000;var g=$(h);var l=g[0];g.on("|change |keydown |paste |input",function(a){if(l.typingtimeoutid){clearTimeout(l.typingtimeoutid)}l.typingtimeoutid=setTimeout(function(){l.typingtimeoutid=0;k(g)},j)});g.on("|blur",function(a){if(l.typingtimeoutid){clearTimeout(l.typingtimeoutid);l.typingtimeoutid=0;k(g)}})},OnClick:function(j,l,n,h,m){var k=interact(j);if(n){k.on("tap",function(a){if(n&&(a.button==l||a.button==undefined)){if(!P.holdpos||(Math.abs(a.screenX-P.holdpos.x)>32||Math.abs(a.screenY-P.holdpos.y)>32)){n(a)}a.preventDefault();P.holdpos=0}})}if(h){k.on("doubletap",function(a){if(h&&(a.button==l||a.button==undefined)){h(a);a.preventDefault()}})}if(m){k.on("hold",function(a){if(m&&(a.button==l||a.button==undefined)){m(a);a.preventDefault();P.holdpos={x:a.screenX,y:a.screenY}}})}},AddHandler:function(c,e){if(!this.events[c]){this.events[c]=[]}this.events[c].push(e)},ClearHandlers:function(b){this.events[b]=[]},Loading:function(e){var c=$(e);if(c.length){c.ht(["<div class=Center>",'<img style="height: 1.3em;" src="'+this.baseurl+'i/h/loading.gif">',"<div class=Cleared></div>","</div>"].join("\n"));P.ScrollTo(c)}},ScrollTo:function(b){setTimeout(function(){var f=$(b);if(f.length){var g=P.AbsoluteRect(f);var a=g.top<window.pageYOffset;if(a||g.bottom>window.pageYOffset+window.innerHeight){f[0].scrollIntoView({behavior:"smooth",block:a?"start":"end"})}}},200)},AbsoluteRect:function(g){var e=$$(g);if(!e){return 0}var f=e.getBoundingClientRect();return{left:f.left+window.pageXOffset,top:f.top+window.pageYOffset,right:f.right+window.pageXOffset,bottom:f.bottom+window.pageYOffset,width:f.width,height:f.height}},EMSize:function(b){b=b||document.body;return Number(getComputedStyle(b,"").fontSize.match(/(\d*(\.\d*)?)px/)[1])},AutoWidth:function(){$(".AutoWidth").each(function(k,u,z){k=$(k);var r=k.up();var p=r.get("$width",true);var q=P.EMSize($$(r));var y=k.get("%autowidth",true);var w=Math.round(p/(q*y));var s=0;var x=k.get(["$marginLeft","$paddingLeft","$paddingRight","$marginRight"],true);for(var v in x){if(x[v]){s+=x[v]}}if(!w){w=1}var t=Math.floor((p/w)-s);k.set("$width",t+"px");if(k.get("%autosquare")){k.set("$height",t+"px")}})},SameWidth:function(x,A,r){var B=$(x);if(!B.length){return}var k=$(B[0]);var s=k.up();var q=s.get("$width",true);var v=P.EMSize($$(s));var y=Math.round(q/(A*v));var t=0;var z=k.get(["$marginLeft","$paddingLeft","$paddingRight","$marginRight"],true);for(var w in z){if(z[w]){t+=z[w]}}if(!y){y=1}var u=Math.floor((q/y)-t);B.set("$width",u+"px");if(r){B.set("$height",Math.floor(u*r)+"px")}return u+"px"},SameMaxWidth:function(g){var h=0;var j=$(g);if(!j.length){return}j.each(function(a,e,c){var b=parseFloat($$(a).clientWidth);if(b>h){h=b}});var l=P.EMSize($$(j[0]));var k=Math.round(((h/l)+0.00001)*100)/100;j.set("$width",k+"em")},SameMaxHeight:function(h){var j=0;var k=$(h);if(!k.length){return}k.each(function(a,c,b){var e=parseFloat($$(a).clientHeight);if(e>j){j=e}});var g=P.EMSize($$(k[0]));var l=Math.round(((j/g)+0.00001)*100)/100;k.set("$height",l+"em")},Trace:function(){StackTrace.get().then(function(e){var c=e.map(function(a){return a.toString()}).join("\n");console.log(c)})},Popup:function(p,m){var r={"$width":"16em","$color":"black","$backgroundColor":"transparent","$zIndex":1000};switch(P.screensize){case"medium":r.width="22em";break;case"large":r.width="30em";break}m=Merge(r,m);var t=m.popupclass?m.popupclass:0;if(!t){for(;;){t="Popup"+RandInt(1,999999999);if(!$("."+t).length){break}}}$("body").add(HTML('<div class="Popup '+t+'" style="position: absolute; left: 0; top: 0;"></div>'));var v=$("."+t);v.fill(p);v.set(m);var n=P.ViewPortRect();var u=v[0].getBoundingClientRect();var s=0;var o=0;if(m.parent){var q=P.AbsoluteRect(m.parent);switch(m.position){case"left":s=q.left-u.width;o=q.top;break;case"top":s=q.left;o=q.top-u.height;break;case"right":s=q.right;o=q.top;break;default:s=q.left;o=q.bottom}}else{var q={left:P.mousex,top:P.mousey,width:0,height:0};s=m["$left"]?parseInt(m["$left"]):n.width/2-u.width/2+n.left;o=m["$top"]?parseInt(m["$top"]):n.height/2-u.height/2+n.top}if(s+u.width>n.right){s=n.right-u.width-P.emsize}if(o+u.height>n.bottom){o=n.bottom-u.height}if(s<n.left){s=n.left}if(o<n.top){o=n.top}v.set({"$left":q.left+"px","$top":q.top+"px","$width":q.width+"px","$height":q.height+"px"}).show().animate({"$left":s+"px","$top":o+"px","$width":m["$width"],"$height":"auto"},300);if(m.closeonmouseout){setTimeout(function(){P.mousex=s+1;P.mousey=o+1;P.ClosePopupOnMouseOut([m.parent,"."+t])},500)}P.AddLayer(t);return"."+t},ClosePopupOnMouseOut:function(l,j){var n=0;for(var m=0,o=l.length;m<o;m++){var p=P.AbsoluteRect(l[m]);if(P.InRect(P.mousex,P.mousey,p)){n=1;break}}if(!n){var k=l[l.length-1];P.RemoveLayer(k);$(k).remove();if(j){j()}return}setTimeout(function(){P.ClosePopupOnMouseOut(l,j)},500)},CloseThisPopup:function(e){var c=$(e);if(c.is(".Popup")){P.ClosePopup(c)}else{P.ClosePopup(c.up("div.Popup"))}},MessageBox:function(k,l,g){if(!g){g={}}if(!g.popupclass){var j=RandInt(1,99999999);while(P.messageboxids.indexOf(j)!=-1){j=RandInt(1,99999999)}g.popupclass="MsgBox"+j}var h=['<div class="Pad50 whiteb Raised">',];if(!IsArray(k)){k=[k]}h.addtext(k);h.push("<div class=MessageBoxBar></div></div>");P.Popup(HTML(h.join("\n")),g);if(!l){l=[[T[1],function(){P.CloseThisPopup("."+g.popupclass+" .MessageBoxBar")}]]}P.MakeButtonBar("."+g.popupclass+" .MessageBoxBar",l)},ErrorPopup:function(c,e){P.MessageBox(['<div class="Pad100 Error">','<img src="/i/h/icons/caution.png" class="FloatLeft Padded">',"<span class=ErrorPopupMsg>"+c+"</span>","</div>","<br class=Cleared>"],[[T[1],function(){P.CloseThisPopup(".ErrorPopupMsg")}]],Merge({popupclass:"ErrorPopup"},e))},ClosePopup:function(b){b=b||".Popup";$(b).animate({"$left":"0px","$top":"0px","$width":"0px","$height":"0px"},300);setTimeout(function(){var a=$(b);if(a.length){a.remove()}},300)},EditPopup:function(k,W,ag){ag=ag||{};var Y={"$backgroundColor":"white",popupclass:"EditPopup"};var ah=ag.formdiv;var aj=ah?ah+"Form":"EditPopupForm";var l=ag.cancelfunc;var ak=ag.fullscreen;var ae=ag.gobuttontext;var L=ag.cancelbuttontext;var ac=ag.extrabuttons||"";var N=ah?(ah+"Results"):"EditPopupResults";delete ag.formdiv;delete ag.cancelfunc;delete ag.fullscreen;delete ag.gobuttontext;delete ag.cancelbuttontext;delete ag.extrabuttons;ag=Merge(Y,ag);var ad=['<form class="'+aj+'">'];if(P.screensize!="small"){ad.push('<table class="Width100 EditPopupTable"><tbody>');if(!ag["$width"]){ag["$width"]="40em"}}for(var M=0,U=k.length;M<U;M++){if(!k[M]){continue}var j=k[M][0];var m=k[M][1];var X=k[M][2];var al=k[M][3];var af=k[M][4];var ab=k[M][5];if(!ab){ab=""}if(!X){X=""}if(!af){af=""}switch(m){case"select":var R=[];if(IsArray(af)){for(var O=0,aa=af.length;O<aa;O++){var S=af[O];R.push("<option "+((X==S)?"selected":"")+">"+S+"</option>")}}else{for(var Q in af){var S=af[Q];R.push('<option value="'+S+'" '+((X==S)?"selected":"")+">"+Q+"</option>")}}editfield='<select name="'+j+'" class="'+j+'" '+ab+">"+R.join("\n")+"</select>";break;case"multitext":editfield='<div class=FlexInput data-name="'+j+'" class="'+j+'" data-value="'+EncodeEntities(X.toString())+'" placeholder="'+EncodeEntities(af)+'" data-attrs="'+EncodeEntities(ab)+'">';break;case"int":editfield='<input type=number name="'+j+'" class="'+j+'" value="'+X+'" placeholder="'+EncodeEntities(af)+'" '+ab+">";break;case"float":editfield='<input type=number step=any name="'+j+'" class="'+j+'" value="'+X+'" placeholder="'+EncodeEntities(af)+'"'+ab+">";break;case"datetime-local":editfield='<input type=datetime-local name="'+j+'" class="'+j+'" value="'+GMTToLocal(X)+'" placeholder="'+EncodeEntities(af)+'"'+ab+">";break;case"custom":editfield='<input type=hidden name="'+j+'" class="'+j+'" value="'+EncodeEntities(X.toString())+'"'+ab+'><div class="FormRow '+af+'"></div>';break;default:editfield="<input type="+m+' name="'+j+'" class="'+j+'" value="'+EncodeEntities(X.toString())+'" placeholder="'+EncodeEntities(af)+'"'+ab+">"}if(m=="hidden"){ad.push(editfield)}else{if(P.screensize=="small"){ad=ad.concat(['<div class="'+j+'Row">',"<label>"+al+"</label>",editfield,"</div>"])}else{ad=ad.concat(['<tr class="'+j+'Row">',"<th class=Width8>"+al+"</th>","<td>"+editfield+"</td>","</tr>"])}}}if(P.screensize!="small"){ad.push("</tbody></table><br>")}ad.addtext(["<br class=Cleared>","<div class=ButtonBar>",'<a class="ConfirmButton Color3"><img class="LineHeight BusyIcon">'+(ae?ae:T[47])+"</a>",'<a class="Spacer Width2"></a>',ah?'<a class="ResetButton Color2"><img class="LineHeight BusyIcon">'+T[39]+"</a>":"",'<a class="CancelButton Color1"><img class="LineHeight BusyIcon">'+(L?L:T[1])+"</a>",ac,"</div>","</form>",'<div class="'+N+'"></div>',"<div class=Cleared></div>"]);if(ah){P.HTML("."+ah,ad);var V="."+ah+" .ResetButton";$(V).on("click",P.Busy(V,function(){$$("."+aj).reset()}));if(l){var v="."+ah+" .CancelButton";$(v).on("click",P.Busy(v,function(){l("."+ah)}))}}else{if(ak||P.screensize=="small"){$(".FullScreen").set("+dblueg").ht(ad.join("\n")).show();var v=".FullScreen .CancelButton";$(v).on("click",P.Busy(v,function(){$(".FullScreen").hide();if(l){l(".FullScreen")}}));ah="FullScreen"}else{ah=P.Popup(HTML('<div class="whiteb Pad50 Raised">'+ad.join("\n")+"</div>"),ag);var v=ah+" .CancelButton";$(v).on("click",P.Busy(v,function(){$(ah).remove();if(l){l(ah)}}))}}var Z="."+aj+" .ConfirmButton";$(Z).on("click",P.Busy(Z,function(){if(W("."+ah,P.FormToArray("."+aj),$("."+N))){if(ah=="FullScreen"){$(".FullScreen").hide()}else{if(ah.indexOf("#Popup")!=-1){P.CloseThisPopup(this)}}}}));$("."+aj).on("submit",function(a){if(a.preventDefault){a.preventDefault()}});P.FlexInput();var ai=$("."+aj+" input");if(ai.length){ai[0].focus()}else{ai=$("."+aj+" textarea");if(ai.length){ai[0].focus()}}if(P.screensize!="small"){$(".EditPopupTable select").set({"$position":"relative","$top":"1em"});$(".EditPopupTable th").set({"$position":"relative","$top":"0.5em"});$(".EditPopupTable input").set({"$margin":"0px","$width":"110%"});$(".EditPopupTable .FlexInput").set({"$marginTop":"1em","$border":"0.01em solid transparent"})}},EditThis:function(j,f,g){j=$(j);if(g){g=[["newvalue"].concat(g)]}else{g=[["newvalue","multitext",h,"Change text"]]}var h=j.text();P.EditPopup(g,function(){var a=$(".newvalue").get("value");j.fill(a);if(f){f(j,a)}return true},{parent:j,popupclass:"EditThisPopup"})},FlagToToggle:function(h,f,g){var j=" data-toggled=";if(h&f){return j+"on"}if(h&g){return j+"off"}return j+"unset"},EditPermissionPopup:function(e,c){P.HTML(".FullScreenContent",['<div class="Pad50 EditPermissions">',"<h2>Editing Permissions for "+e+"("+JSON.stringify(c)+")</h2>","<div class=PermissionResults></div>","<div class=ButtonBar>",'<a class="ConfirmButton Color3" onclick="P.SavePermissions()">'+T[34]+"</a>",'<a class="AddButton Color2" onclick="P.AddPermissionPopup()">'+T[21]+"</a>",'<a class="CancelButton Color1" onclick="$(\'.FullScreen\').hide();">'+T[1]+"</a>","</div>","<div class=Cleared></div>","<div class=SavePermissionResults></div>","</div>"]);$(".FullScreen").set("+dblueg").show();P.LoadingAPI(".PermissionResults","permissions/get",{model:e,objid:c,},function(a,b){a.item.model=e;a.item.ids=c;P.currentpermissions=a.item;P.DisplayPermissions()})},DisplayPermissions:function(){var o=$(".PermissionResults");if(!P.currentpermissions){o.ht("No permissions found");return}var n=P.currentpermissions;var r=['<table class="Width100 Permissions">',"<tr data-type=owner>","<th>Owner</th>",'<td colspan=7 class="greeng Owner HoverHighlight" data-objid='+n.owner+">"+n.ownername+"</td>","</tr>","<tr data-type=defaults>","<th>Defaults</th>","<td class=ToggleButton"+P.FlagToToggle(n.access,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(n.access,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(n.access,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(n.access,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(n.access,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(n.access,4096,8192)+">View All</td>","<td></td>","</tr>","<tr data-type=header class=usersheader>","<th colspan=7>Users</th>","</tr>"];var k=n.users.length;if(!k){r.push("<tr data-type=none><td colspan=7>No users added.</td></tr>")}else{for(var p=0,k=n.users.length;p<k;p++){var q=n.users[p];var l=q.access;r.addtext(["<tr data-type=user data-objid="+q.id+">","<th>"+q.name+"</th>","<td class=ToggleButton"+P.FlagToToggle(l,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(l,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(l,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(l,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(l,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(l,4096,8192)+">View All</td>",'<td class=Color1 onclick="P.DeletePermissions(this)">Delete</td>',"</tr>"])}}r.addtext(["<tr data-type=header class=groupsheader>","<th colspan=7>Groups</th>","</tr>"]);if(!k){r.push("<tr data-type=none><td colspan=7>No groups added.</td></tr>")}else{for(var p=0,k=n.groups.length;p<k;p++){var m=n.groups[p];var l=m.access;r.addtext(["<tr data-type=user data-objid="+m.id+">","<th>"+m.name+"</th>","<td class=ToggleButton"+P.FlagToToggle(l,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(l,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(l,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(l,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(l,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(l,4096,8192)+">View All</td>",'<td class=Color1 onclick="P.DeletePermissions(this)">Delete</td>',"</tr>"])}}r.push("</table>");P.HTML(o,r);P.MakeToggleButtons(".EditPermissions .ToggleButton",1);P.OnClick(".Permissions .Owner",LBUTTON,P.ChangeOwnerPopup)},DeletePermissions:function(p){var o=$(p).up("tr");var e=parseInt(o.get("%objid"));var t=$("th",o,1).text();var l=P.currentpermissions;switch(o.get("%type")){case"user":for(var q=0,s=l.users.length;q<s;q++){var r=l.users[q];if((e&&r.id==e)||r.name==t){P.currentpermissions.users.splice(q,1);break}}break;case"groups":for(var q=0,s=l.groups.length;q<s;q++){var n=l.groups[q];if((e&&n.id==e)||n.name==t){P.currentpermissions.groups.splice(q,1);break}}break}P.DisplayPermissions()},ChangeOwner:function(){var b=$$(".newowner").value;$(".Permissions .Owner").set("%objid",0).fill(b);P.currentpermissions.owner=0;P.currentpermissions.ownername=b;P.ClosePopup(".ChangeOwnerPopup");return true},ChangeOwnerPopup:function(){P.EditPopup([["newowner","text","",T[53]]],P.ChangeOwner,{parent:".Permissions .Owner",cancelfunc:function(b){P.CloseThisPopup(b)},popupclass:"ChangeOwnerPopup"});P.OnEnter(".newowner",P.ChangeOwner)},AddPermissionPopup:function(e,c){P.Popup(HTML(['<div class="Pad50 whiteb AddPermission">',"<div>Type of permissions to add:</div>",'<div class="Radio AddTypeSelect">',"<input type=text value=users class=addtype>","<div data-value=users>User</div>","<div data-value=groups>Group</div>","</div>","<br class=Cleared><br>","<div>","Name or phone to add:","</div>","<div>","<input type=text class=addid>","</div>","<div class=ButtonBar>",'<a class="ConfirmButton Color3" onclick="P.AddPermission()">'+T[21]+"</a>",'<a class="Spacer Width400"></>','<a class="CancelButton Color1" onclick="P.CloseThisPopup(this);">'+T[1]+"</a>","</div>","<div class=Cleared></div>","</div>"].join("\n")),{popupclass:"AddPermissionPopup"});P.MakeRadioButtons(".AddTypeSelect");P.OnEnter(".addid",P.AddPermission)},AddPermission:function(){P.currentpermissions[$$(".addtype").value].push({id:0,name:$$(".addid").value,access:0});P.DisplayPermissions();P.ClosePopup(".AddPermissionPopup")},RowToAccess:function(c){var e=0;$("td",c,1).each(function(b,g){var a=$(b).get("%toggled");switch(a){case"on":switch(g){case 0:e|=1;break;case 1:e|=64;break;case 2:e|=4;break;case 3:e|=16;break;case 4:e|=256;break;case 5:e|=4096;break}break;case"off":switch(g){case 0:e|=2;break;case 1:e|=128;break;case 2:e|=8;break;case 3:e|=32;break;case 4:e|=512;break;case 5:e|=8192;break}break}});return e},SavePermissions:function(){var b={owner:$(".Owner").get("%objid"),ownername:$(".Owner").text(),users:[],groups:[],model:P.currentpermissions.model,objid:P.currentpermissions.ids};$(".Permissions tr").each(function(a){a=$(a);switch(a.get("%type")){case"user":b.users.push({id:a.get("%objid"),name:$("th",a,1).text(),access:P.RowToAccess(a)});break;case"group":b.groups.push({id:a.get("%objid"),name:$("th",a,1).text(),access:P.RowToAccess(a)});break;case"owner":var e=$("td",a,1);b.owner=e.get("%objid");b.ownername=e.text();break;case"defaults":b.access=P.RowToAccess(a);break}});P.LoadingAPI(".SavePermissionResults","permissions/set",b,function(){$(".FullScreen").hide()},{timeout:600})},Icon:function(b){return'<img class=LineHeight src="'+P.IconURL(b)+'">'},IconURL:function(b){return P.baseurl+"i/h/svg/"+b+".svg"},IconTD:function(c,e){return'<td class="Color'+e+' Center"><img class=LineHeight src="'+P.IconURL(c)+'"></td>'},Tooltip:function(f,g,e){e=e||1000;$(f).onOver(function(c,j){var b=$(this);if(c){b.set("%tooltiptimer",setTimeout(function(){var h=P.Popup(HTML(g(b)),{parent:b,position:"top",closeonmouseout:1});$(h).set("+Tooltip")},e))}else{var a=b.get("%tooltiptimer");if(a){clearTimeout(a);b.set("%tooltiptimer","")}}})},MakeButtonBar:function(l,m){var q=[];var p=1;var n=0;var r="";for(var o=0,k=m.length;o<k;o++){n=m[o];if(n[1]=="custom"){q.push(n[0]);continue}if(n.length>2&&n[2]){p=n[2]}r=(n.length>3)?n[3]:"";q.push('<a class="Color'+p+" Button"+o+" "+r+'"><img class="LineHeight BusyIcon">'+n[0]+"</a>");p++;if(p>6){p=1}}$(l).set("+ButtonBar").ht(q.join("\n"));for(var o=0,k=m.length;o<k;o++){var n=l+" .Button"+o;P.OnClick(n,LBUTTON,P.Busy(n,m[o][1]))}},DragMoveListener:function(f){var j=f.target,g=(parseFloat(j.getAttribute("data-x"))||0)+f.dx,h=(parseFloat(j.getAttribute("data-y"))||0)+f.dy;j.style.webkitTransform=j.style.transform="translate("+g+"px, "+h+"px)";j.setAttribute("data-x",g);j.setAttribute("data-y",h)},MakeFloatingButton:function(g,h){var j=$(g);if(!j.length){var f=P.Popup(HTML(h));j=$(f);j.hide()}setTimeout(function(){j.set("+"+g.substr(1)).set({"$width":"auto","$zIndex":"1100","$position":"fixed","$left":"110%","$top":"80%","$cursor":"nwse-resize"}).show().animate({"$left":"80%","$top":"80%",},300)},800);interact(g).draggable({inertia:true,autoScroll:true,onmove:P.DragMoveListener,restrict:{restriction:"parent",endOnly:true,elementRect:{top:0,left:0,bottom:1,right:1}},});return g},Busy:function(e,c){return function(j,a){var h=$(e+" .BusyIcon");var b=h.get("@src");h.set("@src",P.ImageURL("busy.svg","h"));c(j,a);setTimeout(function(){h.set("@src",b)},500)}},MakeRange:function(k,n,q,l,o,m,r){o=o?o:q;m=m||"";var p=$(k);P.HTML(p,["<div class=ButtonBar>",m?"<span class=RangeTitle>"+m+"</span>":"",'<meter class="Range '+n+'" min='+q+" max="+l+" value="+o+"></meter>","<span class=RangeDisplay>"+o+"</span>","</div>"]);P.OnClick(k+" .Range",LBUTTON,function(e){var h=$(k+" .Range");var g=parseInt(h.get("@min"));var c=parseInt(h.get("@max"));var f=h[0].value;var b=P.AbsoluteRect(h);var a=Math.round(((P.mousex-b.left)/b.width)*(c-g))+g;if(f==a){return}h[0].value=a;$(k+" .RangeDisplay").fill(a);r(h,a)})},MoveUp:function(j,g,f){j=$(j);if(g){j=j.up(g)}if(!j.length){return}var h=$(j.trav("previousSibling")[0]);j.addAfter(h.clone());h.remove();if(f){f(j)}},MoveDown:function(h,g,f){h=$(h);if(g){h=h.up(g)}if(!h.length){return}var j=h.next();h.addBefore(j.clone());j.remove();if(f){f(h)}},MakeSortableTable:function(b){$(b).on("click",function(h){var j=P.Target(h);if(j[0].tagName!="TD"){j=j.up("td")}var a=j.up("tr");var e=$("img",j).get("@src");if(!e){return}if(e.indexOf("up")!=-1){P.MoveUp(a)}else{if(e.indexOf("down")!=-1){P.MoveDown(a)}else{if(e.indexOf("delete")!=-1){a.remove()}}}})},ConfirmDeletePopup:function(c,e){P.Popup(HTML(['<div class="DeletePopup yellowb Pad50">',"<p>",T[57]+c+"?","</p>","<div class=DeleteButtonBar></div>","<div class=Cleared></div>","<div class=ConfirmDeleteResults></div>","<div class=Cleared></div>","</div>"].join("\n")),{popupclass:"ConfirmDeletePopup"});P.MakeButtonBar(".DeleteButtonBar",[[T[34],e][T[1],function(b,a){P.CloseThisPopup(a)}]])},ViewPortRect:function(){var e=window,k=document,l=k.documentElement,m=k.getElementsByTagName("body")[0];var n=e.innerWidth;var g=e.innerHeight;return{left:e.pageXOffset,top:e.pageYOffset,right:e.pageXOffset+n,bottom:e.pageYOffset+g,width:n,height:g}},OnResize:function(){if(!P.emsize){return}var h=P.ViewPortRect();P.viewportwidth=h.width;P.viewportheight=h.height;P.numems=h.width/P.emsize;if(P.numems<25){P.screensize="small"}else{if(P.numems<50){P.screensize="medium"}else{P.screensize="large"}}$("#ScreenSizeStylesheet").set("@href",P.baseurl+"c/h/"+P.screensize+".css");if(P.wallpaper){$("body").set("$backgroundImage","url('/i/h/wallpapers/"+P.wallpaper+"-"+P.screensize+".jpg')")}if(P.texttheme){$("#TextThemeStylesheet").set("@href","/c/h/themes/"+P.texttheme+".css")}if(!IsEmpty(P.events.resize)){var f=P.events.resize;for(var j=0,g=f.length;j<g;j++){f[j]()}}},StoreInArray:function(r,q,m){var n=q.split(".");var k=n.length;var l=r;for(var o=0;o<k;o++){var p=n[o];if(o!=k-1){if(!IsObject(l[p])){l[p]={}}}else{if(l[p]){if(!IsArray(l[p])){l[p]=[]}l[p].push(m)}else{l[p]=m}}l=l[n[o]]}return r},FormToArray:function(f){var g={};var e=$(f);$("input",e).each(function(b,n,m){var p=$(b);var o=p.get("@name");var a=p.get("value");var c=p.get("@type");if(!o){return}switch(c){case"number":a=parseFloat(a);break;case"datetime-local":a=LocalToGMT(a);break}P.StoreInArray(g,o,a)});$("textarea",e).each(function(b,l,c){var n=$(b);var m=n.get("@name");var a=n.get("value");if(!m){return}P.StoreInArray(g,m,a)});$("select",e).each(function(b,l,c){var n=$(b);var m=n.get("@name");var a=n.get("value");if(!m){return}P.StoreInArray(g,m,a)});$(".ToggleButton",e).each(function(b,l,c){var n=$(b);var m=n.get("%name");var a=n.get("%toggled");if(m){P.StoreInArray(g,m,a)}});$(".FormInput",e).each(function(b,l,c){var n=$(b);var m=n.get("%name");var a=n.get("%value");if(m&&a){P.StoreInArray(g,m,a)}});return g},NumToPath:function(h,k){k=k||9;var l=format("{:0"+k+"}",h);var m=[];var j=l.length-2;for(var n=0;n<j;n+=3){m.push(l.substr(n,3))}return m.join("/")},DeleteParent:function(c,e){$(e).up(c).remove()},SortArray:function(l,n,m,o){var j=[];var p=null;for(var k in l){if(l[k]){if(o){p=l[k][m][o]}else{if(m){p=l[k][m]}else{p=l[k]}}if(p==undefined){continue}if(p&&n){p=p.toString().toLowerCase()}j.push([k,p])}}j.sort(function(a,b){if(a[1]==b[1]){return 0}return(a[1]>b[1])?1:-1});return j},MakeToggleNext:function(b){$(b).each(function(g,j){var a=$(g);var h=a.next();h.hide();a.set("+HoverHighlight");a.add(HTML('<img src="'+P.baseurl+'i/h/icons/down.png" class="ToggleIcon">'));h.add(HTML('<a class="Button MiniButton Color4" onclick="P.ToggleThis(this)">'+T[37]+'<img src="'+P.baseurl+'i/h/icons/up.png" class="ToggleIcon"></a>'))});P.OnClick(b,LBUTTON,P.ToggleNext)},ToggleNext:function(k,m){var j=$(m);var n=j.next();var l=$(".ToggleIcon",j);var e=l.get("@src")==(P.baseurl+"i/h/icons/up.png");if(e){n.hide();l.set("@src",P.baseurl+"i/h/icons/down.png")}else{n.show();l.set("@src",P.baseurl+"i/h/icons/up.png")}},ToggleThis:function(g){var f=$(g).up();var e=$(f.trav("previousSibling")[0]);f.hide();$(".ToggleIcon",e).set("@src",P.baseurl+"i/h/icons/down.png")},SortChildrenByText:function(h,g,l){l=l||"";var j=$(h);var k=j.children(g).get();k.sort(function(c,e){var a=$(c).find(l).text().toLowerCase();var b=$(e).find(l).text().toLowerCase();return(a<b)?-1:(a>b)?1:0});j.empty().append(k)},MakeToggleButtons:function(e,c){$(e).each(function(a,b){var g=$(a);switch(g.get("%toggled")){case"on":g.set("-redg -grayg +greeng");break;case"off":g.set("+redg -grayg -greeng");break;case"unset":g.set("-redg +grayg -greeng")}});P.OnClick(e,LBUTTON,function(a){var b=P.Target(a);switch(b.get("%toggled")){case"on":if(c){b.set("%toggled","off").set("+redg -grayg -greeng")}else{b.set("%toggled","unset").set("-redg +grayg -greeng")}break;case"off":b.set("%toggled","unset").set("-redg +grayg -greeng");break;default:b.set("%toggled","on").set("-redg -grayg +greeng")}})},ToggledButtons:function(e){var c={on:[],off:[],unset:[]};$(e).each(function(b,k,j){var l=$(b);var a=l.get("%value");c[l.get("%toggled")].push(l.text())});return c},MakeRadioButtons:function(b){$(b).each(function(h){var j=$(h);var a=$("input",h);var g=a[0].value;$("div",j,true).each(function(c){var e=$(c);if(e.get("%value")==g){e.set("-grayg +greeng")}else{e.set("-greeng +grayg")}});P.OnClick($("div",j,true),LBUTTON,function(c){var l=$(this);var e=l.get("%value");var f=l.up();f.select("input",true)[0].value=e;f.select("div",true).each(function(n){var k=$(n);if(k.get("%value")==e){k.set("-grayg +greeng")}else{k.set("-greeng +grayg")}})})})},API:function(j,l,h,g){var k={method:"post",timeout:10,handleerror:1};g=Merge(k,g);P.AJAX("/a/"+j,JSON.stringify(l),g).then(function(b){var a=$.parseJSON(b.response);if(!a){throw new Error("P.API: No JSON returned! "+b.statusText+": "+b.response)}else{if(a.error&&g.handleerror){throw new Error("P.API: "+a.error)}else{if(h){h(a)}}}},function(a){throw new Error("P.API: "+a.statusText+": "+a.response)})},LoadingAPI:function(h,k,m,n,j){var l={handleerror:0};j=Merge(l,j);h=$(h);P.Loading(h);this.API(k,m,function(a){if(a.error){h.ht("<div class=Error>"+a.error+"</div>")}else{n(a,h)}},j)},LoadingDialog:function(){return P.Popup(HTML(['<div class="LoadingResults Padded FullWidth Centered">','<img src="/i/h/loading.gif" style="width: 96%"></div>'].join("\n")))},DialogAPI:function(k,m,n,j){var l={handleerror:0};j=Merge(l,j);var h=P.LoadingDialog();this.API(k,m,function(a){if(a.error){$(".LoadingResults").ht(['<div class="whiteb Rounded Pad50">',"<div class=Error>"+a.error+"</div>","<br>",'<div><a class="Button Color1 Width93" onclick="P.CloseThisPopup(this)">'+T[37]+"</a></div>","</div>"].join("\n"))}else{P.ClosePopup(h);n(a)}},j)},ChangeWallpaper:function(f,e){var g=f.split("-");this.wallpaper=g[0];this.texttheme=g[1].replace(".jpg","");this.OnResize();if(!e){this.API("wallpapers/set",{filename:g[0]},function(){})}},SetLanguage:function(b){this.API("translations/setlang",{langcode:b},function(){window.location.reload(1)})},AJAX:function(j,m,h){var k={method:"get",timeout:15,};h=Merge(k,h||{});if(h.method=="get"&&m){j+="?"+ToParams(m)}var l=_.promise();var n=new XMLHttpRequest();n.open(h.method,j);n.timeout=h.timeout*1000;n.addEventListener("load",function(){l.fire(true,[n,"loaded"])});n.addEventListener("error",function(){l.fire(false,[n,"error"])});n.addEventListener("abort",function(){l.fire(false,[n,"aborted"])});n.ontimeout=function(){l.fire(false,[n,"timeout"])};if(h.method=="post"&&m){n.send(m)}else{n.send()}return l},EvalInlineScripts:function(contentdiv){$("script",contentdiv).each(function(item,index,context){var src=$(item).get("@src");if(!src){eval($(this).text())}})},LoadURL:function(g,f,e){e=e||{};title=e.title||"";content=e.content||"";contentfunc=e.contentfunc||"";data=e.data||{};contentdiv=e.contentdiv||"#Content";if(g==P.currenturl){return}P.currenturl=g;if(!f||!P.useadvanced){P.LoadingDialog();window.location=g}else{if(content||contentfunc){history.pushState({title:title,content:content,contentdiv:contentdiv,contentfunc:contentfunc,data:data},title,g);if(contentfunc){window[contentfunc](data);P.dontrestorecontent.push(1)}}else{contentdiv=$(contentdiv);P.Loading(contentdiv);P.AJAX(g,{contentonly:true},{timeout:10000}).then(function(a){d=$.parseJSON(a.response);if(!d){contentdiv.ht("<div class=Error>Problem getting content... Please try again</div>")}else{if(d.error){contentdiv.ht("<div class=Error>"+d.error+"</div>")}else{contentdiv[0].innerHTML=d.content;$("script",contentdiv).each(function(c,l,k){var b=$(c).get("@src");if(b){_loader.Load(b)}});_loader.OnFinished(function(){P.EvalInlineScripts(contentdiv)});history.pushState(d,d.title,g);window.scrollTo(0,0)}}}).error(function(b,a){contentdiv.ht("<div class=Error>"+b.reason+"<br>"+b.responseText+"</div>")})}}},CloseTopLayer:function(){if(P.layerstack.length){for(;;){if(!P.layerstack.length){break}var e=P.layerstack.pop();var c=$(e);if(!c.length){break}if(e.indexOf("Popup")>-1){$(e).remove()}else{$(e).ht("").hide()}window.history.back();return 1}}return 0},OnPopState:function(e){if(P.CloseTopLayer()){return}if(e.state){if(e.state.contentfunc){window[e.state.contentfunc](e.state.data)}else{if(!P.dontrestorecontent.pop()){var contentdiv=$(e.state.contentdiv);contentdiv.ht(e.state.content);$("script",contentdiv).each(function(){eval($(this).text())})}}}else{if(!P.dontrestorecontent.pop()){window.location.reload(1)}}},PageBar:function(r,z,v,q,p,o){r=parseInt(r);z=parseInt(z);p=parseInt(p);o=o||"ListObjects";v=parseInt(v)||100;numpages=Math.ceil(r/v);var t=["<div class=Cleared></div>","<div class=Pad50>",(r?(z+1):0)+" - "+(z+p)+" / ~"+r,"</div>",'<div class="ButtonBar PageBar">'];if(r>v){if(z){t.push('<a class="FirstPage" onclick="'+o+"('"+q+"', 0)\">&lt;&lt;</a>");if(z>=v){t.push('<a class="PreviousPage" onclick="'+o+"('"+q+"', "+(z-v)+')">&lt;</a>')}}var y=Math.floor(z/v);var x=0;var s=numpages;if(numpages>16){x=y>8?y-8:0;s=y+8<numpages?y+8:numpages}for(var u=x;u<s;u++){var w=u*v;if(w!=z){t.push('<a onclick="'+o+"('"+q+"', "+w+')">'+w+"</a>")}}if(z+v<r){if(z+v<r-v){t.push('<a class="NextPage" onclick="'+o+"('"+q+"', "+(z+v)+')">&gt;</a>')}t.push('<a class="LastPage" onclick="'+o+"('"+q+"', "+(Math.ceil((r-v)/v)*v)+')">&gt;&gt;</a>')}}if(numpages>16){t.push("<a class=ChoosePage onclick=\"P.ChoosePage('"+q+"', "+z+", "+v+", "+r+", '"+o+"')\">"+T[34]+"</a>")}t.push("</div>");t.push("<div class=Cleared></div>");return t},ChoosePage:function(o,l,k,j,m){var n=Math.floor(l/k)+1;var p=Math.ceil(j/k);P.EditPopup([["pagenum","int",n,T[35]+" (1-"+p+")","","min=1 max="+p],],function(){P.GotoPage(o,k,m)});P.OnEnter(".pagenum",function(){P.GotoPage(o,k,m)});setTimeout(function(){var a=$$(".pagenum");a.focus();a.select()},500)},GotoPage:function(f,g,j){var h=g*(parseInt($$(".pagenum").value)-1);P.ClosePopup();window[j](f,h,g)},MakePlayButtons:function(b){$(b).each(function(e,a){$(e).set("+HoverHighlight").ht('<img src="'+P.ImageURL("icons/play.png","h")+'"/>')});P.OnClick(b,LBUTTON,function(l){var m=P.Target(l);var n=m.get("%url");var o=$("img",m,1);var e=o.get("@src");o.set("@src",P.ImageURL("busy.svg"));var p=P.Popup(HTML(["<div class=PlayBar></div>"].join("\n")),{closeonmouseout:1});P.Loading(p);var a=P.Play(e,e,{autoplay:1,onload:function(){$(p+" .PlayBar").ht("Playing")},onloaderror:function(c,f){$(p+" .PlayBar").ht("<div class=Error>"+f+"</div>")}})})},Play:function(g,e,f){f=f||{};f.src=e;if(!P.media[g]){P.media[g]=new Howl(f)}return P.media[g].play()},AddLayer:function(b){P.layerstack.push(b)},RemoveLayer:function(e){var c=P.layerstack.indexOf(e);if(c>-1){P.layerstack.remove(c)}},EnterFullScreen:function(g,j,f){g=parseInt(g);g=g||"";P.AddLayer(".FullScreen"+g);var h=$(".FullScreen"+g);if(j){h.set(j)}h.ht(f.join("\n")).set("$left","-"+window.outerWidth+"px").show().animate({$left:"0px"},300)},ExitFullScreen:function(e){e=parseInt(e);e=e||"";var f="FullScreen"+e;P.RemoveLayer("."+f);var g=$("."+f);g.animate({"$left":"-"+window.outerWidth+"px"},300);setTimeout(function(){g.set("@class",f).ht("").hide()},500)},ShowDrawer:function(n,o,p,j){var m=$("."+n+"Drawer");if(p){m.set(p)}var l=(n=="left"||n=="right")?"$width":"$height";var k={};k[l]=o;m.ht(j.join("\n")).set(l,"0px").show().animate(k,300)},HideDrawer:function(f){var j=$("."+f+"Drawer");j.set("@class","Drawer "+f+"Drawer");var h=(f=="left"||f=="right")?"$width":"$height";var g={};g[h]="0px";j.animate(g,300)},ReloadPage:function(){window.location.reload(1)},NoPaste:function(b){$(b).on("copy paste drag drop",function(a){a.preventDefault()})},CaptureMousePos:function(b){P.mousex=b.changedTouches?b.changedTouches[0].pageX:b.pageX;P.mousey=b.changedTouches?b.changedTouches[0].pageY:b.pageY;P.istouch=(b.type.indexOf("touch")!=-1)},MousePos:function(){return[P.mousex,P.mousey]},InRect:function(f,g,e){if(!e){return 0}return(e.left<=f&&f<=e.right&&e.top<=g&&g<=e.bottom)},FlexInput:function(){$(".FlexInput").each(function(m,p){var k=$(m);var j=k.get("%name");var l=k.get("%value");if(!j){k.ht("<div class=Error>No name provided</div>");return}P.HTML(k,["<pre><span></span><br></pre>",'<textarea class="'+j+'" name="'+j+'"></textarea>']);var n=$("textarea",k);var o=$("span",k);n.on("input",function(){o.fill(n.get("value"))});n.fill(l);o.fill(l);k.set("+active")})},SetCookie:function(r,o,k,m,p,n){m=m||"/";var l=new Date();if(k){k=expires*1000*60*60*24}var q=new Date(l.getTime()+k);document.cookie=r+"="+escape(o)+(k?";expires="+q.toGMTString():"")+";path="+m+(p?";domain="+p:"")+(n?";secure":"")},Emit:function(e,g){if(document.createEvent){var f=document.createEvent("HTMLEvents");f.initEvent(g,true,true);return !e.dispatchEvent(f)}else{var f=document.createEventObject();return e.fireEvent("on"+g,f)}},MakeCalendar:function(F,y,Q,H){var A=y?new Date(y):new Date();if(isNaN(A.getTime())){$(F).ht("<div class=Error>Invalid date: "+y+"</div>");return}var M=A.getDate();var O=A.getDay();var E=A.getFullYear();var I=A.getMonth();var z=I==11?0:I+1;var D=(I==11)?(E+1)+"-01":E+"-"+(I<8?"0"+(I+2):(I+2));var G=(I==0)?(E-1)+"-12":E+"-"+(I<10?"0"+I:I);var K=['<table class="Styled Calendar Width100 Center">',"<tr>",Q?'<td class="Color1 PreviousMonthButton">&lt;&lt;</td>':"<th></th>","<td colspan=5 class=ThisMonth>"+E+"-"+(I<9?"0"+(I+1):(I+1))+"</td>",Q?'<td class="Color2 NextMonthButton">&gt;&gt;</td>':"<th></th>","</tr>","<tr>","<th>"+T_CALENDAR[9]+"</th>","<th>"+T_CALENDAR[10]+"</th>","<th>"+T_CALENDAR[11]+"</th>","<th>"+T_CALENDAR[12]+"</th>","<th>"+T_CALENDAR[13]+"</th>","<th>"+T_CALENDAR[14]+"</th>","<th>"+T_CALENDAR[15]+"</th>","</tr>"];A.setDate(1);A.setDate(A.getDate()-A.getDay()+1);var C=0;var N=new Date();var w=N.getMonth();var x=N.getDate();for(;;){K.push("<tr>");for(var C=0;C<7;C++){var J=A.getDate();var B=A.getMonth();var L=(J<10?"0"+J:J);K.addtext(['<td class="'+((B==w&&J==x)?"Today ":"")+(B==I?"Day Day"+L+'" data-date="'+L:"OtherMonth")+'">'+J+"</td>"]);A.setDate(J+1)}K.push("</tr>");if(A.getMonth()==z||C>60){break}C++}K.push("</table>");P.HTML(F,K);if(Q){P.OnClick(F+" .NextMonthButton",LBUTTON,function(){Q(F,D)});P.OnClick(F+" .PreviousMonthButton",LBUTTON,function(){Q(F,G)})}if(H){P.OnClick(F+" .Calendar",LBUTTON,H)}},OnEnter:function(e,c){$(e).on("?keypress",function(a){if(a.keyCode==13){c();return false}return true})},MiniLogin:function(){P.DialogAPI("login/login",{phonenumber:$(".MiniLogin input.phonenumber").sub(1).get("value"),place:$(".MiniLogin input.place").sub(1).get("value"),password:$(".MiniLogin input.password").sub(1).get("value"),},function(b){window.location=document.location})},PopupMiniLogin:function(){$(".MiniLogin .phonenumber")[1].focus();P.OnEnter(".MiniLogin",P.MiniLogin);P.OnClick(".MiniLoginButton",LBUTTON,P.MiniLogin)},PreloadImage:function(k){if(IsArray(k)){for(var j=0,h=k.length;j<h;j++){P.Preload(k[j])}return}for(var l in P.preloads){if(l==k){return P.preloads[l]}}var g=new Image();g.src=k;P.preloads[k]=g;return g},SlideShow:function(j,l,n){var e={nextimage:"random",timeout:4000,imgfraction:0.7};Merge(e,n);var m=$(j);var k=m[0];k.slides=l;k.slidepos=0;k.imgfraction=e.imgfraction;k.nextimage=e.nextimage;k.timeout=e.timeout;k.selector=j;m.set("+SlideShow");P.NextSlide(k)},NextSlide:function(e){var c=P.ViewPortRect().width;$(e.selector+" .Slide").set("$transform","translate(-"+(c*1.2)+"px, 0)");setTimeout(function(){var a=-1;if(e.nextimage=="random"){do{a=RandInt(0,e.slides.length)}while(a==e.slidepos)}else{a=e.slidepos+1;if(a>=e.urls.length){a=0}}e.slidepos=a;e.innerHTML='<div class=Slide style="position: relative; left: '+(c*0.5)+'px;">'+e.slides[e.slidepos]+"</div>";$(e.selector+" img").set("$height",$$(".SlideShow").getBoundingClientRect().height*e.imgfraction+"px");$(e.selector+" img").set("$width","auto");$(e.selector+" .Slide").set("$transform","translate(-"+(c*0.5)+"px, 0)");setTimeout(function(){P.NextSlide(e)},e.timeout)},1000)},MakeTabs:function(k,n){k=$(k);k.set("+TabBar");var p=[];for(var o=0,j=n.length;o<j;o++){var l=n[o];var m=window.location.href.match(l[1])?"class=Selected":"";p.push('<a data-regex="'+EncodeEntities(l[1])+'" href="'+EncodeEntities(l[2])+'" '+m+">"+l[0]+"</a>")}p.push("<div class=Cleared></div>");P.HTML(k,p)},MakeEditTags:function(h,j,l){var k=$(h);k.set("+EditTags");var m=k[0];m.origtaglist=j.slice();var n=["<p class=EditTagsList>","</p>","<div class=ButtonBar>",'<a class="Color1 AddTagButton">+</a>','<a class="Color2 ResetTagsButton">'+T[39]+"</a>",'<a class="Color3 SaveTagsButton">'+T[25]+"</a>","</div>","<div class=SaveTagsResults></div>"];P.HTML(k,n);P.MakeEditTagsContent(h,j);P.OnClick(".EditTags .Tag",LBUTTON,function(){$(this).remove()});$(".AddTagButton").on("click",function(){var a=$(this);P.EditPopup([["newtag","text",T[54]]],function(){var b=$(".newtag").get("value");if(!j.contains(b)){j.push(b);P.MakeEditTagsContent(h,j)}return true},{parent:a})});$(".ResetTagsButton").on("click",function(){P.MakeEditTagsContent(h,m.origtaglist)});P.OnClick(".SaveTagButton",LBUTTON,function(){onsavefunc(h)})},MakeEditTagsContent:function(g,h){h.sort();var k=[];for(var j=0,l=h.length;j<l;j++){k.push('<a class=Tag><img src="/i/h/svg/tag.svg">'+h[j]+"</a>")}P.HTML(g+" .EditTagsList",k)},InterceptHREF:function(){$("body").on("?click",function(g){var e=P.Target(g);if(e[0].tagName!="A"){e=e.up("a")}if(!e.length){return 1}var f=e.get("@href");if(P.baseurl!="/"&&!f.indexOf(P.baseurl)){P.LoadingDialog();return 1}if(!e.get("%nointercept")&&f&&f.indexOf("http")!=-1){P.LoadURL(f,1);g.preventDefault();g.stopPropagation();return 0}return 1})},ListObjects:function(b){start=b.start||0;limit=b.limit||100;data=Merge({start:start,limit:limit,orderby:b.orderby},b.data);P.LoadingAPI(b.selector,b.api,data,function(j,k){var m=j.items;if(!m.length){k.ht("No items found");return}var n=[];for(var l=0,a=m.length;l<a;l++){n.addtext(b.itemfunc(l,m[l]))}n.addtext(P.PageBar(j.count,start,limit,b.orderby,m.length,b.listfunc));P.HTML(k,n);P.AutoWidth()})},RotateImage:function(e,c){},RotateImage:function(g,j){var f=$(g);var h=parseInt(f.get("%angle"));if(!h){h=0}h+=j;if(h<0){h+=360}if(h>=360){h-=360}f.set({"%angle":h,"$transform":"rotate("+h+"deg)"})},Emit:function(l,p,n){n=Merge({pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true},n||{});var j,m=null;for(var o in {HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/}){if(eventMatchers[o].test(p)){m=o;break}}if(!m){throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported")}if(document.createEvent){j=document.createEvent(m);if(m=="HTMLEvents"){j.initEvent(p,n.bubbles,n.cancelable)}else{j.initMouseEvent(p,n.bubbles,n.cancelable,document.defaultView,n.button,n.pointerX,n.pointerY,n.pointerX,n.pointerY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.button,l)}l.dispatchEvent(j)}else{n.clientX=n.pointerX;n.clientY=n.pointerY;var k=document.createEventObject();j=extend(k,n);l.fireEvent("on"+p,j)}return l},ChangeWallpaperPopup:function(){var f=['<div class="Wallpapers">'];for(var j=0,g=availablewallpapers.length;j<g;j++){var h=availablewallpapers[j];f.push('<img class=HoverHighlight src="'+P.ImageURL("wallpapers/"+h,"h")+'" onclick="P.ChangeWallpaper(\''+h+"')\">")}f.push("</div>");P.Popup(HTML(f.join("\n")),{closeonmouseout:1,parent:".WallpapersMenu","$width":"10em"})},ChangeLanguagePopup:function(){var g=['<div class="Languages">'];var l=1;for(var k=0,h=availablelanguages.length;k<h;k++){var j=availablelanguages[k];g.push('<a class="Button Color'+l+'" onclick="P.SetLanguage(\''+j[0]+"')\">"+j[1]+"</a>");l++;if(l>6){l=1}}g.push("</div>");P.Popup(HTML(g.join("\n")),{closeonmouseout:1,parent:".LanguagesMenu","$width":"10em"})},UserMenuPopup:function(){var e=["<div>"];var c=1;if(P.userid){e.push('<a class="Button Color1" href="/logout">'+T[27]+"</a>")}else{P.EditPopup([["phonenumber","text","",T[42]],["place","text","",T[43]],["password","password","",T[17]],],P.MiniLogin,{parent:".UserMenu",closeonmouseout:1,gobuttontext:T[47],cancelbuttontext:T[1],cancelfunc:function(){P.CloseThisPopup(".password")}});P.OnEnter(".EditPopupForm input",function(){P.MiniLogin($(".EditPopup"),P.FormToArray(".EditPopupForm"))});setTimeout(function(){var a=$$(".EditPopup .phonenumber");if(a){a.focus()}},200);return}e.push("</div>");P.Popup(HTML(e.join("\n")),{closeonmouseout:1,parent:".UserMenu","$width":"10em"})},MiniLogin:function(c,e){if(!e.phonenumber||!e.place||!e.password){P.ErrorPopup("<?=$T_SYSTEM[48]?>");return}P.LoadingAPI(".EditPopupResults","login/login",e,function(a,b){window.location.reload(1)})},AdminMenuPopup:function(){var h=["<div>"];var m=1;adminpages.sort();for(var l=0,j=adminpages.length;l<j;l++){var k=adminpages[l];if(k.indexOf("/")>-1){var n=P.baseurl+"m/"+k}else{var n=P.baseurl+"m/h/"+k}h.push('<a class="Button Color'+m+'" href="'+n+'">'+k+"</a>");m++;if(m>6){m=1}}h.push("</div>");P.Popup(HTML(h.join("\n")),{closeonmouseout:1,parent:".AdminMenu","$width":"10em"})},HoverPopup:function(e,c){$(e).set("+HoverHighlight");P.OnClick(e,LBUTTON,c)},UploadFilePopup:function(c,e){e=e||{};e.accept=e.accept||"image/*; capture=camera";e.maxsize=e.maxsize||4294967296;e.filetype=e.filetype||"";e.title=e.title||0;e.onfinished=e.onfinished||0;e.resizeimage=e.resizeimage||0;P.MessageBox(['<form class="UploadFileForm" method="post" enctype="multipart/form-data">','<input type=file class=FilesToUpload accept="'+e.accept+'" data-maxsize="'+e.maxsize+'" data-filetype="'+e.filetype+'" data-uploadurl="'+EncodeEntities(c)+'" multiple style="cursor: pointer;"><br><br>',(e.title?("<label>"+EncodeEntities(e.title)+"</label><input type=text class=uploadtitle>"):""),"<div class=UploadedFiles></div>","</form>","<br>"],[[T[47],function(){P.UploadFile(0,e)},3],[T[1],function(){P.CloseThisPopup(".UploadFileForm")},1]]);$$(".FilesToUpload").click();if(!e.title){$(".FilesToUpload").on("change",function(){P.UploadFile(0,e)})}},MakeProgressHandler:function(b){return function(e){var a=$(".UploadedFiles .Upload"+b+" .Right");P.UploadFileProgress(e,a)}},UploadProgress:function(c,e){return function(a){var b=$(".UploadedFiles .Upload"+i+" .Right");P.UploadFileProgress(a,b)}},UploadFile:function(D,l){D=D||".FilesToUpload";var A=$(D);var C=$$(A).files;var y=C.length;var F=$(".uploadtitle");var s=F.length?$$(F).value:0;if(!y){P.ErrorPopup(T[65]);return}if(F.length&&!s){P.ErrorPopup(T[48]);return}var t=A.get("%uploadurl");var u=A.get("%filetype");var v=A.get("%maxsize");for(var w=0;w<y;w++){var z=C[w];if(u&&!z.type.match(u)){P.ErrorPopup(z.name+" is the wrong type");continue}$(".UploadedFiles").add(HTML(['<table class="Width100 Upload'+w+'">',"<tr><td>"+EncodeEntities(z.name)+"</td><td class=Right>0%</td></tr>","</table>"].join("\n")));var E=t+"/"+(s?encodeURIComponent(s)+"/":"")+encodeURIComponent(z.name);if(l.resizeimage&&z.type.match(/image.*/)){var x=document.createElement("img");x.src=window.URL.createObjectURL(z);var B=document.createElement("canvas");B.width=l.resizeimage[0];B.height=l.resizeimage[1];pica.resizeCanvas(x,B,{unsharpAmount:50,unsharpRadius:1,unsharpThreshold:70},function(a){P.SendFile(w,E,z,l)})}else{P.SendFile(w,E,z,l)}}},SendFile:function(k,g,l,h){var j=new XMLHttpRequest();j.open("post",g,true);j.upload.addEventListener("progress",P.MakeProgressHandler(k,l.name));if(h&&h.onfinished){j.onload=function(a){h.onfinished(a,j,l.name)}}j.send(l)},UploadFileProgress:function(g,f){var e=Math.round(g.loaded/g.total*100);f.fill(e+"%")},DeleteUpload:function(c,e){P.DialogAPI("upload/delete/"+c,{},function(a){if(e){e(a,c)}})},Location:function(b){if(P.inphoneapp){b(JSON.parse(JSBridge.Location()))}else{navigator.geolocation.getCurrentPosition(function(a){b(a.coords)},function(){P.ErrorPopup(T[66])},{enableHighAccuracy:true,maximumAge:30000,timeout:20000})}},MakeOnClick:function(e,c){return function(b){var a=P.Target(b);if(!a.is(e)){a=a.up(e)}if(!a){return}if($(e+" .Selected").length){if(a.is(".Selected")){a.set("-Selected");if(!$(e+" .Selected").length){$(".BottomDrawer").hide()}}else{a.set("+Selected")}return}if(c){c(b,a)}}},MakeOnHold:function(f,g,e){return function(l){if(l.button==1||l.button==2){return}var u=P.Target(l);if(!u.is(f)){u=u.up(f)}if(!u){return}var q=$(".Selected").length;var t=u.get(g);var a=$(f);var b=0;for(var r=0,s=a.length;r<s;r++){var c=$(a[r]);if(c.get(g)==t){break}if(b){c.set("+Selected")}else{if(c.is(".Selected")){b=1}}}b=0;for(var r=a.length-1;r>=0;r--){var c=$(a[r]);if(c.get(g)==t){break}if(b){c.set("+Selected")}else{if(c.is(".Selected")){b=1}}}u.set("+Selected");$(".BottomDrawer").set({"$width":"100%","$height":"2.3em"}).set("+lgrayg").show();if(e){e(l,u)}}},MakeContextMenu:function(e,c){c=c||{};c.width=c.width||"12em";return function(b){var n=P.Target(b);if(c.topclass&&!n.is(c.topclass)){n=n.up(c.topclass)}if(!n.length){return}P.CancelBubble(b);var p=['<div class="Raised">',"<div class=ContextMenu>"];var a=IsFunc(e)?e(n):e;for(var o=0,q=a.length;o<q;o++){var l=a[o];p.push("<a class=ContextMenuItem data-pos="+o+">"+l[0]+"</a>")}p.push("</div></div>");P.Popup(HTML(p.join("\n")),{"$left":P.mousex+"px","$top":P.mousey+"px","$width":c.width,closeonmouseout:1});P.contextmenuitems=a;P.OnClick(".ContextMenu",LBUTTON,function(g){var h=P.Target(g);if(!h.is(".ContextMenuItem")){h=h.up(".ContextMenuItem")}if(!h.length){return}P.CloseThisPopup(".ContextMenu");var f=P.contextmenuitems[parseInt(h.get("%pos"))][1];f(g,n)})}},OnAltEnter:function(e,c){$(e).on("?keydown",function(a){if(a.defaultPrevented){return}var b=false;if(a.key!==undefined){if(a.key==="Enter"&&a.altKey){c(e,a)}}else{if(a.keyIdentifier!==undefined){if(a.keyIdentifier==="Enter"&&a.altKey){alert("Alt + Enter pressed!")}}else{if(a.keyCode!==undefined){if(a.keyCode===13&&a.altKey){alert("Alt + Enter pressed!")}}}}if(b){a.preventDefault();return 0}return 1})},MakeQuickFuncsButton:function(e,c){e=e||".QuickFuncsButton";c=c||P.possumbot;P.MakeFloatingButton(e,'<div class="redb HoverHighlight Pad50 Rounded Raised"><img class=DoubleLineHeight src="/i/h/avatars/'+c+'.png" /></div>');P.OnClick(e,LBUTTON,P.ShowQuickFuncsPopup)},ShowQuickFuncsPopup:function(j,h){h=h||"";var e=P.Popup(HTML(['<div class="whiteb Pad50 Raised">','<div class="FlexInput QuickFuncInput" data-name="quickfuncinput" data-value="'+EncodeEntities(h)+'"></div>',"<div class=QuickFuncsButtons></div>","<div class=QuickFuncResults></div>","</div>"].join("\n")),{"$width":(window.innerWidth*0.8)+"px"});P.FlexInput();P.MakeButtonBar(".QuickFuncsButtons",[[T[47],P.ProcessQuickFunc],[T[71],P.QuickFuncsHelp],[T[1],function(){P.CloseThisPopup(".QuickFuncInput")}]]);var g=$(e+" textarea");P.OnAltEnter(g,P.ProcessQuickFunc);$$(g).focus()},AddQuickFunc:function(h,g,j,f){P.quickfuncs.push([h,g,j,f]);P.quickfuncs.sort(function(b,c){var e=b[0].length;var a=c[0].length;if(e>a){return -1}if(e<a){return 1}return 0})},ProcessQuickFunc:function(){var k=$(".QuickFuncInput textarea").get("value");if(k){var h=k.toLowerCase();var m=0;for(var n=0,j=P.quickfuncs.length;n<j;n++){var l=P.quickfuncs[n][0];if(h.startswith(l.toLowerCase())){P.quickfuncs[n][3](k.substr(l.length).trim(),$(".QuickFuncResults"));m=1;break}}if(!m){$(".QuickFuncResults").ht('<div class="yellowb Pad50">'+T[72]+"</div>")}}},QuickFuncsHelp:function(){var j=['<div class="Pad50 whiteb">',"<div class=Left>","<h2>"+T_POSSUMBOT[1]+"</h2>","<p>"+T_POSSUMBOT[2]+"</p>","<h3>"+T_POSSUMBOT[3]+"</h3>","<dl>"];for(var l=0,h=P.quickfuncs.length;l<h;l++){var k=P.quickfuncs[l];var g=(l%6)+1;j.addtext(["<dt>",'<a class="Button Color'+g+'" onclick="P.CopyQuickFuncCommand(\''+EncodeEntities(k[0])+"')\">",k[1],"</a>","</dt>","<dd><p>"+k[2]+"</p></dd>"])}j.addtext(["</dl>","<p>"+T_POSSUMBOT[9]+"</p>","<div class=ButtonBar>",'<a class=Color1 onclick="P.ExitFullScreen(1)">'+T[1]+"</a>","</div>","</div>","</div>"]);P.CloseThisPopup(".QuickFuncInput");P.EnterFullScreen(1,"",j)},CopyQuickFuncCommand:function(b){P.ExitFullScreen(1);P.ShowQuickFuncsPopup(0,b)},QuickChangePassword:function(c,e){if(!c){e.ht('<div class="yellowb Pad50">'+T[4]+"</div>");return}P.LoadingAPI(e,"login/changepassword",{password:c},function(a,b){b.ht('<div class="greenb Pad50">'+T[41]+"</div>");setTimeout(function(){P.CloseThisPopup(".QuickFuncInput")},2000)})},QuickChangeAvatar:function(c,e){if(c.length){P.LoadingAPI(e,"possumbot/set",{avatar:c},function(a,b){$(".QuickFuncsButton img").set("@src",P.ImageURL("avatars/"+c+".png","h"));b.ht('<div class="greenb Pad50">'+T[41]+"</div>")})}else{P.LoadingAPI(e,"possumbot/list",{},function(a,k){var b=a.items;var m=["<div class=Cards4>"];for(var l=0,n=b.length;l<n;l++){m.addtext(['<div class="lgrayb Card HoverHighlight" onclick="P.QuickChangeAvatar(\''+b[l]+"')\">",'<img class=CardIcon src="'+P.ImageURL("avatars/"+b[l]+".png","h")+'">',"<div class=Center>"+b[l]+"</div>","</div>"])}m.push("</div><div class=Cleared></div>");P.HTML(k,m)})}}};P.Init();$.ready(function(){P.emsize=P.EMSize();window.onerror=function(h,j,a,k,l){StackTrace.fromError(l).then(function(e){var c=e.map(function(f){return f.toString()}).join("\n");console.log(c);P.Debug(h+"\n"+c)})};P.SetCookie("timeoffset",P.timeoffset);P.ChangeWallpaper(P.wallpaper+"-"+P.texttheme+".jpg",1);for(var b=1;b<=6;b++){$(".Color"+b).set("$color","white !important")}P.HoverPopup(".WallpapersMenu",P.ChangeWallpaperPopup);P.HoverPopup(".LanguagesMenu",P.ChangeLanguagePopup);P.HoverPopup(".UserMenu",P.UserMenuPopup);P.HoverPopup(".AdminMenu",P.AdminMenuPopup);$(window).on("|resize",P.OnResize).on("|mousemove |mouseenter |touchmove",P.CaptureMousePos).on("|orientationchange",function(){switch(window.orientation){case 90:case -90:P.screenorientation="landscape";break;default:P.screenorientation="portrait"}P.OnResize()});if(P.useadvanced){if(P.isfirefox||P.ischrome||P.issafari){$(window).on("popstate",P.OnPopState)}$(window).on(P.isfirefox?"|keypress ":"|keypress |keydown ",function(a){if(a.keyCode==27){P.CloseTopLayer()}});P.InterceptHREF()}if(window.location.href.indexOf("pafera.com")==-1){$("body").set("$fontFamily","serif")}if(P.userid){P.MakeQuickFuncsButton();P.AddQuickFunc(T_POSSUMBOT[8],T_POSSUMBOT[4],T_POSSUMBOT[5],P.QuickChangePassword);P.AddQuickFunc(T_POSSUMBOT[6],T_POSSUMBOT[6],T_POSSUMBOT[7],function(){$(".QuickFuncsButton").hide();P.CloseThisPopup(".QuickFuncInput")});P.AddQuickFunc(T_POSSUMBOT[10],T_POSSUMBOT[10],T_POSSUMBOT[11],P.QuickChangeAvatar)}interact.pointerMoveTolerance(32)});