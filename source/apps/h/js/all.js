function IsArray(b){return(b instanceof Array)||(Object.prototype.toString.apply(b)==="[object Array]")}String.prototype.endswith=function(b){return this.indexOf(b,this.length-b.length)!==-1};Array.prototype.contains=function(f){for(var d=0,e=this.length;d<e;d++){if(this[d]==f){return true}}return false};_loader={Init:function(){this.filesloaded=[];this.filesprocessing=[];this.filestoload=[];this.onfinished=[];this.numadded=0;this.numloaded=0},OnFinished:function(d,c){if(typeof d!="function"){return}c=c||0;if(_loader.filesprocessing.length||_loader.filestoload.length){_loader.onfinished.push([d,c])}else{d()}return _loader},InQueue:function(d){for(var f=0,e=_loader.filestoload.length;f<e;f++){if(_loader.filestoload[f][0]==d){return true}}return(_loader.filesloaded.indexOf(d)!==-1||_loader.filesprocessing.indexOf(d)!==-1)},Load:function(b){if(!b){return _loader}if(IsArray(b)){_loader.filestoload=_loader.filestoload.concat(b);if(!_loader.filesprocessing.length){_loader.LoadNext()}return _loader}if(_loader.InQueue(b)){return _loader}if(_loader.filesprocessing.length){_loader.filestoload.push(b);return _loader}_loader.ReallyLoad(b);return _loader},LoadNext:function(){if(_loader.filestoload.length){var e=_loader.filestoload.shift();if(IsArray(e)){for(var h=0,f=e.length;h<f;h++){_loader.ReallyLoad(e[h])}}else{_loader.ReallyLoad(e)}return _loader}if(!_loader.filesprocessing.length){for(var h=0,f=_loader.onfinished.length;h<f;h++){var g=_loader.onfinished[h];setTimeout(g[0],g[1])}_loader.onfinished=[]}return _loader},ReallyLoad:function(e){if(!_loader.numadded){setTimeout(_loader.CheckLoaded,10000)}_loader.numadded++;var d=document.getElementsByTagName("head")[0];if(e.endswith(".js")){var f=document.createElement("script")}else{var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=e}f.src=e;f.onload=_loader.OnLoaded;_loader.filesprocessing.push(e);d.appendChild(f);return _loader},OnLoaded:function(g){_loader.numloaded++;var e=this.href||this.src;for(var h=0,f=_loader.filesprocessing.length;h<f;h++){if(e.indexOf(_loader.filesprocessing[h])!==-1){_loader.filesprocessing.splice(h,1);break}}_loader.LoadNext();return _loader},CheckLoaded:function(){if(_loader.numadded&&!_loader.numloaded){document.body.innerHTML=T[52]}return _loader}};_loader.Init();!function(b,c){var a=c(b,b.document);b.lazySizes=a,"object"==typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a)}(window,function(a,b){if(b.getElementsByClassName){var c,d=b.documentElement,e=a.addEventListener,f=a.setTimeout,g=a.requestAnimationFrame||f,i=a.setImmediate||f,k=/^picture$/i,m=["load","error","lazyincluded","_lazyloaded"],o=function(x,y){var w=new RegExp("(\\s|^)"+y+"(\\s|$)");return x.className.match(w)&&w},p=function(w,x){o(w,x)||(w.className+=" "+x)},q=function(x,y){var w;(w=o(x,y))&&(x.className=x.className.replace(w," "))},r=function(y,z,w){var x=w?"addEventListener":"removeEventListener";w&&r(y,z),m.forEach(function(A){y[x](A,z)})},s=function(w,x,y,z,A){var B=b.createEvent("CustomEvent");return B.initCustomEvent(x,!z,!A,y||{}),w.dispatchEvent(B),B},t=function(w,x){var y;a.HTMLPictureElement||((y=a.picturefill||a.respimage||c.pf)?y({reevaluate:!0,elements:[w]}):x&&x.src&&(w.src=x.src))},u=function(w,x){return(getComputedStyle(w,null)||{})[x]},v=function(x,y,w){for(w=w||x.offsetWidth;w<c.minSize&&y&&!x._lazysizesWidth;){w=y.offsetWidth,y=y.parentNode}return w},h=function(x){var C,w=0,y=a.Date,z=function(){C=!1,w=y.now(),x()},A=function(){i(z)},B=function(){g(A)};return function(){if(!C){var D=c.throttle-(y.now()-w);C=!0,6>D&&(D=6),f(B,D)}}},j=function(){var P,R,ag,x,A,C,E,G,I,T,ae,ah,w,y=/^img$/i,z=/^iframe$/i,B="onscroll" in a&&!/glebot/.test(navigator.userAgent),D=0,F=0,H=0,J=0,K=function(U){H--,U&&U.target&&r(U.target,K),(!U||0>H||!U.target)&&(H=0)},L=function(V,X){var U,W=V,Y="hidden"!=u(V,"visibility");for(G-=X,ae+=X,I-=X,T+=X;Y&&(W=W.offsetParent);){Y=(u(W,"opacity")||1)>0,Y&&"visible"!=u(W,"overflow")&&(U=W.getBoundingClientRect(),Y=T>U.left&&I<U.right&&ae>U.top-1&&G<U.bottom+1)}return Y},M=function(){var Z,aa,V,W,ab,ac,U,X,Y;if((A=c.loadMode)&&8>H&&(Z=P.length)){for(aa=0,J++,w>F&&1>H&&J>3&&A>2?(F=w,J=0):F=A>1&&J>2&&6>H?ah:D;Z>aa;aa++){P[aa]&&!P[aa]._lazyRace&&(B?((X=P[aa].getAttribute("data-expand"))&&(ac=1*X)||(ac=F),Y!==ac&&(C=innerWidth+ac,E=innerHeight+ac,U=-1*ac,Y=ac),V=P[aa].getBoundingClientRect(),(ae=V.bottom)>=U&&(G=V.top)<=E&&(T=V.right)>=U&&(I=V.left)<=C&&(ae||T||I||G)&&(ag&&3>H&&!X&&(3>A||4>J)||L(P[aa],ac))?(ad(P[aa],V.width),ab=!0,H>6&&(F=D)):!ab&&ag&&!W&&3>H&&4>J&&A>2&&(R[0]||c.preloadAfterLoad)&&(R[0]||!X&&(ae||T||I||G||"auto"!=P[aa].getAttribute(c.sizesAttr)))&&(W=R[0]||P[aa])):ad(P[aa]))}W&&!ab&&ad(W)}},N=h(M),O=function(U){p(U.target,c.loadedClass),q(U.target,c.loadingClass),r(U.target,O)},Q=function(U,V){try{U.contentWindow.location.replace(V)}catch(W){U.setAttribute("src",V)}},S=function(){var U,V=[],W=function(){for(;V.length;){V.shift()()}U=!1};return function(X){V.push(X),U||(U=!0,g(W))}}(),ad=function(aa,ac){var ar,at,au,av,X,U,V,W,Z,ab,ap,aq=y.test(aa.nodeName),Y=aq&&(aa.getAttribute(c.sizesAttr)||aa.getAttribute("sizes")),aw="auto"==Y;(!aw&&ag||!aq||!aa.src&&!aa.srcset||aa.complete||o(aa,c.errorClass))&&(aw&&(ac=Math.max(ac||0,aa.offsetWidth)),aa._lazyRace=!0,H++,S(function(){if(aa._lazyRace&&delete aa._lazyRace,q(aa,c.lazyClass),!(Z=s(aa,"lazybeforeunveil")).defaultPrevented){if(Y&&(aw?(p(aa,c.autosizesClass),l.updateElem(aa,!0,ac)):aa.setAttribute("sizes",Y)),U=aa.getAttribute(c.srcsetAttr),X=aa.getAttribute(c.srcAttr),aq&&(V=aa.parentNode,W=V&&k.test(V.nodeName||"")),ab=Z.detail.firesLoad||"src" in aa&&(U||X||W),Z={target:aa},ab&&(r(aa,K,!0),clearTimeout(x),x=f(K,2500),p(aa,c.loadingClass),r(aa,O,!0)),W){for(ar=V.getElementsByTagName("source"),at=0,au=ar.length;au>at;at++){(ap=c.customMedia[ar[at].getAttribute("data-media")||ar[at].getAttribute("media")])&&ar[at].setAttribute("media",ap),av=ar[at].getAttribute(c.srcsetAttr),av&&ar[at].setAttribute("srcset",av)}}U?aa.setAttribute("srcset",U):X&&(z.test(aa.nodeName)?Q(aa,X):aa.setAttribute("src",X)),(U||W)&&t(aa,{src:X})}(!ab||aa.complete)&&(ab?K(Z):H--,O(Z))}))},af=function(){var U,V=function(){c.loadMode=3,N()};ag=!0,c.loadMode=3,J++,e("scroll",function(){3==c.loadMode&&(c.loadMode=2),clearTimeout(U),U=f(V,99)},!0)};return{_:function(){P=b.getElementsByClassName(c.lazyClass),R=b.getElementsByClassName(c.lazyClass+" "+c.preloadClass),ah=c.expand,w=Math.round(ah*c.expFactor),e("scroll",N,!0),e("resize",N,!0),a.MutationObserver?new MutationObserver(N).observe(d,{childList:!0,subtree:!0,attributes:!0}):(d.addEventListener("DOMNodeInserted",N,!0),d.addEventListener("DOMAttrModified",N,!0),setInterval(N,999)),e("hashchange",N,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(U){b.addEventListener(U,N,!0)}),/d$|^c/.test(b.readyState)?af():(e("load",af),b.addEventListener("DOMContentLoaded",N)),N()},checkElems:N,unveil:ad}}(),l=function(){var w,x=function(D,E,F){var G,H,A,B,C=D.parentNode;if(C&&(F=v(D,C,F),B=s(D,"lazybeforesizes",{width:F,dataAttr:!!E}),!B.defaultPrevented&&(F=B.detail.width,F&&F!==D._lazysizesWidth))){if(D._lazysizesWidth=F,F+="px",D.setAttribute("sizes",F),k.test(C.nodeName||"")){for(G=C.getElementsByTagName("source"),H=0,A=G.length;A>H;H++){G[H].setAttribute("sizes",F)}}B.detail.dataAttr||t(D,B.detail)}},y=function(){var A,B=w.length;if(B){for(A=0;B>A;A++){x(w[A])}}},z=h(y);return{_:function(){w=b.getElementsByClassName(c.autosizesClass),e("resize",z)},checkElems:z,updateElem:x}}(),n=function(){n.i||(n.i=!0,l._(),j._())};return function(){var w,x={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:2,expand:359,loadMode:2,throttle:125};c=a.lazySizesConfig||a.lazysizesConfig||{};for(w in x){w in c||(c[w]=x[w])}a.lazySizesConfig=c,f(function(){c.init&&n()})}(),{cfg:c,autoSizer:l,loader:j,init:n,uP:t,aC:p,rC:q,hC:o,fire:s,gW:v}}});var MINIFIED=function(){var cW=window;var cr="Nia";var cK="NiaP";var bQ={},bE={};var bP=1;var cF=/^[ic]/.test(document.readyState)?bg:[];var cf={};var cC=0;var bg=null;var cP;function b7(a){return a.substr(0,3)}var cZ=bf("January,February,March,April,May,June,July,August,September,October,November,December",/,/g);var bc=b8(cZ,b7);var cT=bf("Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",/,/g);var bk=b8(cT,b7);var cQ=bf("am,pm",/,/g);var bO=bf("am,am,am,am,am,am,am,am,am,am,am,am,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm,pm",/,/g);var bA={y:["FullYear",bT],Y:["FullYear",function(a){return a%100}],M:["Month",cR],n:["Month",bc],N:["Month",cZ],d:["Date",bT],m:["Minutes",bT],H:["Hours",bT],h:["Hours",function(a){return(a%12)||12}],k:["Hours",cR],K:["Hours",function(a){return a%12}],s:["Seconds",bT],S:["Milliseconds",bT],a:["Hours",bO],w:["Day",bk],W:["Day",cT],z:["TimezoneOffset",function(a,c,d){if(d){return d}var e=a>0?"-":"+";var b=a<0?-a:a;return e+be(2,Math.floor(b/60))+be(2,b%60)}]};var co={y:0,Y:[0,-2000],M:[1,1],n:[1,bc],N:[1,cZ],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,cQ]};var bs=99;var cN={};var bo=[];function b0(a){return a!=bg?""+a:""}function bI(b,a){return typeof b==a}function cs(a){return bI(a,"string")}function bR(a){return !!a&&bI(a,"object")}function ck(a){return a&&a.nodeType}function bD(a){return bI(a,"number")}function bu(a){return bR(a)&&!!a.getDay}function bK(a){return a===true||a===false}function b6(a){var b=typeof a;return b=="object"?!!(a&&a.getDay):(b=="string"||b=="number"||bK(a))}function bT(a){return a}function cR(a){return a+1}function cp(b,a,c){return b0(b).replace(a,c!=bg?c:"")}function ct(a){return cp(a,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function cI(a){return cp(a,/^\s+|\s+$/g)}function bi(b,d,c){for(var a in b){if(b.hasOwnProperty(a)){d.call(c||b,a,b[a])}}return b}function cS(a,d,c){if(a){for(var b=0;b<a.length;b++){d.call(c||a,a[b],b)}}return a}function bS(a,b,e){var d=[];var c=cJ(b)?b:function(f){return b!=f};cS(a,function(f,g){if(c.call(e||a,f,g)){d.push(f)}});return d}function bm(b,a,c,d){var e=[];b(a,function(f,g){if(bn(f=c.call(d||a,f,g))){cS(f,function(h){e.push(h)})}else{if(f!=bg){e.push(f)}}});return e}function b9(a,b,c){return bm(bi,a,b,c)}function b5(a,b,c){return bm(cS,a,b,c)}function cy(b){var a=0;bi(b,function(c){a++});return a}function bJ(a){var b=[];bi(a,function(c){b.push(c)});return b}function b8(b,a,c){var d=[];cS(b,function(e,f){d.push(a.call(c||b,e,f))});return d}function bp(b,a){if(bn(b)){var c=cj(a);return bM(cA(b,0,c.length),c)}else{return a!=bg&&b.substr(0,a.length)==a}}function bw(b,c){if(bn(b)){var a=cj(c);return bM(cA(b,-a.length),a)||!a.length}else{return c!=bg&&b.substr(b.length-c.length)==c}}function by(a){var b=a.length;if(bn(a)){return new cc(b8(a,function(){return a[--b]}))}else{return cp(a,/[\s\S]/g,function(){return a.charAt(--b)})}}function bv(b,c){var a={};cS(b,function(d,e){a[d]=c});return a}function bU(a,b){var c=b||{};for(var d in a){c[d]=a[d]}return c}function b1(c,b){var a=b;for(var d=0;d<c.length;d++){a=bU(c[d],a)}return a}function cn(a){return cJ(a)?a:function(b,c){if(a===b){return c}}}function ce(b,c,a){return c==bg?a:c<0?Math.max(b.length+c,0):Math.min(b.length,c)}function bL(c,g,a,d){var e=cn(g);var b=ce(c,d,c.length);var f;for(var h=ce(c,a,0);h<b;h++){if((f=e.call(c,c[h],h))!=bg){return f}}}function cD(c,g,a,d){var e=cn(g);var b=ce(c,d,-1);var f;for(var h=ce(c,a,c.length-1);h>b;h--){if((f=e.call(c,c[h],h))!=bg){return f}}}function cA(c,a,d){var e=[];if(c){var b=ce(c,d,c.length);for(var f=ce(c,a,0);f<b;f++){e.push(c[f])}}return e}function bW(a){return b8(a,bT)}function bj(a){return function(){return new cc(cG(a,arguments))}}function cU(a){var b={};return bS(a,function(c){if(b[c]){return false}else{return b[c]=1}})}function bq(a,c){var b=bv(c,1);return bS(a,function(d){var e=b[d];b[d]=0;return e})}function ci(a,b){for(var c=0;c<a.length;c++){if(a[c]==b){return true}}return false}function bM(d,a){var c=cJ(d)?d():d;var e=cJ(a)?a():a;var b;if(c==e){return true}else{if(c==bg||e==bg){return false}else{if(b6(c)||b6(e)){return bu(c)&&bu(e)&&+c==+e}else{if(bn(c)){return(c.length==e.length)&&!bL(c,function(f,g){if(!bM(f,e[g])){return true}})}else{return !bn(e)&&((b=bJ(c)).length==cy(e))&&!bL(b,function(f){if(!bM(c[f],e[f])){return true}})}}}}}function bB(b,a,c){if(cJ(b)){return b.apply(c&&a,b8(c||a,bT))}}function cG(b,a,c){return b8(b,function(d){return bB(d,a,c)})}function cz(a,b,d,c){return function(){return bB(a,b,b5([d,arguments,c],bT))}}function br(a,c,b){return cz(a,this,c,b)}function be(b,c){var d=c<0?"-":"";var a=(d?-c:c).toFixed(0);while(a.length<b){a="0"+a}return d+a}function b2(e,f,d){var g;var b=0;var a=d?f:by(f);var c=(d?e:by(e)).replace(/./g,function(h){if(h=="0"){g=false;return a.charAt(b++)||"0"}else{if(h=="#"){g=true;return a.charAt(b++)||""}else{return g&&!a.charAt(b)?"":h}}});return d?c:(f.substr(0,f.length-b)+by(c))}function bl(b,c,a){if(c==bg||!b){return 0}return parseFloat(b[c]+b[c+1])*60+parseFloat(b[c]+b[c+2])+a.getTimezoneOffset()}function cl(e,b){var a=cp(e,/^\?/);if(bu(b)){var c,d;if(d=/^\[(([+-])(\d\d)(\d\d))\]\s*(.*)/.exec(a)){c=d[1];b=bY(b,"minutes",bl(d,2,b));a=d[5]}return cp(a,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(h,g,i,k){var l=bA[g];if(l){var f=b["get"+l[0]]();var j=(k&&k.split(","));if(bn(l[1])){f=(j||l[1])[f]}else{f=l[1](f,j,c)}if(f!=bg&&!cs(f)){f=be(i.length+1,f)}return f}else{return h}})}else{return bL(a.split(/\s*\|\s*/),function(f){var g,i;if(g=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(f)){var h=b,j=+(g[3]);if(isNaN(j)||!bD(h)){h=(h==bg)?"null":b0(h);j=g[3]}if(g[1]){if((!g[2]&&h==j)||(g[1]=="<"&&h>j)||(g[1]==">"&&h<j)){return bg}}else{if(h!=j){return bg}}i=g[4]}else{i=f}if(bD(b)){return i.replace(/[0#](.*[0#])?/,function(p){var n=/^([^.]+)(\.)([^.]+)$/.exec(p)||/^([^,]+)(,)([^,]+)$/.exec(p);var o=b<0?"-":"";var l=/(\d+)(\.(\d+))?/.exec((o?-b:b).toFixed(n?n[3].length:0));var m=n?n[1]:p;var k=n?b2(n[3],cp(l[3],/0+$/),true):"";return(o?"-":"")+(m=="#"?l[1]:b2(m,l[1]))+(k.length?n[2]:"")+k})}else{return i}})}}function ca(m,q){var n={};var l=1;var k;var s;var g;var a=cp(m,/^\?/);if(a!=m&&!cI(q)){return bg}if(g=/^\[([+-])(\d\d)(\d\d)\]\s*(.*)/.exec(a)){k=g;a=g[4]}var j=new RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(u,w,y,v){if(/[dmhkyhs]/i.test(w)){n[l++]=w;var x=y.length+1;return"(\\d"+(x<2?"+":("{1,"+x+"}"))+")"}else{if(w=="z"){s=l;l+=3;return"([+-])(\\d\\d)(\\d\\d)"}else{if(/[Nna]/.test(w)){n[l++]=[w,v&&v.split(",")];return"([a-zA-Z\\u0080-\\u1fff]+)"}else{if(/w/i.test(w)){return"[a-zA-Z\\u0080-\\u1fff]+"}else{if(/\s/.test(w)){return"\\s+"}else{return ct(u)}}}}}}));if(!(g=j.exec(q))){return cP}var t=[0,0,0,0,0,0,0];for(var b=1;b<l;b++){var h=g[b];var p=n[b];if(bn(p)){var c=p[0];var i=co[c];var o=i[0];var f=p[1]||i[1];var e=bL(f,function(u,v){if(bp(h.toLowerCase(),u.toLowerCase())){return v}});if(e==bg){return cP}if(c=="a"){t[o]+=e*12}else{t[o]=e}}else{if(p){var d=parseFloat(h);var i=co[p];if(bn(i)){t[i[0]]+=d-i[1]}else{t[i]+=d}}}}var r=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);return bY(r,"minutes",-bl(k,1,r)-bl(g,s,r))}function cg(d,b){var a=cp(d,/^\?/);if(a!=d&&!cI(b)){return bg}var e=(/(^|[^0#.,])(,|[0#.]*,[0#]+|[0#]+\.[0#]+\.[0#.,]*)($|[^0#.,])/.test(a))?",":".";var c=parseFloat(cp(cp(cp(b,e==","?/\./g:/,/g),e,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(c)?cP:c}function cu(){return new Date()}function cd(a){return new Date(+a)}function bt(a){return a.charAt(0).toUpperCase()+a.substr(1)}function cw(a,b,c){a["set"+b](a["get"+b]()+c);return a}function bY(c,a,b){if(b==bg){return bY(cu(),c,a)}return cw(cd(c),bt(a),b)}function bN(a){var b=a||cu();return new Date(b.getFullYear(),b.getMonth(),b.getDate())}function cH(c,a,b){var f=+a;var j=+b;var l=j-f;if(l<0){return -cH(c,b,a)}var k={milliseconds:1,seconds:1000,minutes:60000,hours:3600000};var h=k[c];if(h){return l/h}var d=bt(c);var e={fullYear:86400000*365,month:86400000*365/12,date:86400000};var m=Math.floor((l/e[c])-2);var g=cw(new Date(f),d,m);for(var i=m;i<m*1.2+4;i++){if(+cw(g,d,1)>j){return i}}}function bZ(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function bX(a){return cp(a,/[\x00-\x1f'"\u2028\u2029]/g,bZ)}function bf(a,b){return a.split(b)}function bG(c,b){if(cN[c]){return cN[c]}else{var d="with(_.isObject(obj)?obj:{}){"+b8(bf(c,/{{|}}}?/g),function(h,i){var j,f=cI(h),g=cp(f,/^{/),k=(f==g)?"esc(":"";if(i%2){if(j=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(g)){return"each("+(cI(j[4])?j[4]:"this")+", function("+j[2]+"){"}else{if(j=/^if\b(.*)/.exec(g)){return"if("+j[1]+"){"}else{if(j=/^else\b\s*(if\b(.*))?/.exec(g)){return"}else "+(j[1]?"if("+j[2]+")":"")+"{"}else{if(j=/^\/(if)?/.exec(g)){return j[1]?"}\n":"});\n"}else{if(j=/^(var\s.*)/.exec(g)){return j[1]+";"}else{if(j=/^#(.*)/.exec(g)){return j[1]}else{if(j=/(.*)::\s*(.*)/.exec(g)){return"print("+k+'_.formatValue("'+bX(j[2])+'",'+(cI(j[1])?j[1]:"this")+(k&&")")+"));\n"}else{return"print("+k+(cI(g)?g:"this")+(k&&")")+");\n"}}}}}}}}else{if(h){return'print("'+bX(h)+'");\n'}}}).join("")+"}";var a=(new Function("obj","each","esc","print","_",d));var e=function(f,g){var h=[];a.call(g||f,f,function(i,j){if(bn(i)){cS(i,function(k,l){j.call(k,k,l)})}else{bi(i,function(l,k){j.call(k,l,k)})}},b||bT,function(){bB(h.push,h,arguments)},cj);return h.join("")};if(bo.push(e)>bs){delete cN[bo.shift()]}return cN[c]=e}}function b4(a){return cp(a,/[<>'"&]/g,function(b){return"&#"+b.charCodeAt(0)+";"})}function M(b,a){return bG(b,b4)(a)}function bh(a){return function(b,c){return new cc(a(this,b,c))}}function cM(a){return function(b,c,d){return a(this,b,c,d)}}function cb(a){return function(b,c,d){return new cc(a(b,c,d))}}function cJ(a){return typeof a=="function"&&!a.item}function bn(a){return a&&a.length!=bg&&!cs(a)&&!ck(a)&&!cJ(a)&&a!==cW}function bx(b,a,c){(b[a]=(b[a]||[])).push(c)}function cv(a,b){for(var c=0;a&&c<a.length;c++){if(a[c]===b){a.splice(c--,1)}}}function cq(a){return parseFloat(cp(a,/^[^\d-]+/))}function bz(a){return(a[cr]=(a[cr]||++bP))}function cm(a,c){var e=[];var d={};var b;bd(a,function(f){bd(c(f),function(g){if(!d[b=bz(g)]){e.push(g);d[b]=true}})});return e}function cO(d,e){var a={"$position":"absolute","$visibility":"hidden","$display":"block","$height":bg};var b=d.get(a);var c=d.set(a)["get"]("clientHeight");d.set(b);return c*e+"px"}function bH(a,e,c,d,b){if(cJ(e)){return this["on"](bg,a,e,c,d)}else{if(cs(d)){return this["on"](a,e,c,bg,d)}else{return this["each"](function(f,g){bd(a?cY(a,f):f,function(h){bd(b0(e).split(/\s/),function(n){var i=cp(n,/[?|]/g);var m=cp(n,/[^?|]/g);var j=(i=="blur"||i=="focus")&&!!b;var k=bP++;function l(u,r,p){var t=!b;var s=b?p:h;if(b){var q=ch(b,h);while(s&&s!=h&&!(t=q(s))){s=s.parentNode}}return(!t)||(i!=u)||((c.apply(cL(s),d||[r,g])&&m=="?")||m=="|")}function o(p){if(!l(i,p,p.target)){p.preventDefault();p.stopPropagation()}}h.addEventListener(i,o,j);if(!h.M){h.M={}}h.M[k]=l;c.M=bm(bd,[c.M,function(){h.removeEventListener(i,o,j);delete h.M[k]}],bT)})})})}}}function bF(a){cG(a.M);a.M=bg}function cE(a,b){bd(b,function(c){c.element.detachEvent("on"+c.eventType,c.handlerFunc)})}function a0(a){if(cF){cF.push(a)}else{setTimeout(a,0)}}function cV(c,b,a){return cY(c,b,a)[0]}function bC(d,c,b){var a=cL(document.createElement(d));return(bn(c)||(c!=bg&&!bR(c)))?a.add(c):a.set(c)["add"](b)}function bV(a){return bm(bd,a,function(c){var b;if(bn(c)){return bV(c)}else{if(ck(c)){b=c.cloneNode(true);b.removeAttribute&&b.removeAttribute("id");return b}else{return c}}})}function cL(c,a,b){return cJ(c)?a0(c):new cc(cY(c,a,b))}function cY(e,c,d){function a(f){return bn(f)?bm(bd,f,a):f}function b(f){return bS(bm(bd,f,a),function(g){var h=g;while(h=h.parentNode){if(h==c[0]||d){return h==c[0]}}})}if(c){if((c=cY(c)).length!=1){return cm(c,function(f){return cY(e,f,d)})}else{if(cs(e)){if(ck(c[0])!=1){return[]}else{return d?b(c[0].querySelectorAll(e)):c[0].querySelectorAll(e)}}else{return b(e)}}}else{if(cs(e)){return document.querySelectorAll(e)}else{return bm(bd,e,a)}}}function ch(g,c){function f(j,h){var i=RegExp("(^|\\s+)"+j+"(?=$|\\s)","i");return function(k){return j?i.test(k[h]):true}}var a={};var b=a;if(cJ(g)){return g}else{if(bD(g)){return function(i,h){return h==g}}else{if(!g||g=="*"||(cs(g)&&(b=/^([\w-]*)\.?([\w-]*)$/.exec(g)))){var d=f(b[1],"tagName");var e=f(b[2],"className");return function(h){return ck(h)==1&&d(h)&&e(h)}}else{if(c){return function(h){return cL(g,c)["find"](h)!=bg}}else{cL(g)["each"](function(h){a[bz(h)]=true});return function(h){return a[bz(h)]}}}}}}function cx(b){var a=ch(b);return function(c){return a(c)?bg:true}}function bd(a,b){if(bn(a)){cS(a,b)}else{if(a!=bg){b(a,0)}}return a}function cX(){this["state"]=null;this["values"]=[];this["parent"]=null}function b3(){var a=[];var c=arguments;var b=c.length;var h=0;var d=0;var e=new cX();e.errHandled=function(){d++;if(e.parent){e.parent.errHandled()}};var i=e.fire=function(k,j){if(e.state==null&&k!=null){e.state=!!k;e.values=bn(j)?j:[j];setTimeout(function(){cS(a,function(l){l()})},0)}return e};cS(c,function g(k,j){try{if(k.then){k.then(function(n){var m;if((bR(n)||cJ(n))&&cJ(m=n.then)){g(n,j)}else{e.values[j]=bW(arguments);if(++h==b){i(true,b<2?e.values[j]:e.values)}}},function(m){e.values[j]=bW(arguments);i(false,b<2?e.values[j]:[e.values[j][0],e.values,j])})}else{k(function(){i(true,bW(arguments))},function(){i(false,bW(arguments))})}}catch(l){i(false,[l,e.values,j])}});e.stop=function(){cS(c,function(j){if(j.stop){j.stop()}});return e.stop0&&bB(e.stop0)};var f=e.then=function(k,l){var m=b3();var j=function(){try{var o=(e.state?k:l);if(cJ(o)){(function p(t){try{var q,s=0;if((bR(t)||cJ(t))&&cJ(q=t.then)){if(t===m){throw new TypeError()}q.call(t,function(u){if(!s++){p(u)}},function(u){if(!s++){m.fire(false,[u])}});m.stop0=t.stop}else{m.fire(true,[t])}}catch(r){if(!(s++)){m.fire(false,[r]);if(!d){throw r}}}})(bB(o,cP,e.values))}else{m.fire(e.state,e.values)}}catch(n){m.fire(false,[n]);if(!d){throw n}}};if(cJ(l)){e.errHandled()}m.stop0=e.stop;m.parent=e;if(e.state!=null){setTimeout(j,0)}else{a.push(j)}return m};e.always=function(j){return f(j,j)};e.error=function(j){return f(0,j)};return e}function cc(e,a){var b=this,d=0;if(e){for(var g=0,f=e.length;g<f;g++){var c=e[g];if(a&&bn(c)){for(var h=0,i=c.length;h<i;h++){b[d++]=c[h]}}else{b[d++]=c}}}else{b[d++]=a}b.length=d;b._=true}function cj(){return new cc(arguments,true)}bU({each:cM(cS),filter:bh(bS),collect:bh(b5),map:bh(b8),toObject:cM(bv),equals:cM(bM),sub:bh(cA),reverse:cM(by),find:cM(bL),findLast:cM(cD),startsWith:cM(bp),endsWith:cM(bw),contains:cM(ci),call:bh(cG),array:cM(bW),unite:cM(bj),merge:cM(b1),uniq:bh(cU),intersection:bh(bq),join:function(a){return b8(this,bT).join(a)},reduce:function(a,b){cS(this,function(c,d){b=a.call(this,b,c,d)});return b},sort:function(a){return new cc(b8(this,bT).sort(a))},remove:function(){bd(this,function(a){if(a.parentNode){a.parentNode.removeChild(a)}})},text:function(){return bm(bd,this,function(a){return a.textContent})["join"]("")},trav:function(c,e,a){var b=bD(e);var d=ch(b?bg:e);var f=b?e:a;return new cc(cm(this,function(h){var i=[];var g=h;while((g=g[c])&&i.length!=f){if(d(g)){i.push(g)}}return i}))},next:function(b,a){return this["trav"]("nextSibling",b,a||1)},up:function(b,a){return this["trav"]("parentNode",b,a||1)},select:function(b,a){return cL(b,this,a)},is:function(a){return !this["find"](cx(a))},only:function(a){return new cc(bS(this,ch(a)))},not:function(a){return new cc(bS(this,cx(a)))},get:function(f,h){var g=this;var d=g[0];if(d){if(cs(f)){var e=/^(\W*)(.*)/.exec(cp(f,/^%/,"@data-"));var a=e[1];var c;if(bE[a]){c=bE[a](this,e[2])}else{if(f=="$"){c=g.get("className")}else{if(f=="$$"){c=g.get("@style")}else{if(f=="$$slide"){c=g.get("$height")}else{if(f=="$$fade"||f=="$$show"){if(g.get("$visibility")=="hidden"||g.get("$display")=="none"){c=0}else{if(f=="$$fade"){c=isNaN(g.get("$opacity",true))?1:g.get("$opacity",true)}else{c=1}}}else{if(a=="$"){c=cW.getComputedStyle(d,bg)["getPropertyValue"](cp(e[2],/[A-Z]/g,function(i){return"-"+i.toLowerCase()}))}else{if(a=="@"){c=d.getAttribute(e[2])}else{c=d[e[2]]}}}}}}}return h?cq(c):c}else{var b={};(bn(f)?bd:bi)(f,function(i){b[i]=g.get(i,h)});return b}}},set:function(c,a){var e=this;if(a!==cP){var d=/^(\W*)(.*)/.exec(cp(cp(c,/^\$float$/,"cssFloat"),/^%/,"@data-"));var b=d[1];if(bQ[b]){bQ[b](this,d[2],a)}else{if(c=="$$fade"){this["set"]({"$visibility":a?"visible":"hidden","$opacity":a})}else{if(c=="$$slide"){e.set({"$visibility":a?"visible":"hidden","$overflow":"hidden","$height":/px/.test(a)?a:function(g,h,f){return cO(cL(f),a)}})}else{if(c=="$$show"){if(a){e.set({"$visibility":a?"visible":"hidden","$display":""})["set"]({"$display":function(f){return f=="none"?"block":f}})}else{e.set({"$display":"none"})}}else{if(c=="$$"){e.set("@style",a)}else{bd(this,function(g,f){var h=cJ(a)?a(cL(g)["get"](c),f,g):a;if(b=="$"){if(d[2]){g.style[d[2]]=h}else{bd(h&&h.split(/\s+/),function(k){var j=cp(k,/^[+-]/);var i=g.className||"";var l=cp(i,RegExp("(^|\\s+)"+j+"(?=$|\\s)"));if(/^\+/.test(k)||(j==k&&i==l)){l+=" "+j}g.className=cI(l)})}}else{if(c=="$$scrollX"){g.scroll(h,cL(g)["get"]("$$scrollY"))}else{if(c=="$$scrollY"){g.scroll(cL(g)["get"]("$$scrollX"),h)}else{if(b=="@"){if(h==bg){g.removeAttribute(d[2])}else{g.setAttribute(d[2],h)}}else{g[d[2]]=h}}}}})}}}}}}else{if(cs(c)||cJ(c)){e.set("$",c)}else{bi(c,function(f,g){e.set(f,g)})}}return e},show:function(){return this["set"]("$$show",1)},hide:function(){return this["set"]("$$show",0)},add:function(b,a){return this["each"](function(c,d){var f;function e(g){if(bn(g)){bd(g,e)}else{if(cJ(g)){e(g(c,d))}else{if(g!=bg){var h=ck(g)?g:document.createTextNode(g);if(f){f.parentNode.insertBefore(h,f.nextSibling)}else{if(a){a(h,c,c.parentNode)}else{c.appendChild(h)}}f=h}}}}e(d&&!cJ(b)?bV(b):b)})},fill:function(a){return this["each"](function(b){cL(b.childNodes)["remove"]()})["add"](a)},addAfter:function(a){return this["add"](a,function(c,d,b){b.insertBefore(c,d.nextSibling)})},addBefore:function(a){return this["add"](a,function(c,d,b){b.insertBefore(c,d)})},addFront:function(a){return this["add"](a,function(b,c){c.insertBefore(b,c.firstChild)})},replace:function(a){return this["add"](a,function(c,d,b){b.replaceChild(c,d)})},clone:bh(bV),animate:function(d,a,c){var f=b3();var g=this;var b=bm(bd,this,function(j,m){var i=cL(j),l,k={};bi(l=i.get(d),function(o,n){var p=d[o];k[o]=cJ(p)?p(n,m,j):o=="$$slide"?cO(i,p):p});return i.dial(l,k,c)});var e=a||500;var h;f.stop0=function(){f.fire(false);return h()};h=cL.loop(function(i){cG(b,[i/e]);if(i>=e){h();f.fire(true,[g])}});return f},dial:function(b,d,g){var f=this;var c=g||0;var e=cJ(c)?c:function(i,j,h){return h*(j-i)*(c+(1-c)*h*(3-2*h))+i};function a(h,i){return(/^#/.test(h))?parseInt(h.length>6?h.substr(i*2+1,2):((h=h.charAt(i+1))+h),16):cq(h.split(",")[i])}return function(h){bi(b,function(i,k){var j=d[i],l=0;f.set(i,h<=0?k:h>=1?j:(/^#|rgb\(/.test(j))?("rgb("+Math.round(e(a(k,l),a(j,l++),h))+","+Math.round(e(a(k,l),a(j,l++),h))+","+Math.round(e(a(k,l),a(j,l++),h))+")"):cp(j,/-?[\d.]+/,b0(e(cq(k),cq(j),h))))})}},toggle:function(a,b,f,d){var g=this;var e=false;var c;var h;if(b){g.set(a);return function(i){if(i!==e){h=(e=(i===true||i===false?i:!e))?b:a;if(f){(c=g.animate(h,c?c.stop():f,d))["then"](function(){c=bg})}else{g.set(h)}}}}else{return g.toggle(cp(a,/\b(?=\w)/g,"-"),cp(a,/\b(?=\w)/g,"+"))}},values:function(a){var b=a||{};this["each"](function(d){var c=d.name||d.id,f=b0(d.value);if(/form/i.test(d.tagName)){for(var e=0;e<d.elements.length;e++){cL(d.elements[e])["values"](b)}}else{if(c&&(!/ox|io/i.test(d.type)||d.checked)){b[c]=b[c]==bg?f:bm(bd,[b[c],f],bT)}}});return b},offset:function(){var a=this[0];var b={x:0,y:0};while(a){b.x+=a.offsetLeft;b.y+=a.offsetTop;a=a.offsetParent}return b},on:bH,onOver:function(a,c){var b=this,d=[];if(cJ(c)){return this["on"](a,"|mouseover |mouseout",function(e,f){var g=e.relatedTarget||e.toElement;var h=e.type!="mouseout";if(d[f]!==h){if(h||(!g)||(g!=b[f]&&!cL(g)["up"](b[f]).length)){d[f]=h;c.call(this,h,e)}}})}else{return this["onOver"](bg,a)}},onFocus:function(c,b,a){if(cJ(b)){return this["on"](c,"|blur",b,[false],a)["on"](c,"|focus",b,[true],a)}else{return this["onFocus"](bg,c,b)}},onChange:function cB(a,c,b){if(cJ(c)){return this["on"](a,"|input |change |click",function(e,f){var d=this[0];var g=/ox|io/i.test(d.type)?d.checked:d.value;if(d[cK]!=g){c.call(this,d[cK]=g,f)}},b)}else{return this["onChange"](bg,a,c)}},onClick:function(a,c,d,b){if(cJ(c)){return this["on"](a,"click",c,d,b)}else{return this["onClick"](bg,a,c,d)}},trigger:function(b,a){return this["each"](function(e,f){var c=true,d=e;while(d&&c){bi(d.M,function(g,h){c=c&&h(b,a,e)});d=d.parentNode}})},per:function(a,b){if(cJ(a)){for(var d=this.length,c=0;c<d;c++){a.call(this,new cc(bg,this[c]),c)}}else{cL(a,this)["per"](b)}return this},ht:function(a,c){var b=arguments.length>2?b1(cA(arguments,1)):c;return this["set"]("innerHTML",cJ(a)?a(b):/{{/.test(a)?M(a,b):/^#\S+$/.test(a)?M(cV(a)["text"],b):a)}},cc.prototype);bU({request:function(k,i,d,c){var e=c||{};var a,j=0,f=b3(),g=d&&(d.constructor==e.constructor);try{f.xhr=a=new XMLHttpRequest();f.stop0=function(){a.abort()};if(g){d=bm(bi,d,function h(m,l){return bm(bd,l,function(n){return encodeURIComponent(m)+((n!=bg)?"="+encodeURIComponent(n):"")})}).join("&")}if(d!=bg&&!/post/i.test(k)){i+="?"+d;d=bg}a.open(k,i,true,e.user,e.pass);if(g&&/post/i.test(k)){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}bi(e.headers,function(m,l){a.setRequestHeader(m,l)});bi(e.xhr,function(m,l){a[m]=l});a.onreadystatechange=function(){if(a.readyState==4&&!j++){if(a.status>=200&&a.status<300){f.fire(true,[a.responseText,a])}else{f.fire(false,[a.status,a.responseText,a])}}};a.send(d)}catch(b){if(!j){f.fire(false,[0,bg,b0(b)])}}return f},toJSON:JSON.stringify,parseJSON:JSON.parse,ready:a0,loop:function(c){var a;var d=0;var b=bP++;var f=cW.requestAnimationFrame||function(h){setTimeout(function(){h(+new Date())},33)};function g(h){bi(cf,function(i,j){j(h)});if(cC){f(g)}}function e(){if(cf[b]){delete cf[b];cC--}return d}cf[b]=function(h){a=a||h;c(d=h-a,e)};if(!(cC++)){f(g)}return e},off:bF,setCookie:function(c,b,d,a){document.cookie=c+"="+(a?b:escape(b))+(d?("; expires="+(bR(d)?d:new Date((+new Date())+d*86400000)).toUTCString()):"")},getCookie:function(c,a){var b,d=(b=new RegExp("(^|;)\\s*"+c+"=([^;]*)").exec(document.cookie))&&b[2];return a?d:d&&unescape(d)},wait:function(c,d){var b=b3();var a=setTimeout(function(){b.fire(true,d)},c);b.stop0=function(){b.fire(false);clearTimeout(a)};return b}},cL);bU({filter:cb(bS),collect:cb(b5),map:cb(b8),sub:cb(cA),reverse:by,each:cS,toObject:bv,find:bL,findLast:cD,contains:ci,startsWith:bp,endsWith:bw,equals:bM,call:cb(cG),array:bW,unite:bj,merge:b1,uniq:cb(cU),intersection:cb(bq),keys:cb(bJ),values:cb(function(a,c){var b=[];if(c){cS(c,function(d){b.push(a[d])})}else{bi(a,function(e,d){b.push(d)})}return b}),copyObj:bU,extend:function(a){return b1(cA(arguments,1),a)},range:function(a,e){var c=[],b=(e==bg)?a:e;for(var d=(e!=bg)?a:0;d<b;d++){c.push(d)}return new cc(c)},bind:cz,partial:br,eachObj:bi,mapObj:function(a,b,c){var d={};bi(a,function(f,e){d[f]=b.call(c||a,f,e)});return d},filterObj:function(a,b,d){var c={};bi(a,function(f,e){if(b.call(d||a,f,e)){c[f]=e}});return c},isList:bn,isFunction:cJ,isObject:bR,isNumber:bD,isBool:bK,isDate:bu,isValue:b6,isString:cs,toString:b0,dateClone:cd,dateAdd:bY,dateDiff:cH,dateMidnight:bN,pad:be,formatValue:cl,parseDate:ca,parseNumber:cg,trim:cI,isEmpty:function(a,b){return a==bg||!a.length||(b&&/^\s*$/.test(a))},escapeRegExp:ct,escapeHtml:b4,format:function(b,c,a){return bG(b,a)(c)},template:bG,formatHtml:M,promise:b3},cj);document.addEventListener("DOMContentLoaded",function(){cG(cF);cF=bg},false);return{HTML:function(){var a=bC("div");return cj(bB(a.ht,a,arguments)[0].childNodes)},_:cj,"$":cL,"$$":cV,EE:bC,M:cc,getter:bE,setter:bQ}};MINI=MINIFIED();_=MINI._,$=MINI.$,$$=MINI.$$,EE=MINI.EE,HTML=MINI.HTML;(function(){function a9(a){return"function"==typeof a||"object"==typeof a&&null!==a}function aU(a){return"function"==typeof a}function a0(a){return"object"==typeof a&&null!==a}function aW(a){ai=a}function aZ(a){ag=a}function a5(){return function(){process.nextTick(a2)}}function aV(){return function(){aB(a2)}}function be(){var b=0,a=new au(a2),c=document.createTextNode("");return a.observe(c,{characterData:!0}),function(){c.data=b=++b%2}}function aT(){var a=new MessageChannel;return a.port1.onmessage=a2,function(){a.port2.postMessage(0)}}function bb(){return function(){setTimeout(a2,1)}}function a2(){for(var b=0;aM>b;b+=2){var a=ad[b],c=ad[b+1];a(c),ad[b]=void 0,ad[b+1]=void 0}aM=0}function a8(){try{var b=require,a=b("vertx");return aB=a.runOnLoop||a.runOnContext,aV()}catch(c){return bb()}}function aY(){}function a6(){return new TypeError("You cannot resolve a promise with itself")}function a7(){return new TypeError("A promises callback cannot return that same promise.")}function a1(b){try{return b.then}catch(a){return af.error=a,af}}function ba(c,a,f,b){try{c.call(a,f,b)}catch(d){return d}}function aS(b,a,c){ag(function(f){var d=!1,g=ba(c,a,function(e){d||(d=!0,a!==e?aQ(f,e):aE(f,e))},function(e){d||(d=!0,az(f,e))},"Settle: "+(f._label||" unknown promise"));!d&&g&&(d=!0,az(f,g))},b)}function bf(b,a){a._state===am?aE(b,a._result):a._state===bd?az(b,a._result):aC(a,void 0,function(c){aQ(b,c)},function(c){az(b,c)})}function aN(b,c){if(c.constructor===b.constructor){bf(b,c)}else{var a=a1(c);a===af?az(b,af.error):void 0===a?aE(b,c):aU(a)?aS(b,c,a):aE(b,c)}}function aQ(a,b){a===b?az(a,a6()):a9(b)?aN(a,b):aE(a,b)}function bc(a){a._onerror&&a._onerror(a._result),ao(a)}function aE(b,a){b._state===at&&(b._result=a,b._state=am,0!==b._subscribers.length&&ag(ao,b))}function az(b,a){b._state===at&&(b._state=bd,b._result=a,ag(bc,b))}function aC(d,b,g,c){var f=d._subscribers,a=f.length;d._onerror=null,f[a]=b,f[a+am]=g,f[a+bd]=c,0===a&&d._state&&ag(ao,d)}function ao(f){var b=f._subscribers,h=f._state;if(0!==b.length){for(var d,g,a=f._result,c=0;c<b.length;c+=3){d=b[c],g=b[c+h],d?ap(h,d,g,a):g(a)}f._subscribers.length=0}}function ak(){this.error=null}function ar(b,a){try{return b(a)}catch(c){return aa.error=c,aa}}function ap(h,f,b,d){var g,m,k,l,j=aU(b);if(j){if(g=ar(b,d),g===aa?(l=!0,m=g.error,g=null):k=!0,f===g){return void az(f,a7())}}else{g=d,k=!0}f._state!==at||(j&&k?aQ(f,g):l?az(f,m):h===am?aE(f,g):h===bd&&az(f,g))}function aq(b,a){try{a(function(d){aQ(b,d)},function(d){az(b,d)})}catch(c){az(b,c)}}function a3(b,a){var c=this;c._instanceConstructor=b,c.promise=new b(aY),c._validateInput(a)?(c._input=a,c.length=a.length,c._remaining=a.length,c._init(),0===c.length?aE(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&aE(c.promise,c._result))):az(c.promise,c._validationError())}function an(a){return new aO(this,a).promise}function aP(f){function b(i){aQ(g,i)}function h(i){az(g,i)}var d=this,g=new d(aY);if(!av(f)){return az(g,new TypeError("You must pass an array to race.")),g}for(var a=f.length,c=0;g._state===at&&a>c;c++){aC(d.resolve(f[c]),void 0,b,h)}return g}function al(b){var a=this;if(b&&"object"==typeof b&&b.constructor===a){return b}var c=new a(aY);return aQ(c,b),c}function aj(b){var a=this,c=new a(aY);return az(c,b),c}function a4(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ay(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ax(a){this._id=aR++,this._state=void 0,this._result=void 0,this._subscribers=[],aY!==a&&(aU(a)||a4(),this instanceof ax||ay(),aq(this,a))}function aD(){var b;if("undefined"!=typeof global){b=global}else{if("undefined"!=typeof self){b=self}else{try{b=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}}}var c=b.Promise;(!c||"[object Promise]"!==Object.prototype.toString.call(c.resolve())||c.cast)&&(b.Promise=aH)}var aG;aG=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var aB,ai,aX,av=aG,aM=0,ag=({}.toString,function(b,a){ad[aM]=b,ad[aM+1]=a,aM+=2,2===aM&&(ai?ai(a2):aX())}),ab="undefined"!=typeof window?window:void 0,aw=ab||{},au=aw.MutationObserver||aw.WebKitMutationObserver,ah="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ac="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ad=new Array(1000);aX=ah?a5():au?be():ac?aT():void 0===ab&&"function"==typeof require?a8():bb();var at=void 0,am=1,bd=2,af=new ak,aa=new ak;a3.prototype._validateInput=function(a){return av(a)},a3.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},a3.prototype._init=function(){this._result=new Array(this.length)};var aO=a3;a3.prototype._enumerate=function(){for(var c=this,a=c.length,f=c.promise,b=c._input,d=0;f._state===at&&a>d;d++){c._eachEntry(b[d],d)}},a3.prototype._eachEntry=function(c,a){var b=this,d=b._instanceConstructor;a0(c)?c.constructor===d&&c._state!==at?(c._onerror=null,b._settledAt(c._state,a,c._result)):b._willSettleAt(d.resolve(c),a):(b._remaining--,b._result[a]=c)},a3.prototype._settledAt=function(c,a,f){var b=this,d=b.promise;d._state===at&&(b._remaining--,c===bd?az(d,f):b._result[a]=f),0===b._remaining&&aE(d,b._result)},a3.prototype._willSettleAt=function(b,a){var c=this;aC(b,void 0,function(d){c._settledAt(am,a,d)},function(d){c._settledAt(bd,a,d)})};var aL=an,aJ=aP,aF=al,aA=aj,aR=0,aH=ax;ax.all=aL,ax.race=aJ,ax.resolve=aF,ax.reject=aA,ax._setScheduler=aW,ax._setAsap=aZ,ax._asap=ag,ax.prototype={constructor:ax,then:function(f,b){var h=this,d=h._state;if(d===am&&!f||d===bd&&!b){return this}var g=new this.constructor(aY),a=h._result;if(d){var c=arguments[d-1];ag(function(){ap(d,g,c,a)})}else{aC(h,g,f,b)}return g},"catch":function(a){return this.then(null,a)}};var aK=aD,aI={Promise:aH,polyfill:aK};"function"==typeof define&&define.amd?define(function(){return aI}):"undefined"!=typeof module&&module.exports?module.exports=aI:"undefined"!=typeof this&&(this.ES6Promise=aI),aK()}).call(this),"undefined"==typeof Promise&&ES6Promise.polyfill(),Function.prototype.bind||(Function.prototype.bind=function(c){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var a=Array.prototype.slice.call(arguments,1),f=this,b=function(){},d=function(){return f.apply(this instanceof b&&c?this:c,a.concat(Array.prototype.slice.call(arguments)))};return b.prototype=this.prototype,d.prototype=new b,d}),Array.prototype.map||(Array.prototype.map=function(g,k){if(void 0===this||null===this){throw new TypeError("this is null or not defined")}var d,b=Object(this),c=b.length>>>0;if("function"!=typeof g){throw new TypeError(g+" is not a function")}arguments.length>1&&(d=k);for(var f=new Array(c),l=0;c>l;){var h,j;l in b&&(h=b[l],j=g.call(d,h,l,b),f[l]=j),l++}return f}),Array.prototype.filter||(Array.prototype.filter=function(f){if(void 0===this||null===this){throw new TypeError("this is null or not defined")}var b=Object(this),h=b.length>>>0;if("function"!=typeof f){throw new TypeError(f+" is not a function")}for(var d=[],g=arguments.length>=2?arguments[1]:void 0,a=0;h>a;a++){if(a in b){var c=b[a];f.call(g,c,a,b)&&d.push(c)}}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(f,b){var h,d;if(null===this||void 0===this){throw new TypeError(" this is null or not defined")}var g=Object(this),a=g.length>>>0;if("function"!=typeof f){throw new TypeError(f+" is not a function")}for(arguments.length>1&&(h=b),d=0;a>d;){var c;d in g&&(c=g[d],f.call(h,c,d,g)),d++}}),!function(b,a){"function"==typeof define&&define.amd?define("stackframe",[],a):"object"==typeof exports?module.exports=a():b.StackFrame=a()}(this,function(){function b(c){return !isNaN(parseFloat(c))&&isFinite(c)}function a(g,d,j,f,h,c){void 0!==g&&this.setFunctionName(g),void 0!==d&&this.setArgs(d),void 0!==j&&this.setFileName(j),void 0!==f&&this.setLineNumber(f),void 0!==h&&this.setColumnNumber(h),void 0!==c&&this.setSource(c)}return a.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(c){this.functionName=String(c)},getArgs:function(){return this.args},setArgs:function(c){if("[object Array]"!==Object.prototype.toString.call(c)){throw new TypeError("Args must be an Array")}this.args=c},getFileName:function(){return this.fileName},setFileName:function(c){this.fileName=String(c)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(c){if(!b(c)){throw new TypeError("Line Number must be a Number")}this.lineNumber=Number(c)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(c){if(!b(c)){throw new TypeError("Column Number must be a Number")}this.columnNumber=Number(c)},getSource:function(){return this.source},setSource:function(c){this.source=String(c)},toString:function(){var d=this.getFunctionName()||"{anonymous}",g="("+(this.getArgs()||[]).join(",")+")",e=this.getFileName()?"@"+this.getFileName():"",f=b(this.getLineNumber())?":"+this.getLineNumber():"",c=b(this.getColumnNumber())?":"+this.getColumnNumber():"";return d+g+e+f+c}},a});var SourceMap=function(b){function a(d){if(c[d]){return c[d].exports}var e=c[d]={exports:{},id:d,loaded:!1};return b[d].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var c={};return a.m=b,a.c=c,a.p="",a(0)}([function(m,w,g){function b(c){var a=c;return"string"==typeof c&&(a=JSON.parse(c.replace(/^\)\]\}'/,""))),null!=a.sections?new x(a):new d(a)}function d(A){var C=A;"string"==typeof A&&(C=JSON.parse(A.replace(/^\)\]\}'/,"")));var f=q.getArg(C,"version"),a=q.getArg(C,"sources"),c=q.getArg(C,"names",[]),z=q.getArg(C,"sourceRoot",null),D=q.getArg(C,"sourcesContent",null),B=q.getArg(C,"mappings"),y=q.getArg(C,"file",null);if(f!=this._version){throw new Error("Unsupported version: "+f)}a=a.map(q.normalize).map(function(i){return z&&q.isAbsolute(z)&&q.isAbsolute(i)?q.relative(z,i):i}),this._names=p.fromArray(c,!0),this._sources=p.fromArray(a,!0),this.sourceRoot=z,this.sourcesContent=D,this._mappings=B,this.file=y}function j(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function x(f){var c=f;"string"==typeof f&&(c=JSON.parse(f.replace(/^\)\]\}'/,"")));var r=q.getArg(c,"version"),l=q.getArg(c,"sections");if(r!=this._version){throw new Error("Unsupported version: "+r)}this._sources=new p,this._names=new p;var a={line:-1,column:0};this._sections=l.map(function(s){if(s.url){throw new Error("Support for url field in sections not implemented.")}var i=q.getArg(s,"offset"),y=q.getArg(i,"line"),u=q.getArg(i,"column");if(y<a.line||y===a.line&&u<a.column){throw new Error("Section offsets must be ordered and non-overlapping.")}return a=i,{generatedOffset:{generatedLine:y+1,generatedColumn:u+1},consumer:new b(q.getArg(s,"map"))}})}var q=g(1),v=g(2),p=g(3).ArraySet,h=g(4),k=g(6).quickSort;b.fromSourceMap=function(a){return d.fromSourceMap(a)},b.prototype._version=3,b.prototype.__generatedMappings=null,Object.defineProperty(b.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),b.prototype.__originalMappings=null,Object.defineProperty(b.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),b.prototype._charIsMappingSeparator=function(c,a){var f=c.charAt(a);return";"===f||","===f},b.prototype._parseMappings=function(c,a){throw new Error("Subclasses must implement _parseMappings")},b.GENERATED_ORDER=1,b.ORIGINAL_ORDER=2,b.GREATEST_LOWER_BOUND=1,b.LEAST_UPPER_BOUND=2,b.prototype.eachMapping=function(r,f,z){var y,c=f||null,l=z||b.GENERATED_ORDER;switch(l){case b.GENERATED_ORDER:y=this._generatedMappings;break;case b.ORIGINAL_ORDER:y=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;y.map(function(n){var i=null===n.source?null:this._sources.at(n.source);return null!=i&&null!=a&&(i=q.join(a,i)),{source:i,generatedLine:n.generatedLine,generatedColumn:n.generatedColumn,originalLine:n.originalLine,originalColumn:n.originalColumn,name:null===n.name?null:this._names.at(n.name)}},this).forEach(r,c)},b.prototype.allGeneratedPositionsFor=function(y){var f=q.getArg(y,"line"),B={source:q.getArg(y,"source"),originalLine:f,originalColumn:q.getArg(y,"column",0)};if(null!=this.sourceRoot&&(B.source=q.relative(this.sourceRoot,B.source)),!this._sources.has(B.source)){return[]}B.source=this._sources.indexOf(B.source);var u=[],z=this._findMapping(B,this._originalMappings,"originalLine","originalColumn",q.compareByOriginalPositions,v.LEAST_UPPER_BOUND);if(z>=0){var a=this._originalMappings[z];if(void 0===y.column){for(var l=a.originalLine;a&&a.originalLine===l;){u.push({line:q.getArg(a,"generatedLine",null),column:q.getArg(a,"generatedColumn",null),lastColumn:q.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++z]}}else{for(var A=a.originalColumn;a&&a.originalLine===f&&a.originalColumn==A;){u.push({line:q.getArg(a,"generatedLine",null),column:q.getArg(a,"generatedColumn",null),lastColumn:q.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++z]}}}return u},w.SourceMapConsumer=b,d.prototype=Object.create(b.prototype),d.prototype.consumer=b,d.fromSourceMap=function(A){var C=Object.create(d.prototype),f=C._names=p.fromArray(A._names.toArray(),!0),a=C._sources=p.fromArray(A._sources.toArray(),!0);C.sourceRoot=A._sourceRoot,C.sourcesContent=A._generateSourcesContent(C._sources.toArray(),C.sourceRoot),C.file=A._file;for(var D=A._mappings.toArray().slice(),B=C.__generatedMappings=[],o=C.__originalMappings=[],c=0,y=D.length;y>c;c++){var z=D[c],i=new j;i.generatedLine=z.generatedLine,i.generatedColumn=z.generatedColumn,z.source&&(i.source=a.indexOf(z.source),i.originalLine=z.originalLine,i.originalColumn=z.originalColumn,z.name&&(i.name=f.indexOf(z.name)),o.push(i)),B.push(i)}return k(C.__originalMappings,q.compareByOriginalPositions),C},d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){return this._sources.toArray().map(function(a){return null!=this.sourceRoot?q.join(this.sourceRoot,a):a},this)}}),d.prototype._parseMappings=function(K,z){for(var G,C,F,B,l,M=1,E=0,I=0,J=0,H=0,L=0,i=K.length,O=0,a={},f={},N=[],D=[];i>O;){if(";"===K.charAt(O)){M++,O++,E=0}else{if(","===K.charAt(O)){O++}else{for(G=new j,G.generatedLine=M,B=O;i>B&&!this._charIsMappingSeparator(K,B);B++){}if(C=K.slice(O,B),F=a[C]){O+=C.length}else{for(F=[];B>O;){h.decode(K,O,f),l=f.value,O=f.rest,F.push(l)}if(2===F.length){throw new Error("Found a source, but no line and column")}if(3===F.length){throw new Error("Found a source and line, but no column")}a[C]=F}G.generatedColumn=E+F[0],E=G.generatedColumn,F.length>1&&(G.source=H+F[1],H+=F[1],G.originalLine=I+F[2],I=G.originalLine,G.originalLine+=1,G.originalColumn=J+F[3],J=G.originalColumn,F.length>4&&(G.name=L+F[4],L+=F[4])),D.push(G),"number"==typeof G.originalLine&&N.push(G)}}}k(D,q.compareByGeneratedPositionsDeflated),this.__generatedMappings=D,k(N,q.compareByOriginalPositions),this.__originalMappings=N},d.prototype._findMapping=function(l,c,u,f,s,a){if(l[u]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+l[u])}if(l[f]<0){throw new TypeError("Column must be greater than or equal to 0, got "+l[f])}return v.search(l,c,s,a)},d.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var a=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var f=this._generatedMappings[c+1];if(a.generatedLine===f.generatedLine){a.lastGeneratedColumn=f.generatedColumn-1;continue}}a.lastGeneratedColumn=1/0}},d.prototype.originalPositionFor=function(l){var c={generatedLine:q.getArg(l,"line"),generatedColumn:q.getArg(l,"column")},u=this._findMapping(c,this._generatedMappings,"generatedLine","generatedColumn",q.compareByGeneratedPositionsDeflated,q.getArg(l,"bias",b.GREATEST_LOWER_BOUND));if(u>=0){var r=this._generatedMappings[u];if(r.generatedLine===c.generatedLine){var a=q.getArg(r,"source",null);null!==a&&(a=this._sources.at(a),null!=this.sourceRoot&&(a=q.join(this.sourceRoot,a)));var f=q.getArg(r,"name",null);return null!==f&&(f=this._names.at(f)),{source:a,line:q.getArg(r,"originalLine",null),column:q.getArg(r,"originalColumn",null),name:f}}}return{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(a){return null==a}):!1},d.prototype.sourceContentFor=function(f,a){if(!this.sourcesContent){return null}if(null!=this.sourceRoot&&(f=q.relative(this.sourceRoot,f)),this._sources.has(f)){return this.sourcesContent[this._sources.indexOf(f)]}var i;if(null!=this.sourceRoot&&(i=q.urlParse(this.sourceRoot))){var c=f.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(c)){return this.sourcesContent[this._sources.indexOf(c)]}if((!i.path||"/"==i.path)&&this._sources.has("/"+f)){return this.sourcesContent[this._sources.indexOf("/"+f)]}}if(a){return null}throw new Error('"'+f+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(f){var c=q.getArg(f,"source");if(null!=this.sourceRoot&&(c=q.relative(this.sourceRoot,c)),!this._sources.has(c)){return{line:null,column:null,lastColumn:null}}c=this._sources.indexOf(c);var r={source:c,originalLine:q.getArg(f,"line"),originalColumn:q.getArg(f,"column")},l=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",q.compareByOriginalPositions,q.getArg(f,"bias",b.GREATEST_LOWER_BOUND));if(l>=0){var a=this._originalMappings[l];if(a.source===r.source){return{line:q.getArg(a,"generatedLine",null),column:q.getArg(a,"generatedColumn",null),lastColumn:q.getArg(a,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},w.BasicSourceMapConsumer=d,x.prototype=Object.create(b.prototype),x.prototype.constructor=b,x.prototype._version=3,Object.defineProperty(x.prototype,"sources",{get:function(){for(var c=[],a=0;a<this._sections.length;a++){for(var f=0;f<this._sections[a].consumer.sources.length;f++){c.push(this._sections[a].consumer.sources[f])}}return c}}),x.prototype.originalPositionFor=function(f){var a={generatedLine:q.getArg(f,"line"),generatedColumn:q.getArg(f,"column")},i=v.search(a,this._sections,function(o,l){var r=o.generatedLine-l.generatedOffset.generatedLine;return r?r:o.generatedColumn-l.generatedOffset.generatedColumn}),c=this._sections[i];return c?c.consumer.originalPositionFor({line:a.generatedLine-(c.generatedOffset.generatedLine-1),column:a.generatedColumn-(c.generatedOffset.generatedLine===a.generatedLine?c.generatedOffset.generatedColumn-1:0),bias:f.bias}):{source:null,line:null,column:null,name:null}},x.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(a){return a.consumer.hasContentsOfAllSources()})},x.prototype.sourceContentFor=function(f,a){for(var l=0;l<this._sections.length;l++){var c=this._sections[l],i=c.consumer.sourceContentFor(f,!0);if(i){return i}}if(a){return null}throw new Error('"'+f+'" is not in the SourceMap.')},x.prototype.generatedPositionFor=function(f){for(var a=0;a<this._sections.length;a++){var l=this._sections[a];if(-1!==l.consumer.sources.indexOf(q.getArg(f,"source"))){var c=l.consumer.generatedPositionFor(f);if(c){var i={line:c.line+(l.generatedOffset.generatedLine-1),column:c.column+(l.generatedOffset.generatedLine===c.line?l.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}},x.prototype._parseMappings=function(B,E){this.__generatedMappings=[],this.__originalMappings=[];for(var y=0;y<this._sections.length;y++){for(var a=this._sections[y],f=a.consumer._generatedMappings,A=0;A<f.length;A++){var F=f[y],D=a.consumer._sources.at(F.source);null!==a.consumer.sourceRoot&&(D=q.join(a.consumer.sourceRoot,D)),this._sources.add(D),D=this._sources.indexOf(D);var C=a.consumer._names.at(F.name);this._names.add(C),C=this._names.indexOf(C);var z={source:D,generatedLine:F.generatedLine+(a.generatedOffset.generatedLine-1),generatedColumn:F.column+(a.generatedOffset.generatedLine===F.generatedLine)?a.generatedOffset.generatedColumn-1:0,originalLine:F.originalLine,originalColumn:F.originalColumn,name:C};this.__generatedMappings.push(z),"number"==typeof z.originalLine&&this.__originalMappings.push(z)}}k(this.__generatedMappings,q.compareByGeneratedPositionsDeflated),k(this.__originalMappings,q.compareByOriginalPositions)},w.IndexedSourceMapConsumer=x},function(A,E){function k(c,a,f){if(a in c){return c[a]}if(3===arguments.length){return f}throw new Error('"'+a+'" is a required argument.')}function b(c){var a=c.match(y);return a?{scheme:a[1],auth:a[2],host:a[3],port:a[4],path:a[5]}:null}function j(c){var a="";return c.scheme&&(a+=c.scheme+":"),a+="//",c.auth&&(a+=c.auth+"@"),c.host&&(a+=c.host),c.port&&(a+=":"+c.port),c.path&&(a+=c.path),a}function w(p){var t=p,m=b(p);if(m){if(!m.path){return p}t=m.path}for(var o,g=E.isAbsolute(t),h=t.split(/\/+/),r=0,f=h.length-1;f>=0;f--){o=h[f],"."===o?h.splice(f,1):".."===o?r++:r>0&&(""===o?(h.splice(f+1,r),r=0):(h.splice(f,2),r--))}return t=h.join("/"),""===t&&(t=g?"/":"."),m?(m.path=t,j(m)):t}function F(h,f){""===h&&(h="."),""===f&&(f=".");var i=b(f),g=b(h);if(g&&(h=g.path||"/"),i&&!i.scheme){return g&&(i.scheme=g.scheme),j(i)}if(i||f.match(q)){return f}if(g&&!g.host&&!g.path){return g.host=f,j(g)}var c="/"===f.charAt(0)?f:w(h.replace(/\/+$/,"")+"/"+f);return g?(g.path=c,j(g)):c}function C(f,a){""===f&&(f="."),f=f.replace(/\/$/,"");for(var g=0;0!==a.indexOf(f+"/");){var c=f.lastIndexOf("/");if(0>c){return a}if(f=f.slice(0,c),f.match(/^([^\/]+:\/)?\/*$/)){return a}++g}return Array(g+1).join("../")+a.substr(f.length+1)}function D(a){return"$"+a}function B(a){return a.substr(1)}function v(f,a,g){var c=f.source-a.source;return 0!==c?c:(c=f.originalLine-a.originalLine,0!==c?c:(c=f.originalColumn-a.originalColumn,0!==c||g?c:(c=f.generatedColumn-a.generatedColumn,0!==c?c:(c=f.generatedLine-a.generatedLine,0!==c?c:f.name-a.name))))}function z(f,a,g){var c=f.generatedLine-a.generatedLine;return 0!==c?c:(c=f.generatedColumn-a.generatedColumn,0!==c||g?c:(c=f.source-a.source,0!==c?c:(c=f.originalLine-a.originalLine,0!==c?c:(c=f.originalColumn-a.originalColumn,0!==c?c:f.name-a.name))))}function d(c,a){return c===a?0:c>a?1:-1}function x(c,a){var f=c.generatedLine-a.generatedLine;return 0!==f?f:(f=c.generatedColumn-a.generatedColumn,0!==f?f:(f=d(c.source,a.source),0!==f?f:(f=c.originalLine-a.originalLine,0!==f?f:(f=c.originalColumn-a.originalColumn,0!==f?f:d(c.name,a.name)))))}E.getArg=k;var y=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,q=/^data:.+\,.+$/;E.urlParse=b,E.urlGenerate=j,E.normalize=w,E.join=F,E.isAbsolute=function(a){return"/"===a.charAt(0)||!!a.match(y)},E.relative=C,E.toSetString=D,E.fromSetString=B,E.compareByOriginalPositions=v,E.compareByGeneratedPositionsDeflated=z,E.compareByGeneratedPositionsInflated=x},function(b,a){function c(k,j,l,g,h,d){var f=Math.floor((j-k)/2)+k,m=h(l,g[f],!0);return 0===m?f:m>0?j-f>1?c(f,j,l,g,h,d):d==a.LEAST_UPPER_BOUND?j<g.length?j:-1:f:f-k>1?c(k,f,l,g,h,d):d==a.LEAST_UPPER_BOUND?f:0>k?-1:k}a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.search=function(h,g,j,d){if(0===g.length){return -1}var f=c(-1,g.length,h,g,j,d||a.GREATEST_LOWER_BOUND);if(0>f){return -1}for(;f-1>=0&&0===j(g[f],g[f-1],!0);){--f}return f}},function(c,a,f){function b(){this._array=[],this._set={}}var d=f(1);b.fromArray=function(j,h){for(var l=new b,k=0,g=j.length;g>k;k++){l.add(j[k],h)}return l},b.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},b.prototype.add=function(k,h){var l=d.toSetString(k),j=this._set.hasOwnProperty(l),g=this._array.length;(!j||h)&&this._array.push(k),j||(this._set[l]=g)},b.prototype.has=function(h){var g=d.toSetString(h);return this._set.hasOwnProperty(g)},b.prototype.indexOf=function(h){var g=d.toSetString(h);if(this._set.hasOwnProperty(g)){return this._set[g]}throw new Error('"'+h+'" is not in the set.')},b.prototype.at=function(g){if(g>=0&&g<this._array.length){return this._array[g]}throw new Error("No element indexed by "+g)},b.prototype.toArray=function(){return this._array.slice()},a.ArraySet=b},function(h,m,f){function b(a){return 0>a?(-a<<1)+1:(a<<1)+0}function d(c){var a=1===(1&c),i=c>>1;return a?-i:i}var g=f(5),p=5,k=1<<p,l=k-1,j=k;m.encode=function(c){var a,q="",i=b(c);do{a=i&l,i>>>=p,i>0&&(a|=j),q+=g.encode(a)}while(i>0);return q},m.decode=function(v,o,w){var q,i,c=v.length,s=0,u=0;do{if(o>=c){throw new Error("Expected more digits in base 64 VLQ value.")}if(i=g.decode(v.charCodeAt(o++)),-1===i){throw new Error("Invalid base64 digit: "+v.charAt(o-1))}q=!!(i&j),i&=l,s+=i<<u,u+=p}while(q);w.value=d(s),w.rest=o}},function(b,a){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");a.encode=function(d){if(d>=0&&d<c.length){return c[d]}throw new TypeError("Must be between 0 and 63: "+d)},a.decode=function(k){var v=65,g=90,d=97,f=122,j=48,w=57,p=43,q=47,m=26,h=52;return k>=v&&g>=k?k-v:k>=d&&f>=k?k-d+m:k>=j&&w>=k?k-j+h:k==p?62:k==q?63:-1}},function(c,a){function f(i,g,j){var h=i[g];i[g]=i[j],i[j]=h}function b(h,g){return Math.round(h+Math.random()*(g-h))}function d(k,p,h,q){if(q>h){var n=b(h,q),o=h-1;f(k,n,q);for(var m=k[q],g=h;q>g;g++){p(k[g],m)<=0&&(o+=1,f(k,o,g))}f(k,o+1,g);var j=o+1;d(k,p,h,j-1),d(k,p,j+1,q)}}a.quickSort=function(h,g){d(h,g,0,h.length-1)}}]);!function(b,a){"function"==typeof define&&define.amd?define("stacktrace-gps",["source-map","stackframe"],a):"object"==typeof exports?module.exports=a(require("source-map/lib/source-map-consumer"),require("stackframe")):b.StackTraceGPS=a(b.SourceMap,b.StackFrame)}(this,function(g,k){function d(m,a,o){var i=new XMLHttpRequest;i.open("get",m),i.onerror=o,i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<400){return a(i.responseText)}o(new Error("Unable to retrieve "+m))}},i.send()}function b(A,E,w){for(var m,v,y,F=/function\s+([^(]*?)\s*\(([^)]*)\)/,C=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,D=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,B=A.split("\n"),x="",z=Math.min(E,20),q=0;z>q;++q){if(m=B[E-q-1],y=m.indexOf("//"),y>=0&&(m=m.substr(0,y)),m){if(x=m+x,v=C.exec(x),v&&v[1]){return v[1]}if(v=F.exec(x),v&&v[1]){return v[1]}if(v=D.exec(x),v&&v[1]){return v[1]}}}return void 0}function c(){if("function"!=typeof Object.defineProperty||"function"!=typeof Object.create){throw new Error("Unable to consume source maps in older browsers")}}function f(a){if("object"!=typeof a){throw new TypeError("Given StackFrame is not an object")}if("string"!=typeof a.fileName){throw new TypeError("Given file name is not a String")}if("number"!=typeof a.lineNumber||a.lineNumber%1!==0||a.lineNumber<1){throw new TypeError("Given line number must be a positive integer")}if("number"!=typeof a.columnNumber||a.columnNumber%1!==0||a.columnNumber<0){throw new TypeError("Given column number must be a non-negative integer")}return !0}function l(i){var a=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)$/.exec(i);if(a&&a[1]){return a[1]}throw new Error("sourceMappingURL not found")}function h(x,t,v,p,q){var e=new g.SourceMapConsumer(x),m=e.originalPositionFor({line:v,column:p}),w=e.sourceContentFor(m.source);return w&&(q[m.source]=w),new k(m.name,t,m.source,m.line,m.column)}return function j(a){return this instanceof j?(a=a||{},this.sourceCache=a.sourceCache||{},this.ajax=d,this._atob=function(i){if(window&&window.atob){return window.atob(i)}if("undefined"!=typeof Buffer){return new Buffer(i,"base64").toString("utf-8")}throw new Error("No base64 decoder available")},this._get=function(e){return new Promise(function(x,v){var w="data:"===e.substr(0,5);if(this.sourceCache[e]){x(this.sourceCache[e])}else{if(a.offline&&!w){v(new Error("Cannot make network requests in offline mode"))}else{if(w){var q="application/json;base64";if(e.substr(5,q.length)!==q){v(new Error("The encoding of the inline sourcemap is not supported"))}else{var t="data:".length+q.length+",".length,m=e.substr(t),p=this._atob(m);this.sourceCache[e]=p,x(p)}}else{this.ajax(e,function(i){this.sourceCache[e]=i,x(i)}.bind(this),v)}}}}.bind(this))},this.pinpoint=function(i){return new Promise(function(e,m){this.getMappedLocation(i).then(function(o){function p(){e(o)}this.findFunctionName(o).then(e,p)["catch"](p)}.bind(this),m)}.bind(this))},this.findFunctionName=function(i){return new Promise(function(m,e){f(i),this._get(i.fileName).then(function(p){var n=b(p,i.lineNumber,i.columnNumber);m(new k(n,i.args,i.fileName,i.lineNumber,i.columnNumber))},e)}.bind(this))},void (this.getMappedLocation=function(i){return new Promise(function(m,p){c(),f(i);var o=this.sourceCache,e=i.fileName;this._get(e).then(function(q){var n=l(q),r="data:"===n.substr(0,5);"/"===n[0]||r||(n=e.substring(0,e.lastIndexOf("/")+1)+n),this._get(n).then(function(u){var t=i.lineNumber,s=i.columnNumber;m(h(u,i.args,t,s,o))},p)["catch"](p)}.bind(this),p)["catch"](p)}.bind(this))})):new j(a)}}),function(b,a){"function"==typeof define&&define.amd?define("stack-generator",["stackframe"],a):"object"==typeof exports?module.exports=a(require("stackframe")):b.StackGenerator=a(b.StackFrame)}(this,function(a){return{backtrace:function(c){var g=[],e=10;"object"==typeof c&&"number"==typeof c.maxStackSize&&(e=c.maxStackSize);for(var f=arguments.callee;f&&g.length<e;){var b=[].slice.call(f.arguments);/function(?:\s+([\w$]+))+\s*\(/.test(f.toString())?g.push(new a(RegExp.$1||void 0,b)):g.push(new a(void 0,b));try{f=f.caller}catch(d){break}}return g}}}),function(b,a){"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],a):"object"==typeof exports?module.exports=a(require("stackframe")):b.ErrorStackParser=a(b.StackFrame)}(this,function(b){var a=/(^|@)\S+\:\d+/,c=/\s+at .*(\S+\:\d+|\(native\))/;return{parse:function(d){if("undefined"!=typeof d.stacktrace||"undefined"!=typeof d["opera#sourceloc"]){return this.parseOpera(d)}if(d.stack&&d.stack.match(c)){return this.parseV8OrIE(d)}if(d.stack&&d.stack.match(a)){return this.parseFFOrSafari(d)}throw new Error("Cannot parse given Error object")},extractLocation:function(g){if(-1===g.indexOf(":")){return[g]}var d=g.replace(/[\(\)\s]/g,"").split(":"),i=d.pop(),f=d[d.length-1];if(!isNaN(parseFloat(f))&&isFinite(f)){var h=d.pop();return[d.join(":"),h,i]}return[d.join(":"),i,void 0]},parseV8OrIE:function(d){return d.stack.split("\n").filter(function(f){return !!f.match(c)},this).map(function(e){var h=e.replace(/^\s+/,"").split(/\s+/).slice(1),f=this.extractLocation(h.pop()),g=h[0]&&"Anonymous"!==h[0]?h[0]:void 0;return new b(g,void 0,f[0],f[1],f[2],e)},this)},parseFFOrSafari:function(d){return d.stack.split("\n").filter(function(f){return !!f.match(a)},this).map(function(e){var h=e.split("@"),f=this.extractLocation(h.pop()),g=h.shift()||void 0;return new b(g,void 0,f[0],f[1],f[2],e)},this)},parseOpera:function(d){return !d.stacktrace||d.message.indexOf("\n")>-1&&d.message.split("\n").length>d.stacktrace.split("\n").length?this.parseOpera9(d):d.stack?this.parseOpera11(d):this.parseOpera10(d)},parseOpera9:function(f){for(var k=/Line (\d+).*script (?:in )?(\S+)/i,h=f.message.split("\n"),j=[],e=2,g=h.length;g>e;e+=2){var d=k.exec(h[e]);d&&j.push(new b(void 0,void 0,d[2],d[1],void 0,h[e]))}return j},parseOpera10:function(f){for(var k=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,h=f.stacktrace.split("\n"),j=[],e=0,g=h.length;g>e;e+=2){var d=k.exec(h[e]);d&&j.push(new b(d[3]||void 0,void 0,d[2],d[1],void 0,h[e]))}return j},parseOpera11:function(d){return d.stack.split("\n").filter(function(f){return !!f.match(a)&&!f.match(/^Error created at/)},this).map(function(g){var l,j=g.split("@"),k=this.extractLocation(j.pop()),f=j.shift()||"",h=f.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;f.match(/\(([^\)]*)\)/)&&(l=f.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var e=void 0===l||"[arguments not available]"===l?void 0:l.split(",");return new b(h,e,k[0],k[1],k[2],g)},this)}}}),function(b,a){"function"==typeof define&&define.amd?define("stacktrace",["error-stack-parser","stack-generator","stacktrace-gps"],a):"object"==typeof exports?module.exports=a(require("error-stack-parser"),require("stack-generator"),require("stacktrace-gps")):b.StackTrace=a(b.ErrorStackParser,b.StackGenerator,b.StackTraceGPS)}(this,function(d,b,g){function c(i,h){var j={};return[i,h].forEach(function(l){for(var k in l){l.hasOwnProperty(k)&&(j[k]=l[k])}return j}),j}function f(h){return h.stack||h["opera#sourceloc"]}var a={filter:function(h){return -1===(h.functionName||"").indexOf("StackTrace$$")&&-1===(h.functionName||"").indexOf("ErrorStackParser$$")&&-1===(h.functionName||"").indexOf("StackTraceGPS$$")&&-1===(h.functionName||"").indexOf("StackGenerator$$")}};return{get:function(i){try{throw new Error}catch(h){return f(h)?this.fromError(h,i):this.generateArtificially(i)}},fromError:function(e,h){return h=c(a,h),new Promise(function(k){var j=d.parse(e);"function"==typeof h.filter&&(j=j.filter(h.filter)),k(Promise.all(j.map(function(i){return new Promise(function(l){function m(o){l(i)}new g(h).pinpoint(i).then(l,m)["catch"](m)})})))}.bind(this))},generateArtificially:function(h){h=c(a,h);var i=b.backtrace(h);return"function"==typeof h.filter&&(i=i.filter(h.filter)),Promise.resolve(i)},instrument:function(l,j,m,k){if("function"!=typeof l){throw new Error("Cannot instrument non-function object")}if("function"==typeof l.__stacktraceOriginalFn){return l}var h=function(){try{this.get().then(j,m)["catch"](m),l.apply(k||this,arguments)}catch(e){throw f(e)&&this.fromError(e).then(j,m)["catch"](m),e}}.bind(this);return h.__stacktraceOriginalFn=l,h},deinstrument:function(h){if("function"!=typeof h){throw new Error("Cannot de-instrument non-function object")}return"function"==typeof h.__stacktraceOriginalFn?h.__stacktraceOriginalFn:h},report:function(i,h){return new Promise(function(k,e){var j=new XMLHttpRequest;j.onerror=e,j.onreadystatechange=function(){4===j.readyState&&(j.status>=200&&j.status<400?k(j.responseText):e(new Error("POST to "+h+" failed with status: "+j.status)))},j.open("post",h),j.setRequestHeader("Content-Type","application/json"),j.send({stack:i})})}}});(function(a1){function bm(){}function al(m){if(!m||"object"!==typeof m){return !1}var l=aH(m)||an;return/object|function/.test(typeof l.Element)?m instanceof l.Element:1===m.nodeType&&"string"===typeof m.nodeName}function bk(l){return l===an||!(!l||!l.Window)&&l instanceof l.Window}function w(l){return ah(l)&&void 0!==typeof l.length&&a9(l.splice)}function ah(l){return !!l&&"object"===typeof l}function a9(l){return"function"===typeof l}function aU(l){return"number"===typeof l}function aZ(l){return"boolean"===typeof l}function aR(l){return"string"===typeof l}function d(l){if(!aR(l)){return !1}aM.querySelector(l);return !0}function ai(m,l){for(var n in l){m[n]=l[n]}return m}function by(m,l){for(var q in l){var p=!1,n;for(n in aY){if(0===q.indexOf(n)&&aY[n].test(q)){p=!0;break}}p||(m[q]=l[q])}return m}function bo(m,l){m.page=m.page||{};m.page.x=l.page.x;m.page.y=l.page.y;m.client=m.client||{};m.client.x=l.client.x;m.client.y=l.client.y;m.timeStamp=l.timeStamp}function bq(m,l,n){m.page.x=n.page.x-l.page.x;m.page.y=n.page.y-l.page.y;m.client.x=n.client.x-l.client.x;m.client.y=n.client.y-l.client.y;m.timeStamp=(new Date).getTime()-l.timeStamp;l=Math.max(m.timeStamp/1000,0.001);m.page.speed=bt(m.page.x,m.page.y)/l;m.page.vx=m.page.x/l;m.page.vy=m.page.y/l;m.client.speed=bt(m.client.x,m.page.y)/l;m.client.vx=m.client.x/l;m.client.vy=m.client.y/l}function bf(l){return l instanceof an.Event||bj&&an.Touch&&l instanceof an.Touch}function bc(m,l,n){n=n||{};m=m||"page";n.x=l[m+"X"];n.y=l[m+"Y"];return n}function aw(m,l){l=l||{};aD&&bf(m)?(bc("screen",m,l),l.x+=an.scrollX,l.y+=an.scrollY):bc("page",m,l);return l}function aj(m,l){l=l||{};aD&&bf(m)?bc("screen",m,l):bc("client",m,l);return l}function aQ(l){return aU(l.pointerId)?l.pointerId:l.identifier}function I(l){return l instanceof a2?l.correspondingUseElement:l}function aH(l){if(bk(l)){return l}l=l.ownerDocument||l;return l.defaultView||l.parentWindow||an}function g(l){return(l=l instanceof s?l.getBoundingClientRect():l.getClientRects()[0])&&{left:l.left,right:l.right,top:l.top,bottom:l.bottom,width:l.width||l.right-l.left,height:l.height||l.bottom-l.top}}function aA(m){var l,n=g(m);!ax&&n&&(l=(l=aH(m))||an,m=l.scrollX||l.document.documentElement.scrollLeft,l=l.scrollY||l.document.documentElement.scrollTop,n.left+=m,n.right+=m,n.top+=l,n.bottom+=l);return n}function bx(m){var l=[];w(m)?(l[0]=m[0],l[1]=m[1]):"touchend"===m.type?1===m.touches.length?(l[0]=m.touches[0],l[1]=m.changedTouches[0]):0===m.touches.length&&(l[0]=m.changedTouches[0],l[1]=m.changedTouches[1]):(l[0]=m.touches[0],l[1]=m.touches[1]);return l}function c(m){for(var l={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},p,n=0;n<m.length;n++){for(p in l){l[p]+=m[n][p]}}for(p in l){l[p]/=m.length}return l}function bn(m){if(m.length||m.touches&&1<m.touches.length){m=bx(m);var l=Math.min(m[0].pageX,m[1].pageX),n=Math.min(m[0].pageY,m[1].pageY);return{x:l,y:n,left:l,top:n,width:Math.max(m[0].pageX,m[1].pageX)-l,height:Math.max(m[0].pageY,m[1].pageY)-n}}}function a5(m,l){l=l||a4.deltaSource;var q=l+"X",p=l+"Y",n=bx(m);return bt(n[0][q]-n[1][q],n[0][p]-n[1][p])}function az(m,l,p){p=p||a4.deltaSource;var n=p+"X";p+="Y";m=bx(m);n=180*Math.atan((m[0][p]-m[1][p])/(m[0][n]-m[1][n]))/Math.PI;aU(l)&&(l=(n-l)%360,315<l?n-=360+n/360|0:135<l?n-=180+n/360|0:-315>l?n+=360+n/360|0:-135>l&&(n+=180+n/360|0));return n}function a3(m,l){var n=m?m.options.origin:a4.origin;"parent"===n?n=aT(l):"self"===n?n=m.getRect(l):d(n)&&(n=ae(l,n)||{x:0,y:0});a9(n)&&(n=n(m&&l));al(n)&&(n=aA(n));n.x="x" in n?n.x:n.left;n.y="y" in n?n.y:n.top;return n}function br(m,l,q,p){var n=1-m;return n*n*l+2*n*m*q+m*m*p}function aE(m,l){for(;l;){if(l===m){return !0}l=l.parentNode}return !1}function ae(m,l){for(var n=aT(m);al(n);){if(aL(n,l)){return n}n=aT(n)}return null}function aT(l){if((l=l.parentNode)&&l instanceof a7){for(;(l=l.host)&&l&&l instanceof a7;){}}return l}function af(m,l){return m._context===l.ownerDocument||aE(m._context,l)}function aC(m,l,n){return(m=m.options.ignoreFrom)&&al(n)?aR(m)?j(n,m,l):al(m)?aE(m,n):!1:!1}function bh(m,l,n){return(m=m.options.allowFrom)?al(n)?aR(m)?j(n,m,l):al(m)?aE(m,n):!1:!1:!0}function bg(m,l){if(!l){return !1}var n=l.options.drag.axis;return"xy"===m||"xy"===n||n===m}function bz(m,l){var n=m.options;/^resize/.test(l)&&(l="resize");return n[l].snap&&n[l].snap.enabled}function bp(m,l){var n=m.options;/^resize/.test(l)&&(l="resize");return n[l].restrict&&n[l].restrict.enabled}function aX(B,A,x){for(var v=B.options,t=v[x.name].max,v=v[x.name].maxPerElement,p=0,r=0,q=0,m=0,z=am.length;m<z;m++){var l=am[m],C=l.prepared.name;if(l.interacting()&&(p++,p>=k||l.target===B&&(r+=C===x.name|0,r>=t||l.element===A&&(q++,C!==x.name||q>=v)))){return !1}}return 0<k}function a(){this.prevDropElement=this.prevDropTarget=this.dropElement=this.dropTarget=this.element=this.target=null;this.prepared={name:null,axis:null,edges:null};this.matches=[];this.matchElements=[];this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null};if(a9(Function.prototype.bind)){this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this)}else{var l=this;this.boundInertiaFrame=function(){return l.inertiaFrame()};this.boundSmoothEndFrame=function(){return l.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]};this.pointers=[];this.pointerIds=[];this.downTargets=[];this.downTimes=[];this.holdTimers=[];this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0};this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0};this.downEvent=null;this.downPointer={};this.prevEvent=this._curEventTarget=this._eventTarget=null;this.tapTime=0;this.prevTap=null;this.startOffset={left:0,right:0,top:0,bottom:0};this.restrictOffset={left:0,right:0,top:0,bottom:0};this.snapOffsets=[];this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0};this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1};this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1};this.restrictStatus.snap=this.snapStatus;this.resizing=this.dragging=this.gesturing=this.pointerWasMoved=this.pointerIsDown=!1;this.resizeAxes="xy";this.mouse=!1;am.push(this)}function aO(m,l,v){var t=0,r=am.length,n=/mouse/i.test(m.pointerType||l)||4===m.pointerType,q;m=aQ(m);if(/down|start/i.test(l)){for(t=0;t<r;t++){q=am[t];var p=v;if(q.inertiaStatus.active&&q.target.options[q.prepared.name].inertia.allowResume&&q.mouse===n){for(;p;){if(p===q.element){return q}p=aT(p)}}}}if(n||!bj&&!ay){for(t=0;t<r;t++){if(am[t].mouse&&!am[t].inertiaStatus.active){return am[t]}}for(t=0;t<r;t++){if(am[t].mouse&&(!/down/.test(l)||!am[t].inertiaStatus.active)){return q}}q=new a;q.mouse=!0;return q}for(t=0;t<r;t++){if(-1!==ak(am[t].pointerIds,m)){return am[t]}}if(/up|end|out/i.test(l)){return null}for(t=0;t<r;t++){if(q=am[t],!(q.prepared.name&&!q.target.options.gesture.enabled||q.interacting()||!n&&q.mouse)){return q}}return new a}function ap(l){return function(m){var t,r=I(m.path?m.path[0]:m.target),q=I(m.currentTarget),n;if(bj&&/touch/.test(m.type)){for(u=(new Date).getTime(),n=0;n<m.changedTouches.length;n++){var p=m.changedTouches[n];if(t=aO(p,m.type,r)){t._updateEventTargets(r,q),t[l](p,m,r,q)}}}else{if(!ay&&/mouse/.test(m.type)){for(n=0;n<am.length;n++){if(!am[n].mouse&&am[n].pointerIsDown){return}}if(500>(new Date).getTime()-u){return}}if(t=aO(m,m.type,r)){t._updateEventTargets(r,q),t[l](m,m,r,q)}}}}function a0(P,O,N,M,L,H){var K,J,G=P.target,r=P.snapStatus,B=P.restrictStatus,x=P.pointers,z=(G&&G.options||a4).deltaSource,q=z+"X",F=z+"Y",D=G?G.options:a4,v=a3(G,L),C="start"===M,A="end"===M;K=C?P.startCoords:P.curCoords;L=L||P.element;J=ai({},K.page);K=ai({},K.client);J.x-=v.x;J.y-=v.y;K.x-=v.x;K.y-=v.y;var t=D[N].snap&&D[N].snap.relativePoints;!bz(G,N)||C&&t&&t.length||(this.snap={range:r.range,locked:r.locked,x:r.snappedX,y:r.snappedY,realX:r.realX,realY:r.realY,dx:r.dx,dy:r.dy},r.locked&&(J.x+=r.dx,J.y+=r.dy,K.x+=r.dx,K.y+=r.dy));!bp(G,N)||C&&D[N].restrict.elementRect||!B.restricted||(J.x+=B.dx,J.y+=B.dy,K.x+=B.dx,K.y+=B.dy,this.restrict={dx:B.dx,dy:B.dy});this.pageX=J.x;this.pageY=J.y;this.clientX=K.x;this.clientY=K.y;this.x0=P.startCoords.page.x-v.x;this.y0=P.startCoords.page.y-v.y;this.clientX0=P.startCoords.client.x-v.x;this.clientY0=P.startCoords.client.y-v.y;this.ctrlKey=O.ctrlKey;this.altKey=O.altKey;this.shiftKey=O.shiftKey;this.metaKey=O.metaKey;this.button=O.button;this.buttons=O.buttons;this.target=L;this.t0=P.downTimes[0];this.type=N+(M||"");this.interaction=P;this.interactable=G;L=P.inertiaStatus;L.active&&(this.detail="inertia");H&&(this.relatedTarget=H);A?"client"===z?(this.dx=K.x-P.startCoords.client.x,this.dy=K.y-P.startCoords.client.y):(this.dx=J.x-P.startCoords.page.x,this.dy=J.y-P.startCoords.page.y):C?this.dy=this.dx=0:"inertiastart"===M?(this.dx=P.prevEvent.dx,this.dy=P.prevEvent.dy):"client"===z?(this.dx=K.x-P.prevEvent.clientX,this.dy=K.y-P.prevEvent.clientY):(this.dx=J.x-P.prevEvent.pageX,this.dy=J.y-P.prevEvent.pageY);P.prevEvent&&"inertia"===P.prevEvent.detail&&!L.active&&D[N].inertia&&D[N].inertia.zeroResumeDelta&&(L.resumeDx+=this.dx,L.resumeDy+=this.dy,this.dx=this.dy=0);"resize"===N&&P.resizeAxes?D.resize.square?("y"===P.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=P.resizeAxes,"x"===P.resizeAxes?this.dy=0:"y"===P.resizeAxes&&(this.dx=0)):"gesture"===N&&(this.touches=[x[0],x[1]],C?(this.distance=a5(x,z),this.box=bn(x),this.scale=1,this.ds=0,this.angle=az(x,void 0,z),this.da=0):A||O instanceof a0?(this.distance=P.prevEvent.distance,this.box=P.prevEvent.box,this.scale=P.prevEvent.scale,this.ds=this.scale-1,this.angle=P.prevEvent.angle,this.da=this.angle-P.gesture.startAngle):(this.distance=a5(x,z),this.box=bn(x),this.scale=this.distance/P.gesture.startDistance,this.angle=az(x,P.gesture.prevAngle,z),this.ds=this.scale-P.gesture.prevScale,this.da=this.angle-P.gesture.prevAngle));C?(this.timeStamp=P.downTimes[0],this.velocityY=this.velocityX=this.speed=this.duration=this.dt=0):"inertiastart"===M?(this.timeStamp=P.prevEvent.timeStamp,this.dt=P.prevEvent.dt,this.duration=P.prevEvent.duration,this.speed=P.prevEvent.speed,this.velocityX=P.prevEvent.velocityX,this.velocityY=P.prevEvent.velocityY):(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-P.prevEvent.timeStamp,this.duration=this.timeStamp-P.downTimes[0],O instanceof a0?(O=this[q]-P.prevEvent[q],F=this[F]-P.prevEvent[F],N=this.dt/1000,this.speed=bt(O,F)/N,this.velocityX=O/N,this.velocityY=F/N):(this.speed=P.pointerDelta[z].speed,this.velocityX=P.pointerDelta[z].vx,this.velocityY=P.pointerDelta[z].vy));(A||"inertiastart"===M)&&600<P.prevEvent.speed&&150>this.timeStamp-P.prevEvent.timeStamp&&(M=180*Math.atan2(P.prevEvent.velocityY,P.prevEvent.velocityX)/Math.PI,0>M&&(M+=360),A=112.5<=M&&247.5>M,F=202.5<=M&&337.5>M,this.swipe={up:F,down:!F&&22.5<=M&&157.5>M,left:A,right:!A&&(292.5<=M||67.5>M),angle:M,speed:P.prevEvent.speed,velocity:{x:P.prevEvent.velocityX,y:P.prevEvent.velocityY}})}function bs(){this.originalEvent.preventDefault()}function bi(m){var l="";"drag"===m.name&&(l=be.drag);if("resize"===m.name){if(m.axis){l=be[m.name+m.axis]}else{if(m.edges){for(var l="resize",p=["top","bottom","left","right"],n=0;4>n;n++){m.edges[p[n]]&&(l+=p[n])}l=be[l]}}}return l}function aV(Q,P,O){Q=this.getRect(O);var N=!1,M=null,J=null,L,K=ai({},P.curCoords.page),M=this.options;if(!Q){return null}if(aK.resize&&M.resize.enabled){if(N=M.resize,L={left:!1,right:!1,top:!1,bottom:!1},ah(N.edges)){for(var H in L){var t=L,D=H,z;Q:{z=H;var A=N.edges[H],G=K,F=P._eventTarget,C=O,x=Q,r=N.margin||ad;if(A){if(!0===A){var B=aU(x.width)?x.width:x.right-x.left,v=aU(x.height)?x.height:x.bottom-x.top;0>B&&("left"===z?z="right":"right"===z&&(z="left"));0>v&&("top"===z?z="bottom":"bottom"===z&&(z="top"));if("left"===z){z=G.x<(0<=B?x.left:x.right)+r;break Q}if("top"===z){z=G.y<(0<=v?x.top:x.bottom)+r;break Q}if("right"===z){z=G.x>(0<=B?x.right:x.left)-r;break Q}if("bottom"===z){z=G.y>(0<=v?x.bottom:x.top)-r;break Q}}z=al(F)?al(A)?A===F:j(F,A,C):!1}else{z=!1}}t[D]=z}L.left=L.left&&!L.right;L.top=L.top&&!L.bottom;N=L.left||L.right||L.top||L.bottom}else{O="y"!==M.resize.axis&&K.x>Q.right-ad,Q="x"!==M.resize.axis&&K.y>Q.bottom-ad,N=O||Q,J=(O?"x":"")+(Q?"y":"")}}M=N?"resize":aK.drag&&M.drag.enabled?"drag":null;aK.gesture&&2<=P.pointerIds.length&&!P.dragging&&!P.resizing&&(M="gesture");return M?{name:M,axis:J,edges:L}:null}function aG(m,l){if(!ah(m)){return null}var p=m.name,n=l.options;return("resize"===p&&n.resize.enabled||"drag"===p&&n.drag.enabled||"gesture"===p&&n.gesture.enabled)&&aK[p]?m:null}function i(x,v){var t={},r=aN[x.type],q=I(x.path?x.path[0]:x.target),m=q;v=v?!0:!1;for(var p in x){t[p]=x[p]}t.originalEvent=x;for(t.preventDefault=bs;al(m);){for(p=0;p<r.selectors.length;p++){var n=r.contexts[p];if(aL(m,r.selectors[p])&&aE(n,q)&&aE(n,m)){n=r.listeners[p];t.currentTarget=m;for(var l=0;l<n.length;l++){if(n[l][1]===v){n[l][0](t)}}}}m=aT(m)}}function bu(l){return i.call(this,l,!0)}function au(m,l){return a8.get(m,l)||new a6(m,l)}function a6(m,l){this._element=m;this._iEvents=this._iEvents||{};var p;if(d(m)){this.selector=m;var n=l&&l.context;p=n?aH(n):an;n&&(p.Node?n instanceof p.Node:al(n)||n===p.document)&&(this._context=n)}else{p=aH(m),al(m,p)&&(aP?(aq.add(this._element,aW.down,at.pointerDown),aq.add(this._element,aW.move,at.pointerHover)):(aq.add(this._element,"mousedown",at.pointerDown),aq.add(this._element,"mousemove",at.pointerHover),aq.add(this._element,"touchstart",at.pointerDown),aq.add(this._element,"touchmove",at.pointerHover)))}this._doc=p.document;-1===ak(E,this._doc)&&av(this._doc);a8.push(this);this.set(l)}function aS(m,l){var n=!1;return function(){n||(an.console.warn(l),n=!0);return m.apply(this,arguments)}}function y(m){for(var l=0;l<am.length;l++){am[l].pointerEnd(m,m)}}function av(m){if(-1===ak(E,m)){var l=m.defaultView||m.parentWindow,r;for(r in aN){aq.add(m,r,i),aq.add(m,r,bu,!0)}aP?(aW=aP===l.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},aq.add(m,aW.down,at.selectorDown),aq.add(m,aW.move,at.pointerMove),aq.add(m,aW.over,at.pointerOver),aq.add(m,aW.out,at.pointerOut),aq.add(m,aW.up,at.pointerUp),aq.add(m,aW.cancel,at.pointerCancel),aq.add(m,aW.move,at.autoScrollMove)):(aq.add(m,"mousedown",at.selectorDown),aq.add(m,"mousemove",at.pointerMove),aq.add(m,"mouseup",at.pointerUp),aq.add(m,"mouseover",at.pointerOver),aq.add(m,"mouseout",at.pointerOut),aq.add(m,"touchstart",at.selectorDown),aq.add(m,"touchmove",at.pointerMove),aq.add(m,"touchend",at.pointerUp),aq.add(m,"touchcancel",at.pointerCancel),aq.add(m,"mousemove",at.autoScrollMove),aq.add(m,"touchmove",at.autoScrollMove));aq.add(l,"blur",y);try{if(l.frameElement){var q=l.frameElement.ownerDocument,p=q.defaultView;aq.add(q,"mouseup",at.pointerEnd);aq.add(q,"touchend",at.pointerEnd);aq.add(q,"touchcancel",at.pointerEnd);aq.add(q,"pointerup",at.pointerEnd);aq.add(q,"MSPointerUp",at.pointerEnd);aq.add(p,"blur",y)}}catch(n){au.windowParentError=n}aq.add(m,"dragstart",function(v){for(var t=0;t<am.length;t++){var x=am[t];if(x.element&&(x.element===v.target||aE(x.element,v.target))){x.checkAndPreventDefault(v,x.target,x.element);break}}});aq.useAttachEvent&&(aq.add(m,"selectstart",function(v){var t=am[0];t.currentAction()&&t.checkAndPreventDefault(v)}),aq.add(m,"dblclick",ap("ie8Dblclick")));E.push(m)}}function ak(m,l){for(var p=0,n=m.length;p<n;p++){if(m[p]===l){return p}}return -1}function aL(m,l,n){if(f){return f(m,l,n)}an!==a1&&(l=l.replace(/\/deep\//g," "));return m[bd](l)}function j(m,l,n){for(;al(m);){if(aL(m,l)){return !0}m=aT(m);if(m===n){return aL(m,l)}}return !1}if(a1){var an=function(){var l=a1.document.createTextNode("");return l.ownerDocument!==a1.document&&"function"===typeof a1.wrap&&a1.wrap(l)===l?a1.wrap(a1):a1}(),aM=an.document,a7=an.DocumentFragment||bm,s=an.SVGElement||bm,ac=an.SVGSVGElement||bm,a2=an.SVGElementInstance||bm,h=an.HTMLElement||an.Element,aP=an.PointerEvent||an.MSPointerEvent,aW,bt=Math.hypot||function(m,l){return Math.sqrt(m*m+l*l)},bw={},E=[],a8=[],am=[],aB=!1,aN={},a4={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:aM,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:Infinity,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:Infinity,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:Infinity,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:Infinity,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},ao={interaction:null,i:null,x:0,y:0,scroll:function(){var m=ao.interaction.target.options[ao.interaction.prepared.name].autoScroll,l=m.container||aH(ao.interaction.element),r=(new Date).getTime(),q=(r-ao.prevTimeX)/1000,p=(r-ao.prevTimeY)/1000,n;m.velocity?(n=m.velocity.x,m=m.velocity.y):n=m=m.speed;q*=n;p*=m;if(1<=q||1<=p){bk(l)?l.scrollBy(ao.x*q,ao.y*p):l&&(l.scrollLeft+=ao.x*q,l.scrollTop+=ao.y*p),1<=q&&(ao.prevTimeX=r),1<=p&&(ao.prevTimeY=r)}ao.isScrolling&&(aF(ao.i),ao.i=aJ(ao.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(l){ao.isScrolling=!0;aF(ao.i);ao.interaction=l;ao.prevTimeX=(new Date).getTime();ao.prevTimeY=(new Date).getTime();ao.i=aJ(ao.scroll)},stop:function(){ao.isScrolling=!1;aF(ao.i)}},bj="ontouchstart" in an||an.DocumentTouch&&aM instanceof an.DocumentTouch,ay=!!aP,ad=bj||ay?20:10,ag=1,u=0,k=Infinity,be=aM.all&&!an.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},aK={drag:!0,resize:!0,gesture:!0},e="onmousewheel" in aM?"mousewheel":"wheel",ar="dragstart dragmove draginertiastart dragend dragenter dragleave dropactivate dropdeactivate dropmove drop resizestart resizemove resizeinertiastart resizeend gesturestart gesturemove gestureinertiastart gestureend down move up cancel tap doubletap hold".split(" "),aI={},aD="Opera"==navigator.appName&&bj&&navigator.userAgent.match("Presto"),ax=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),bd="matches" in Element.prototype?"matches":"webkitMatchesSelector" in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector" in Element.prototype?"mozMatchesSelector":"oMatchesSelector" in Element.prototype?"oMatchesSelector":"msMatchesSelector",f,aJ=a1.requestAnimationFrame,aF=a1.cancelAnimationFrame,aq=function(){function B(L,K,J,H){var G,F=ak(m,L),D=z[F],C,M,n=J;if(D&&D.events){if(t&&(C=l[F],M=ak(C.supplied,J),n=C.wrapped[M]),"all"===K){for(K in D.events){D.events.hasOwnProperty(K)&&B(L,K,"all")}}else{if(D.events[K]){var N=D.events[K].length;if("all"===J){for(G=0;G<N;G++){B(L,K,D.events[K][G],Boolean(H))}return}for(G=0;G<N;G++){if(D.events[K][G]===J){L[r](q+K,n,H||!1);D.events[K].splice(G,1);t&&C&&(C.useCount[M]--,0===C.useCount[M]&&(C.supplied.splice(M,1),C.wrapped.splice(M,1),C.useCount.splice(M,1)));break}}D.events[K]&&0===D.events[K].length&&(D.events[K]=null,D.typeCount--)}D.typeCount||(z.splice(F,1),m.splice(F,1),l.splice(F,1))}}}function A(){this.returnValue=!1}function x(){this.cancelBubble=!0}function v(){this.immediatePropagationStopped=this.cancelBubble=!0}var t="attachEvent" in an&&!("addEventListener" in an),p=t?"attachEvent":"addEventListener",r=t?"detachEvent":"removeEventListener",q=t?"on":"",m=[],z=[],l=[];return{add:function(D,J,C,K){var n=ak(m,D),H=z[n];H||(H={events:{},typeCount:0},n=m.push(D)-1,z.push(H),l.push(t?{supplied:[],wrapped:[],useCount:[]}:null));H.events[J]||(H.events[J]=[],H.typeCount++);if(-1===ak(H.events[J],C)){if(t){var n=l[n],G=ak(n.supplied,C),F=n.wrapped[G]||function(L){L.immediatePropagationStopped||(L.target=L.srcElement,L.currentTarget=D,L.preventDefault=L.preventDefault||A,L.stopPropagation=L.stopPropagation||x,L.stopImmediatePropagation=L.stopImmediatePropagation||v,/mouse|click/.test(L.type)&&(L.pageX=L.clientX+aH(D).document.documentElement.scrollLeft,L.pageY=L.clientY+aH(D).document.documentElement.scrollTop),C(L))};K=D[p](q+J,F,Boolean(K));-1===G?(n.supplied.push(C),n.wrapped.push(F),n.useCount.push(1)):n.useCount[G]++}else{K=D[p](J,C,K||!1)}H.events[J].push(C);return K}},remove:B,useAttachEvent:t,_elements:m,_targets:z,_attachedListeners:l}}(),aY={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};a.prototype={getPageXY:function(m,l){return aw(m,l,this)},getClientXY:function(m,l){return aj(m,l,this)},setEventXY:function(m,l){var n=1<l.length?c(l):l[0];aw(n,bw,this);m.page.x=bw.x;m.page.y=bw.y;aj(n,bw,this);m.client.x=bw.x;m.client.y=bw.y;m.timeStamp=(new Date).getTime()},pointerOver:function(x,v,t){function r(A,z){A&&af(A,t)&&!aC(A,t,t)&&bh(A,t,t)&&aL(t,z)&&(q.push(A),m.push(t))}if(!this.prepared.name&&this.mouse){var q=[],m=[],p=this.element;this.addPointer(x);!this.target||!aC(this.target,this.element,t)&&bh(this.target,this.element,t)||(this.element=this.target=null,this.matches=[],this.matchElements=[]);var n=a8.get(t),l=n&&!aC(n,t,t)&&bh(n,t,t)&&aG(n.getAction(x,v,this,t),n);l&&!aX(n,t,l)&&(l=null);l?(this.target=n,this.element=t,this.matches=[],this.matchElements=[]):(a8.forEachSelector(r),this.validateSelector(x,v,q,m)?(this.matches=q,this.matchElements=m,this.pointerHover(x,v,this.matches,this.matchElements),aq.add(t,aP?aW.move:"mousemove",at.pointerHover)):this.target&&(aE(p,t)?(this.pointerHover(x,v,this.matches,this.matchElements),aq.add(this.element,aP?aW.move:"mousemove",at.pointerHover)):(this.element=this.target=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(m,l,t,r,q,n){t=this.target;if(!this.prepared.name&&this.mouse){var p;this.setEventXY(this.curCoords,[m]);q?p=this.validateSelector(m,l,q,n):t&&(p=aG(t.getAction(this.pointers[0],l,this,this.element),this.target));t&&t.options.styleCursor&&(t._doc.documentElement.style.cursor=p?bi(p):"")}else{this.prepared.name&&this.checkAndPreventDefault(l,t,this.element)}},pointerOut:function(m,l,n){this.prepared.name||(a8.get(n)||aq.remove(n,aP?aW.move:"mousemove",at.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(A,z,x,v){function t(B,l,C){C=f?C.querySelectorAll(l):void 0;af(B,q)&&!aC(B,q,x)&&bh(B,q,x)&&aL(q,l,C)&&(p.matches.push(B),p.matchElements.push(q))}var p=this,r=aq.useAttachEvent?ai({},z):z,q=x,n=this.addPointer(A),m;this.holdTimers[n]=setTimeout(function(){p.pointerHold(aq.useAttachEvent?r:A,r,x,v)},a4._holdDuration);this.pointerIsDown=!0;if(this.inertiaStatus.active&&this.target.selector){for(;al(q);){if(q===this.element&&aG(this.target.getAction(A,z,this,this.element),this.target).name===this.prepared.name){aF(this.inertiaStatus.i);this.inertiaStatus.active=!1;this.collectEventTargets(A,z,x,"down");return}q=aT(q)}}if(!this.interacting()){this.setEventXY(this.curCoords,[A]);for(this.downEvent=z;al(q)&&!m;){this.matches=[],this.matchElements=[],a8.forEachSelector(t),m=this.validateSelector(A,z,this.matches,this.matchElements),q=aT(q)}if(m){return this.prepared.name=m.name,this.prepared.axis=m.axis,this.prepared.edges=m.edges,this.collectEventTargets(A,z,x,"down"),this.pointerDown(A,z,x,v,m)}this.downTimes[n]=(new Date).getTime();this.downTargets[n]=x;by(this.downPointer,A);bo(this.prevCoords,this.curCoords);this.pointerWasMoved=!1}this.collectEventTargets(A,z,x,"down")},pointerDown:function(x,v,t,r,q){if(!q&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name){this.checkAndPreventDefault(v,this.target,this.element)}else{this.pointerIsDown=!0;this.downEvent=v;var m=this.addPointer(x),p;if(1<this.pointerIds.length&&this.target._element===this.element){var n=aG(q||this.target.getAction(x,v,this,this.element),this.target);aX(this.target,this.element,n)&&(p=n);this.prepared.name=null}else{this.prepared.name||(n=a8.get(r))&&!aC(n,r,t)&&bh(n,r,t)&&(p=aG(q||n.getAction(x,v,this,r),n,t))&&aX(n,r,p)&&(this.target=n,this.element=r)}var l=(n=this.target)&&n.options;!n||!q&&this.prepared.name?this.inertiaStatus.active&&r===this.element&&aG(n.getAction(x,v,this,this.element),n).name===this.prepared.name&&(aF(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(v,n,this.element)):(p=p||aG(q||n.getAction(x,v,this,r),n,this.element),this.setEventXY(this.startCoords,this.pointers),p&&(l.styleCursor&&(n._doc.documentElement.style.cursor=bi(p)),this.resizeAxes="resize"===p.name?p.axis:null,"gesture"===p&&2>this.pointerIds.length&&(p=null),this.prepared.name=p.name,this.prepared.axis=p.axis,this.prepared.edges=p.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[m]=(new Date).getTime(),this.downTargets[m]=t,by(this.downPointer,x),bo(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(v,n,this.element)))}},setModifications:function(m,l){var q=this.target,p=!0,n=bz(q,this.prepared.name)&&(!q.options[this.prepared.name].snap.endOnly||l),q=bp(q,this.prepared.name)&&(!q.options[this.prepared.name].restrict.endOnly||l);n?this.setSnapping(m):this.snapStatus.locked=!1;q?this.setRestriction(m):this.restrictStatus.restricted=!1;n&&this.snapStatus.locked&&!this.snapStatus.changed?p=q&&this.restrictStatus.restricted&&this.restrictStatus.changed:q&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(p=!1);return p},setStartOffsets:function(m,l,t){m=l.getRect(t);var r=a3(l,t);t=l.options[this.prepared.name].snap;l=l.options[this.prepared.name].restrict;var q,n;m?(this.startOffset.left=this.startCoords.page.x-m.left,this.startOffset.top=this.startCoords.page.y-m.top,this.startOffset.right=m.right-this.startCoords.page.x,this.startOffset.bottom=m.bottom-this.startCoords.page.y,q="width" in m?m.width:m.right-m.left,n="height" in m?m.height:m.bottom-m.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0;this.snapOffsets.splice(0);r=t&&"startCoords"===t.offset?{x:this.startCoords.page.x-r.x,y:this.startCoords.page.y-r.y}:t&&t.offset||{x:0,y:0};if(m&&t&&t.relativePoints&&t.relativePoints.length){for(var p=0;p<t.relativePoints.length;p++){this.snapOffsets.push({x:this.startOffset.left-q*t.relativePoints[p].x+r.x,y:this.startOffset.top-n*t.relativePoints[p].y+r.y})}}else{this.snapOffsets.push(r)}m&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-q*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-n*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-q*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-n*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(m,l,n){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===m.name?2:1)||(-1===ak(am,this)&&am.push(this),this.prepared.name||this.setEventXY(this.startCoords),this.prepared.name=m.name,this.prepared.axis=m.axis,this.prepared.edges=m.edges,this.target=l,this.element=n,this.setStartOffsets(m.name,l,n),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(C,B,A,z,x){if(this.inertiaStatus.active){z=this.inertiaStatus.upCoords.page;var r=this.inertiaStatus.upCoords.client;this.setEventXY(this.curCoords,[{pageX:z.x+this.inertiaStatus.sx,pageY:z.y+this.inertiaStatus.sy,clientX:r.x+this.inertiaStatus.sx,clientY:r.y+this.inertiaStatus.sy}])}else{this.recordPointer(C),this.setEventXY(this.curCoords,this.pointers)}z=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y;var v,t,r=this.mouse?0:ak(this.pointerIds,aQ(C));this.pointerIsDown&&!this.pointerWasMoved&&(v=this.curCoords.client.x-this.startCoords.client.x,t=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=bt(v,t)>ag);z||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[r]),this.collectEventTargets(C,B,A,"move"));if(this.pointerIsDown){if(z&&this.pointerWasMoved&&!x){this.checkAndPreventDefault(B,this.target,this.element)}else{if(bq(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||C instanceof a0&&/inertiastart/.test(C.type))){if(!this.interacting()&&(bq(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){v=Math.abs(v);t=Math.abs(t);z=this.target.options.drag.axis;var q=v>t?"x":v<t?"y":"xy";if("xy"!==q&&"xy"!==z&&z!==q){this.prepared.name=null;for(var p=A;al(p);){if((t=a8.get(p))&&t!==this.target&&!t.options.drag.manualStart&&"drag"===t.getAction(this.downPointer,this.downEvent,this,p).name&&bg(q,t)){this.prepared.name="drag";this.target=t;this.element=p;break}p=aT(p)}if(!this.prepared.name){var m=this;t=function(n,l,D){D=f?D.querySelectorAll(l):void 0;if(n!==m.target&&af(n,A)&&!n.options.drag.manualStart&&!aC(n,p,A)&&bh(n,p,A)&&aL(p,l,D)&&"drag"===n.getAction(m.downPointer,m.downEvent,m,p).name&&bg(q,n)&&aX(n,p,"drag")){return n}};for(p=A;al(p);){if(v=a8.forEachSelector(t)){this.prepared.name="drag";this.target=v;this.element=p;break}p=aT(p)}}}}if((t=!!this.prepared.name&&!this.interacting())&&(this.target.options[this.prepared.name].manualStart||!aX(this.target,this.element,this.prepared))){this.stop(B);return}if(this.prepared.name&&this.target){t&&this.start(this.prepared,this.target,this.element);if(this.setModifications(this.curCoords.page,x)||t){this.prevEvent=this[this.prepared.name+"Move"](B)}this.checkAndPreventDefault(B,this.target,this.element)}}bo(this.prevCoords,this.curCoords);(this.dragging||this.resizing)&&this.autoScrollMove(C)}}}},dragStart:function(m){var l=new a0(this,m,"drag","start",this.element);this.dragging=!0;this.target.fire(l);this.activeDrops.dropzones=[];this.activeDrops.elements=[];this.activeDrops.rects=[];this.dynamicDrop||this.setActiveDrops(this.element);m=this.getDropEvents(m,l);m.activate&&this.fireActiveDrops(m.activate);return l},dragMove:function(m){var l=this.target,p=new a0(this,m,"drag","move",this.element),n=this.getDrop(p,m,this.element);this.dropTarget=n.dropzone;this.dropElement=n.element;m=this.getDropEvents(m,p);l.fire(p);m.leave&&this.prevDropTarget.fire(m.leave);m.enter&&this.dropTarget.fire(m.enter);m.move&&this.dropTarget.fire(m.move);this.prevDropTarget=this.dropTarget;this.prevDropElement=this.dropElement;return p},resizeStart:function(m){m=new a0(this,m,"resize","start",this.element);if(this.prepared.edges){var l=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var n=ai({},this.prepared.edges);n.top=n.top||n.left&&!n.bottom;n.left=n.left||n.top&&!n.right;n.bottom=n.bottom||n.right&&!n.top;n.right=n.right||n.bottom&&!n.left;this.prepared._linkedEdges=n}else{this.prepared._linkedEdges=null}this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=l.width/l.height);this.resizeRects={start:l,current:ai({},l),restricted:ai({},l),previous:ai({},l),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}};m.rect=this.resizeRects.restricted;m.deltaRect=this.resizeRects.delta}this.target.fire(m);this.resizing=!0;return m},resizeMove:function(K){K=new a0(this,K,"resize","move",this.element);var J=this.prepared.edges,H=this.target.options.resize.invert,G="reposition"===H||"negate"===H;if(J){var F=K.dx,B=K.dy,D=this.resizeRects.start,C=this.resizeRects.current,A=this.resizeRects.restricted,z=this.resizeRects.delta,v=ai(this.resizeRects.previous,A),x=J;if(this.target.options.resize.preserveAspectRatio){var t=this.resizeStartAspectRatio,J=this.prepared._linkedEdges;if(x.left&&x.bottom||x.right&&x.top){B=-F/t}else{if(x.left||x.right){B=F/t}else{if(x.top||x.bottom){F=B*t}}}}else{if(this.target.options.resize.square){if(J=this.prepared._linkedEdges,x.left&&x.bottom||x.right&&x.top){B=-F}else{if(x.left||x.right){B=F}else{if(x.top||x.bottom){F=B}}}}}J.top&&(C.top+=B);J.bottom&&(C.bottom+=B);J.left&&(C.left+=F);J.right&&(C.right+=F);G?(ai(A,C),"reposition"===H&&(A.top>A.bottom&&(J=A.top,A.top=A.bottom,A.bottom=J),A.left>A.right&&(J=A.left,A.left=A.right,A.right=J))):(A.top=Math.min(C.top,D.bottom),A.bottom=Math.max(C.bottom,D.top),A.left=Math.min(C.left,D.right),A.right=Math.max(C.right,D.left));A.width=A.right-A.left;A.height=A.bottom-A.top;for(var r in A){z[r]=A[r]-v[r]}K.edges=this.prepared.edges;K.rect=A;K.deltaRect=z}this.target.fire(K);return K},gestureStart:function(l){l=new a0(this,l,"gesture","start",this.element);l.ds=0;this.gesture.startDistance=this.gesture.prevDistance=l.distance;this.gesture.startAngle=this.gesture.prevAngle=l.angle;this.gesture.scale=1;this.gesturing=!0;this.target.fire(l);return l},gestureMove:function(l){if(!this.pointerIds.length){return this.prevEvent}l=new a0(this,l,"gesture","move",this.element);l.ds=l.scale-this.gesture.scale;this.target.fire(l);this.gesture.prevAngle=l.angle;this.gesture.prevDistance=l.distance;Infinity===l.scale||null===l.scale||void 0===l.scale||isNaN(l.scale)||(this.gesture.scale=l.scale);return l},pointerHold:function(m,l,n){this.collectEventTargets(m,l,n,"hold")},pointerUp:function(m,l,q,p){var n=this.mouse?0:ak(this.pointerIds,aQ(m));clearTimeout(this.holdTimers[n]);this.collectEventTargets(m,l,q,"up");this.collectEventTargets(m,l,q,"tap");this.pointerEnd(m,l,q,p);this.removePointer(m)},pointerCancel:function(m,l,q,p){var n=this.mouse?0:ak(this.pointerIds,aQ(m));clearTimeout(this.holdTimers[n]);this.collectEventTargets(m,l,q,"cancel");this.pointerEnd(m,l,q,p);this.removePointer(m)},ie8Dblclick:function(m,l,n){this.prevTap&&l.clientX===this.prevTap.clientX&&l.clientY===this.prevTap.clientY&&n===this.prevTap.target&&(this.downTargets[0]=n,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(m,l,n,"tap"))},pointerEnd:function(N,M,L,K){var J,F=this.target,H=F&&F.options,G=H&&this.prepared.name&&H[this.prepared.name].inertia;J=this.inertiaStatus;if(this.interacting()){if(J.active&&!J.ending){return}var D=(new Date).getTime(),C=!1,B=!1,A=!1,z=bz(F,this.prepared.name)&&H[this.prepared.name].snap.endOnly,x=bp(F,this.prepared.name)&&H[this.prepared.name].restrict.endOnly,v=0,O=0,H=this.dragging?"x"===H.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===H.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,B=(C=G&&G.enabled&&"gesture"!==this.prepared.name&&M!==J.startEvent)&&50>D-this.curCoords.timeStamp&&H>G.minSpeed&&H>G.endSpeed;C&&!B&&(z||x)&&(G={},G.snap=G.restrict=G,z&&(this.setSnapping(this.curCoords.page,G),G.locked&&(v+=G.dx,O+=G.dy)),x&&(this.setRestriction(this.curCoords.page,G),G.restricted&&(v+=G.dx,O+=G.dy)),v||O)&&(A=!0);if(B||A){bo(J.upCoords,this.curCoords);this.pointers[0]=J.startEvent=new a0(this,M,this.prepared.name,"inertiastart",this.element);J.t0=D;F.fire(J.startEvent);B?(J.vx0=this.pointerDelta.client.vx,J.vy0=this.pointerDelta.client.vy,J.v0=H,this.calcInertia(J),M=ai({},this.curCoords.page),F=a3(F,this.element),M.x=M.x+J.xe-F.x,M.y=M.y+J.ye-F.y,F={useStatusXY:!0,x:M.x,y:M.y,dx:0,dy:0,snap:null},F.snap=F,v=O=0,z&&(M=this.setSnapping(this.curCoords.page,F),M.locked&&(v+=M.dx,O+=M.dy)),x&&(F=this.setRestriction(this.curCoords.page,F),F.restricted&&(v+=F.dx,O+=F.dy)),J.modifiedXe+=v,J.modifiedYe+=O,J.i=aJ(this.boundInertiaFrame)):(J.smoothEnd=!0,J.xe=v,J.ye=O,J.sx=J.sy=0,J.i=aJ(this.boundSmoothEndFrame));J.active=!0;return}(z||x)&&this.pointerMove(N,M,L,K,!0)}this.dragging?(J=new a0(this,M,"drag","end",this.element),x=this.getDrop(J,M,this.element),this.dropTarget=x.dropzone,this.dropElement=x.element,x=this.getDropEvents(M,J),x.leave&&this.prevDropTarget.fire(x.leave),x.enter&&this.dropTarget.fire(x.enter),x.drop&&this.dropTarget.fire(x.drop),x.deactivate&&this.fireActiveDrops(x.deactivate),F.fire(J)):this.resizing?(J=new a0(this,M,"resize","end",this.element),F.fire(J)):this.gesturing&&(J=new a0(this,M,"gesture","end",this.element),F.fire(J));this.stop(M)},collectDrops:function(x){var v=[],t=[],r;x=x||this.element;for(r=0;r<a8.length;r++){if(a8[r].options.drop.enabled){var q=a8[r],m=q.options.drop.accept;if(!(al(m)&&m!==x||aR(m)&&!aL(x,m))){for(var m=q.selector?q._context.querySelectorAll(q.selector):[q._element],p=0,n=m.length;p<n;p++){var l=m[p];l!==x&&(v.push(q),t.push(l))}}}}return{dropzones:v,elements:t}},fireActiveDrops:function(m){var l,q,p,n;for(l=0;l<this.activeDrops.dropzones.length;l++){q=this.activeDrops.dropzones[l],p=this.activeDrops.elements[l],p!==n&&(m.target=p,q.fire(m)),n=p}},setActiveDrops:function(l){l=this.collectDrops(l,!0);this.activeDrops.dropzones=l.dropzones;this.activeDrops.elements=l.elements;this.activeDrops.rects=[];for(l=0;l<this.activeDrops.dropzones.length;l++){this.activeDrops.rects[l]=this.activeDrops.dropzones[l].getRect(this.activeDrops.elements[l])}},getDrop:function(m,l,v){var t=[];aB&&this.setActiveDrops(v);for(var r=0;r<this.activeDrops.dropzones.length;r++){var n=this.activeDrops.elements[r];t.push(this.activeDrops.dropzones[r].dropCheck(m,l,this.target,v,n,this.activeDrops.rects[r])?n:null)}v=(l=t[0])?0:-1;for(var q,r=[],p=[],n=1;n<t.length;n++){if((m=t[n])&&m!==l){if(!l){l=m,v=n}else{if(m.parentNode!==m.ownerDocument){if(l.parentNode===m.ownerDocument){l=m,v=n}else{if(!r.length){for(q=l;q.parentNode&&q.parentNode!==q.ownerDocument;){r.unshift(q),q=q.parentNode}}if(l instanceof h&&m instanceof s&&!(m instanceof ac)){if(m===l.parentNode){continue}q=m.ownerSVGElement}else{q=m}for(p=[];q.parentNode!==q.ownerDocument;){p.unshift(q),q=q.parentNode}for(q=0;p[q]&&p[q]===r[q];){q++}q=[p[q-1],p[q],r[q]];for(p=q[0].lastChild;p;){if(p===q[1]){l=m;v=n;r=[];break}else{if(p===q[2]){break}}p=p.previousSibling}}}}}}t=v;return{dropzone:this.activeDrops.dropzones[t]||null,element:this.activeDrops.elements[t]||null}},getDropEvents:function(m,l){var n={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(n.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dragleave"},l.dragLeave=this.prevDropElement,l.prevDropzone=this.prevDropTarget),this.dropTarget&&(n.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dragenter"},l.dragEnter=this.dropElement,l.dropzone=this.dropTarget));"dragend"===l.type&&this.dropTarget&&(n.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"drop"},l.dropzone=this.dropTarget);"dragstart"===l.type&&(n.activate={target:null,dropzone:null,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dropactivate"});"dragend"===l.type&&(n.deactivate={target:null,dropzone:null,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,timeStamp:l.timeStamp,type:"dropdeactivate"});"dragmove"===l.type&&this.dropTarget&&(n.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:l.target,draggable:l.interactable,dragEvent:l,interaction:this,dragmove:l,timeStamp:l.timeStamp,type:"dropmove"},l.dropzone=this.dropTarget);return n},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=this.target=this.element=null},stop:function(m){if(this.interacting()){ao.stop();this.matches=[];this.matchElements=[];var l=this.target;l.options.styleCursor&&(l._doc.documentElement.style.cursor="");m&&a9(m.preventDefault)&&this.checkAndPreventDefault(m,l,this.element);this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets();this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1;this.prepared.name=this.prevEvent=null;for(m=this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;m<this.pointers.length;m++){-1===ak(this.pointerIds,aQ(this.pointers[m]))&&this.pointers.splice(m,1)}},inertiaFrame:function(){var m,l,q=this.inertiaStatus;m=this.target.options[this.prepared.name].inertia.resistance;l=(new Date).getTime()/1000-q.t0;if(l<q.te){l=1-(Math.exp(-m*l)-q.lambda_v0)/q.one_ve_v0;if(q.modifiedXe===q.xe&&q.modifiedYe===q.ye){q.sx=q.xe*l,q.sy=q.ye*l}else{var p=q.ye,n=q.modifiedYe;m=br(l,0,q.xe,q.modifiedXe);l=br(l,0,p,n);q.sx=m;q.sy=l}this.pointerMove(q.startEvent,q.startEvent);q.i=aJ(this.boundInertiaFrame)}else{q.ending=!0,q.sx=q.modifiedXe,q.sy=q.modifiedYe,this.pointerMove(q.startEvent,q.startEvent),this.pointerEnd(q.startEvent,q.startEvent),q.active=q.ending=!1}},smoothEndFrame:function(){var m=this.inertiaStatus,l=(new Date).getTime()-m.t0,p=this.target.options[this.prepared.name].inertia.smoothEndDuration;if(l<p){var n;n=l/p;m.sx=-m.xe*n*(n-2)+0;l/=p;m.sy=-m.ye*l*(l-2)+0;this.pointerMove(m.startEvent,m.startEvent);m.i=aJ(this.boundSmoothEndFrame)}else{m.ending=!0,m.sx=m.xe,m.sy=m.ye,this.pointerMove(m.startEvent,m.startEvent),this.pointerEnd(m.startEvent,m.startEvent),m.smoothEnd=m.active=m.ending=!1}},addPointer:function(m){var l=aQ(m),n=this.mouse?0:ak(this.pointerIds,l);-1===n&&(n=this.pointerIds.length);this.pointerIds[n]=l;this.pointers[n]=m;return n},removePointer:function(l){l=aQ(l);l=this.mouse?0:ak(this.pointerIds,l);-1!==l&&(this.pointers.splice(l,1),this.pointerIds.splice(l,1),this.downTargets.splice(l,1),this.downTimes.splice(l,1),this.holdTimers.splice(l,1))},recordPointer:function(m){var l=this.mouse?0:ak(this.pointerIds,aQ(m));-1!==l&&(this.pointers[l]=m)},collectEventTargets:function(x,v,t,r){function q(A,z,B){B=f?B.querySelectorAll(z):void 0;A._iEvents[r]&&al(l)&&af(A,l)&&!aC(A,l,t)&&bh(A,l,t)&&aL(l,z,B)&&(p.push(A),n.push(l))}var m=this.mouse?0:ak(this.pointerIds,aQ(x));if("tap"!==r||!this.pointerWasMoved&&this.downTargets[m]&&this.downTargets[m]===t){for(var p=[],n=[],l=t;l;){au.isSet(l)&&au(l)._iEvents[r]&&(p.push(au(l)),n.push(l)),a8.forEachSelector(q),l=aT(l)}(p.length||"tap"===r)&&this.firePointers(x,v,t,p,n,r)}},firePointers:function(A,z,x,v,t,p){var r=this.mouse?0:ak(this.pointerIds,aQ(A)),q={},n,m;"doubletap"===p?q=A:(by(q,z),z!==A&&by(q,A),q.preventDefault=bs,q.stopPropagation=a0.prototype.stopPropagation,q.stopImmediatePropagation=a0.prototype.stopImmediatePropagation,q.interaction=this,q.timeStamp=(new Date).getTime(),q.originalEvent=z,q.originalPointer=A,q.type=p,q.pointerId=aQ(A),q.pointerType=this.mouse?"mouse":ay?aR(A.pointerType)?A.pointerType:[,,"touch","pen","mouse"][A.pointerType]:"touch");"tap"===p&&(q.dt=q.timeStamp-this.downTimes[r],n=q.timeStamp-this.tapTime,m=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===q.target&&500>n),q["double"]=m,this.tapTime=q.timeStamp);for(A=0;A<v.length&&!(q.currentTarget=t[A],q.interactable=v[A],v[A].fire(q),q.immediatePropagationStopped||q.propagationStopped&&t[A+1]!==q.currentTarget);A++){}m?(v={},ai(v,q),v.dt=n,v.type="doubletap",this.collectEventTargets(v,z,x,"doubletap"),this.prevTap=v):"tap"===p&&(this.prevTap=q)},validateSelector:function(x,v,t,r){for(var q=0,m=t.length;q<m;q++){var p=t[q],n=r[q],l=aG(p.getAction(x,v,this,n),p);if(l&&aX(p,n,l)){return this.target=p,this.element=n,l}}},setSnapping:function(R,Q){var P=this.target.options[this.prepared.name].snap,O=[],N,K,M;Q=Q||this.snapStatus;Q.useStatusXY?K={x:Q.x,y:Q.y}:(N=a3(this.target,this.element),K=ai({},R),K.x-=N.x,K.y-=N.y);Q.realX=K.x;Q.realY=K.y;K.x-=this.inertiaStatus.resumeDx;K.y-=this.inertiaStatus.resumeDy;for(var L=P.targets?P.targets.length:0,J=0;J<this.snapOffsets.length;J++){var H=K.x-this.snapOffsets[J].x,G=K.y-this.snapOffsets[J].y;for(M=0;M<L;M++){(N=a9(P.targets[M])?P.targets[M](H,G,this):P.targets[M])&&O.push({x:aU(N.x)?N.x+this.snapOffsets[J].x:H,y:aU(N.y)?N.y+this.snapOffsets[J].y:G,range:aU(N.range)?N.range:P.range})}}var P=null,J=!1,F=0,D=0;M=G=H=0;for(L=O.length;M<L;M++){N=O[M];var C=N.range,B=N.x-K.x,A=N.y-K.y,x=bt(B,A),z=x<=C;Infinity===C&&J&&Infinity!==D&&(z=!1);if(!P||(z?J&&Infinity!==C?x/C<F/D:Infinity===C&&Infinity!==D||x<F:!J&&x<F)){Infinity===C&&(z=!0),P=N,F=x,D=C,J=z,H=B,G=A,Q.range=C}}P?(O=Q.snappedX!==P.x||Q.snappedY!==P.y,Q.snappedX=P.x,Q.snappedY=P.y):(O=!0,Q.snappedX=NaN,Q.snappedY=NaN);Q.dx=H;Q.dy=G;Q.changed=O||J&&!Q.locked;Q.locked=J;return Q},setRestriction:function(m,l){var q=this.target,p=q&&q.options[this.prepared.name].restrict,n=p&&p.restriction;if(!n){return l}l=l||this.restrictStatus;p=l.useStatusXY?p={x:l.x,y:l.y}:p=ai({},m);l.snap&&l.snap.locked&&(p.x+=l.snap.dx||0,p.y+=l.snap.dy||0);p.x-=this.inertiaStatus.resumeDx;p.y-=this.inertiaStatus.resumeDy;l.dx=0;l.dy=0;l.restricted=!1;if(aR(n)&&(n="parent"===n?aT(this.element):"self"===n?q.getRect(this.element):ae(this.element,n),!n)){return l}a9(n)&&(n=n(p.x,p.y,this.element));al(n)&&(n=aA(n));(q=n)?"x" in n&&"y" in n?(n=Math.max(Math.min(q.x+q.width-this.restrictOffset.right,p.x),q.x+this.restrictOffset.left),q=Math.max(Math.min(q.y+q.height-this.restrictOffset.bottom,p.y),q.y+this.restrictOffset.top)):(n=Math.max(Math.min(q.right-this.restrictOffset.right,p.x),q.left+this.restrictOffset.left),q=Math.max(Math.min(q.bottom-this.restrictOffset.bottom,p.y),q.top+this.restrictOffset.top)):(n=p.x,q=p.y);l.dx=n-p.x;l.dy=q-p.y;l.changed=l.restrictedX!==n||l.restrictedY!==q;l.restricted=!(!l.dx&&!l.dy);l.restrictedX=n;l.restrictedY=q;return l},checkAndPreventDefault:function(m,l,p){if(l=l||this.target){l=l.options;var n=l.preventDefault;"auto"===n&&p&&!/^(input|select|textarea)$/i.test(m.target.nodeName)?/down|start/i.test(m.type)&&"drag"===this.prepared.name&&"xy"!==l.drag.axis||l[this.prepared.name]&&l[this.prepared.name].manualStart&&!this.interacting()||m.preventDefault():"always"===n&&m.preventDefault()}},calcInertia:function(m){var l=this.target.options[this.prepared.name].inertia,p=l.resistance,n=-Math.log(l.endSpeed/m.v0)/p;m.x0=this.prevEvent.pageX;m.y0=this.prevEvent.pageY;m.t0=m.startEvent.timeStamp/1000;m.sx=m.sy=0;m.modifiedXe=m.xe=(m.vx0-n)/p;m.modifiedYe=m.ye=(m.vy0-n)/p;m.te=n;m.lambda_v0=p/m.v0;m.one_ve_v0=1-l.endSpeed/m.v0},autoScrollMove:function(m){var l;if(l=this.interacting()){l=this.prepared.name;var r=this.target.options;/^resize/.test(l)&&(l="resize");l=r[l].autoScroll&&r[l].autoScroll.enabled}if(l){if(this.inertiaStatus.active){ao.x=ao.y=0}else{var q,p=this.target.options[this.prepared.name].autoScroll,n=p.container||aH(this.element);bk(n)?(q=m.clientX<ao.margin,l=m.clientY<ao.margin,r=m.clientX>n.innerWidth-ao.margin,m=m.clientY>n.innerHeight-ao.margin):(n=g(n),q=m.clientX<n.left+ao.margin,l=m.clientY<n.top+ao.margin,r=m.clientX>n.right-ao.margin,m=m.clientY>n.bottom-ao.margin);ao.x=r?1:q?-1:0;ao.y=m?1:l?-1:0;ao.isScrolling||(ao.margin=p.margin,ao.speed=p.speed,ao.start(this))}}},_updateEventTargets:function(m,l){this._eventTarget=m;this._curEventTarget=l}};a0.prototype={preventDefault:bm,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var at={},bv="dragStart dragMove resizeStart resizeMove gestureStart gestureMove pointerOver pointerOut pointerHover selectorDown pointerDown pointerMove pointerUp pointerCancel pointerEnd addPointer removePointer recordPointer autoScrollMove".split(" "),o=0,b=bv.length;o<b;o++){var bl=bv[o];at[bl]=ap(bl)}a8.indexOfElement=function(m,l){l=l||aM;for(var p=0;p<this.length;p++){var n=this[p];if(n.selector===m&&n._context===l||!n.selector&&n._element===m){return p}}return -1};a8.get=function(m,l){return this[this.indexOfElement(m,l&&l.context)]};a8.forEachSelector=function(m){for(var l=0;l<this.length;l++){var n=this[l];if(n.selector&&(n=m(n,n.selector,n._context,l,this),void 0!==n)){return n}}};a6.prototype={setOnEvents:function(m,l){"drop"===m?(a9(l.ondrop)&&(this.ondrop=l.ondrop),a9(l.ondropactivate)&&(this.ondropactivate=l.ondropactivate),a9(l.ondropdeactivate)&&(this.ondropdeactivate=l.ondropdeactivate),a9(l.ondragenter)&&(this.ondragenter=l.ondragenter),a9(l.ondragleave)&&(this.ondragleave=l.ondragleave),a9(l.ondropmove)&&(this.ondropmove=l.ondropmove)):(m="on"+m,a9(l.onstart)&&(this[m+"start"]=l.onstart),a9(l.onmove)&&(this[m+"move"]=l.onmove),a9(l.onend)&&(this[m+"end"]=l.onend),a9(l.oninertiastart)&&(this[m+"inertiastart"]=l.oninertiastart));return this},draggable:function(l){return ah(l)?(this.options.drag.enabled=!1===l.enabled?!1:!0,this.setPerAction("drag",l),this.setOnEvents("drag",l),/^x$|^y$|^xy$/.test(l.axis)?this.options.drag.axis=l.axis:null===l.axis&&delete this.options.drag.axis,this):aZ(l)?(this.options.drag.enabled=l,this):this.options.drag},setPerAction:function(m,l){for(var n in l){n in a4[m]&&(ah(l[n])?(this.options[m][n]=ai(this.options[m][n]||{},l[n]),ah(a4.perAction[n])&&"enabled" in a4.perAction[n]&&(this.options[m][n].enabled=!1===l[n].enabled?!1:!0)):aZ(l[n])&&ah(a4.perAction[n])?this.options[m][n].enabled=l[n]:void 0!==l[n]&&(this.options[m][n]=l[n]))}},dropzone:function(l){return ah(l)?(this.options.drop.enabled=!1===l.enabled?!1:!0,this.setOnEvents("drop",l),/^(pointer|center)$/.test(l.overlap)?this.options.drop.overlap=l.overlap:aU(l.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,l.overlap),0)),"accept" in l&&(this.options.drop.accept=l.accept),"checker" in l&&(this.options.drop.checker=l.checker),this):aZ(l)?(this.options.drop.enabled=l,this):this.options.drop},dropCheck:function(A,z,x,v,t,p){var r=!1;if(!(p=p||this.getRect(t))){return this.options.drop.checker?this.options.drop.checker(A,z,r,this,t,x,v):!1}var q=this.options.drop.overlap;if("pointer"===q){var n=aw(A),r=a3(x,v);n.x+=r.x;n.y+=r.y;r=n.x>p.left&&n.x<p.right;n=n.y>p.top&&n.y<p.bottom;r=r&&n}n=x.getRect(v);if("center"===q){var r=n.left+n.width/2,m=n.top+n.height/2,r=r>=p.left&&r<=p.right&&m>=p.top&&m<=p.bottom}aU(q)&&(r=Math.max(0,Math.min(p.right,n.right)-Math.max(p.left,n.left))*Math.max(0,Math.min(p.bottom,n.bottom)-Math.max(p.top,n.top))/(n.width*n.height)>=q);this.options.drop.checker&&(r=this.options.drop.checker(A,z,r,this,t,x,v));return r},dropChecker:function(l){return a9(l)?(this.options.drop.checker=l,this):null===l?(delete this.options.getRect,this):this.options.drop.checker},accept:function(l){return al(l)||d(l)?(this.options.drop.accept=l,this):null===l?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(l){return ah(l)?(this.options.resize.enabled=!1===l.enabled?!1:!0,this.setPerAction("resize",l),this.setOnEvents("resize",l),/^x$|^y$|^xy$/.test(l.axis)?this.options.resize.axis=l.axis:null===l.axis&&(this.options.resize.axis=a4.resize.axis),aZ(l.preserveAspectRatio)?this.options.resize.preserveAspectRatio=l.preserveAspectRatio:aZ(l.square)&&(this.options.resize.square=l.square),this):aZ(l)?(this.options.resize.enabled=l,this):this.options.resize},squareResize:function(l){return aZ(l)?(this.options.resize.square=l,this):null===l?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(l){return ah(l)?(this.options.gesture.enabled=!1===l.enabled?!1:!0,this.setPerAction("gesture",l),this.setOnEvents("gesture",l),this):aZ(l)?(this.options.gesture.enabled=l,this):this.options.gesture},autoScroll:function(l){ah(l)?l=ai({actions:["drag","resize"]},l):aZ(l)&&(l={actions:["drag","resize"],enabled:l});return this.setOptions("autoScroll",l)},snap:function(l){l=this.setOptions("snap",l);return l===this?this:l.drag},setOptions:function(m,l){var q=l&&w(l.actions)?l.actions:["drag"],p;if(ah(l)||aZ(l)){for(p=0;p<q.length;p++){var n=/resize/.test(q[p])?"resize":q[p];ah(this.options[n])&&(n=this.options[n][m],ah(l)?(ai(n,l),n.enabled=!1===l.enabled?!1:!0,"snap"===m&&("grid"===n.mode?n.targets=[au.createSnapGrid(ai({offset:n.gridOffset||{x:0,y:0}},n.grid||{}))]:"anchor"===n.mode?n.targets=n.anchors:"path"===n.mode&&(n.targets=n.paths),"elementOrigin" in l&&(n.relativePoints=[l.elementOrigin]))):aZ(l)&&(n.enabled=l))}return this}q={};n=["drag","resize","gesture"];for(p=0;p<n.length;p++){m in a4[n[p]]&&(q[n[p]]=this.options[n[p]][m])}return q},inertia:function(l){l=this.setOptions("inertia",l);return l===this?this:l.drag},getAction:function(m,l,q,p){var n=this.defaultActionChecker(m,q,p);return this.options.actionChecker?this.options.actionChecker(m,l,n,this,p,q):n},defaultActionChecker:aV,actionChecker:function(l){return a9(l)?(this.options.actionChecker=l,this):null===l?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(l){l=l||this._element;this.selector&&!al(l)&&(l=this._context.querySelector(this.selector));return aA(l)},rectChecker:function(l){return a9(l)?(this.getRect=l,this):null===l?(delete this.options.getRect,this):this.getRect},styleCursor:function(l){return aZ(l)?(this.options.styleCursor=l,this):null===l?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(l){return/^(always|never|auto)$/.test(l)?(this.options.preventDefault=l,this):aZ(l)?(this.options.preventDefault=l?"always":"never",this):this.options.preventDefault},origin:function(l){return d(l)||ah(l)?(this.options.origin=l,this):this.options.origin},deltaSource:function(l){return"page"===l||"client"===l?(this.options.deltaSource=l,this):this.options.deltaSource},restrict:function(m){if(!ah(m)){return this.setOptions("restrict",m)}for(var l=["drag","resize","gesture"],q,p=0;p<l.length;p++){var n=l[p];n in m&&(q=ai({actions:[n],restriction:m[n]},m),q=this.setOptions("restrict",q))}return q},context:function(){return this._context},_context:aM,ignoreFrom:function(l){return d(l)||al(l)?(this.options.ignoreFrom=l,this):this.options.ignoreFrom},allowFrom:function(l){return d(l)||al(l)?(this.options.allowFrom=l,this):this.options.allowFrom},element:function(){return this._element},fire:function(m){if(!m||!m.type||-1===ak(ar,m.type)){return this}var l,q,p,n="on"+m.type;if(m.type in this._iEvents){for(l=this._iEvents[m.type],q=0,p=l.length;q<p&&!m.immediatePropagationStopped;q++){l[q](m)}}if(a9(this[n])){this[n](m)}if(m.type in aI&&(l=aI[m.type])){for(q=0,p=l.length;q<p&&!m.immediatePropagationStopped;q++){l[q](m)}}return this},on:function(m,l,p){var n;aR(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(w(m)){for(n=0;n<m.length;n++){this.on(m[n],l,p)}return this}if(ah(m)){for(n in m){this.on(n,m[n],l)}return this}"wheel"===m&&(m=e);p=p?!0:!1;if(-1!==ak(ar,m)){m in this._iEvents?this._iEvents[m].push(l):this._iEvents[m]=[l]}else{if(this.selector){if(!aN[m]){for(aN[m]={selectors:[],contexts:[],listeners:[]},n=0;n<E.length;n++){aq.add(E[n],m,i),aq.add(E[n],m,bu,!0)}}m=aN[m];for(n=m.selectors.length-1;0<=n&&(m.selectors[n]!==this.selector||m.contexts[n]!==this._context);n--){}-1===n&&(n=m.selectors.length,m.selectors.push(this.selector),m.contexts.push(this._context),m.listeners.push([]));m.listeners[n].push([l,p])}else{aq.add(this._element,m,l,p)}}return this},off:function(x,v,t){var r;aR(x)&&-1!==x.search(" ")&&(x=x.trim().split(/ +/));if(w(x)){for(r=0;r<x.length;r++){this.off(x[r],v,t)}return this}if(ah(x)){for(var q in x){this.off(q,x[q],v)}return this}q=-1;t=t?!0:!1;"wheel"===x&&(x=e);if(-1!==ak(ar,x)){(t=this._iEvents[x])&&-1!==(q=ak(t,v))&&this._iEvents[x].splice(q,1)}else{if(this.selector){var m=aN[x],p=!1;if(!m){return this}for(q=m.selectors.length-1;0<=q;q--){if(m.selectors[q]===this.selector&&m.contexts[q]===this._context){var n=m.listeners[q];for(r=n.length-1;0<=r;r--){var l=n[r][1];if(n[r][0]===v&&l===t){n.splice(r,1);n.length||(m.selectors.splice(q,1),m.contexts.splice(q,1),m.listeners.splice(q,1),aq.remove(this._context,x,i),aq.remove(this._context,x,bu,!0),m.selectors.length||(aN[x]=null));p=!0;break}}if(p){break}}}}else{aq.remove(this._element,x,v,t)}}return this},set:function(m){ah(m)||(m={});this.options=ai({},a4.base);var l,r=["drag","drop","resize","gesture"],q=["draggable","dropzone","resizable","gesturable"],p=ai(ai({},a4.perAction),m[n]||{});for(l=0;l<r.length;l++){var n=r[l];this.options[n]=ai({},a4[n]);this.setPerAction(n,p);this[q[l]](m[n])}r="accept actionChecker allowFrom deltaSource dropChecker ignoreFrom origin preventDefault rectChecker styleCursor".split(" ");l=0;for(b=r.length;l<b;l++){if(q=r[l],this.options[q]=a4.base[q],q in m){this[q](m[q])}}return this},unset:function(){aq.remove(this._element,"all");if(aR(this.selector)){for(var m in aN){for(var l=aN[m];0<l.selectors.length;){l.selectors[0]===this.selector&&l.contexts[0]===this._context&&(l.selectors.splice(0,1),l.contexts.splice(0,1),l.listeners.splice(0,1),l.selectors.length||(aN[m]=null));aq.remove(this._context,m,i);aq.remove(this._context,m,bu,!0);break}}}else{aq.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="")}this.dropzone(!1);a8.splice(ak(a8,this),1);return au}};a6.prototype.snap=aS(a6.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping");a6.prototype.restrict=aS(a6.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction");a6.prototype.inertia=aS(a6.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia");a6.prototype.autoScroll=aS(a6.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll");a6.prototype.squareResize=aS(a6.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square");a6.prototype.accept=aS(a6.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead");a6.prototype.dropChecker=aS(a6.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead");a6.prototype.context=aS(a6.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead");au.isSet=function(m,l){return -1!==a8.indexOfElement(m,l&&l.context)};au.on=function(m,l,p){aR(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(w(m)){for(var n=0;n<m.length;n++){au.on(m[n],l,p)}return au}if(ah(m)){for(n in m){au.on(n,m[n],l)}return au}-1!==ak(ar,m)?aI[m]?aI[m].push(l):aI[m]=[l]:aq.add(aM,m,l,p);return au};au.off=function(m,l,q){aR(m)&&-1!==m.search(" ")&&(m=m.trim().split(/ +/));if(w(m)){for(var p=0;p<m.length;p++){au.off(m[p],l,q)}return au}if(ah(m)){for(p in m){au.off(p,m[p],l)}return au}if(-1===ak(ar,m)){aq.remove(aM,m,l,q)}else{var n;m in aI&&-1!==(n=ak(aI[m],l))&&aI[m].splice(n,1)}return au};au.enableDragging=aS(function(l){return null!==l&&void 0!==l?(aK.drag=l,au):aK.drag},"interact.enableDragging is deprecated and will soon be removed.");au.enableResizing=aS(function(l){return null!==l&&void 0!==l?(aK.resize=l,au):aK.resize},"interact.enableResizing is deprecated and will soon be removed.");au.enableGesturing=aS(function(l){return null!==l&&void 0!==l?(aK.gesture=l,au):aK.gesture},"interact.enableGesturing is deprecated and will soon be removed.");au.eventTypes=ar;au.debug=function(){var l=am[0]||new a;return{interactions:am,target:l.target,dragging:l.dragging,resizing:l.resizing,gesturing:l.gesturing,prepared:l.prepared,matches:l.matches,matchElements:l.matchElements,prevCoords:l.prevCoords,startCoords:l.startCoords,pointerIds:l.pointerIds,pointers:l.pointers,addPointer:at.addPointer,removePointer:at.removePointer,recordPointer:at.recordPointer,snap:l.snapStatus,restrict:l.restrictStatus,inertia:l.inertiaStatus,downTime:l.downTimes[0],downEvent:l.downEvent,downPointer:l.downPointer,prevEvent:l.prevEvent,Interactable:a6,interactables:a8,pointerIsDown:l.pointerIsDown,defaultOptions:a4,defaultActionChecker:aV,actionCursors:be,dragMove:at.dragMove,resizeMove:at.resizeMove,gestureMove:at.gestureMove,pointerUp:at.pointerUp,pointerDown:at.pointerDown,pointerMove:at.pointerMove,pointerHover:at.pointerHover,eventTypes:ar,events:aq,globalEvents:aI,delegatedEvents:aN,prefixedPropREs:aY}};au.getPointerAverage=c;au.getTouchBBox=bn;au.getTouchDistance=a5;au.getTouchAngle=az;au.getElementRect=aA;au.getElementClientRect=g;au.matchesSelector=aL;au.closest=ae;au.margin=aS(function(l){return aU(l)?(ad=l,au):ad},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead.");au.supportsTouch=function(){return bj};au.supportsPointerEvent=function(){return ay};au.stop=function(m){for(var l=am.length-1;0<=l;l--){am[l].stop(m)}return au};au.dynamicDrop=function(l){return aZ(l)?(aB=l,au):aB};au.pointerMoveTolerance=function(l){return aU(l)?(ag=l,this):ag};au.maxInteractions=function(l){return aU(l)?(k=l,this):k};au.createSnapGrid=function(l){return function(m,q){var p=0,n=0;ah(l.offset)&&(p=l.offset.x,n=l.offset.y);return{x:Math.round((m-p)/l.x)*l.x+p,y:Math.round((q-n)/l.y)*l.y+n,range:l.range}}};av(aM);bd in Element.prototype&&a9(Element.prototype[bd])||(f=function(m,l,p){p=p||m.parentNode.querySelectorAll(l);l=0;for(var n=p.length;l<n;l++){if(p[l]===m){return !0}}return !1});(function(){for(var m=0,l=["ms","moz","webkit","o"],n=0;n<l.length&&!a1.requestAnimationFrame;++n){aJ=a1[l[n]+"RequestAnimationFrame"],aF=a1[l[n]+"CancelAnimationFrame"]||a1[l[n]+"CancelRequestAnimationFrame"]}aJ||(aJ=function(p){var t=(new Date).getTime(),q=Math.max(0,16-(t-m)),r=setTimeout(function(){p(t+q)},q);m=t+q;return r});aF||(aF=function(p){clearTimeout(p)})})();"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=au),exports.interact=au):"function"===typeof define&&define.amd?define("interact",function(){return au}):a1.interact=au}})("undefined"===typeof window?void 0:window);/* howler.js v2.0.0 | (c) 2013-2016, James Simpson of GoldFire Studios | MIT License | howlerjs.com */
!function(){var h=function(){this.init()};h.prototype={init:function(){var a=this||f;return a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.mobileAutoEnable=!0,a._setup(),a},volume:function(s){var v=this||f;if(s=parseFloat(s),v.ctx||l(),"undefined"!=typeof s&&s>=0&&s<=1){if(v._volume=s,v._muted){return v}v.usingWebAudio&&(v.masterGain.gain.value=s);for(var n=0;n<v._howls.length;n++){if(!v._howls[n]._webAudio){for(var q=v._howls[n]._getSoundIds(),i=0;i<q.length;i++){var d=v._howls[n]._soundById(q[i]);d&&d._node&&(d._node.volume=d._volume*s)}}}return v}return v._volume},mute:function(s){var v=this||f;v.ctx||l(),v._muted=s,v.usingWebAudio&&(v.masterGain.gain.value=s?0:v._volume);for(var n=0;n<v._howls.length;n++){if(!v._howls[n]._webAudio){for(var q=v._howls[n]._getSoundIds(),i=0;i<q.length;i++){var d=v._howls[n]._soundById(q[i]);d&&d._node&&(d._node.muted=!!s||d._muted)}}}return v},unload:function(){for(var a=this||f,d=a._howls.length-1;d>=0;d--){a._howls[d].unload()}return a.usingWebAudio&&"undefined"!=typeof a.ctx.close&&(a.ctx.close(),a.ctx=null,l()),a},codecs:function(a){return(this||f)._codecs[a]},_setup:function(){var a=this||f;return a.state=a.ctx?a.ctx.state||"running":"running",a._autoSuspend(),a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var n=this||f,q="undefined"!=typeof Audio?new Audio:null;if(!q||"function"!=typeof q.canPlayType){return n}var d=q.canPlayType("audio/mpeg;").replace(/^no$/,""),i=n._navigator&&n._navigator.userAgent.match(/OPR\/([0-6].)/g),a=i&&parseInt(i[0].split("/")[1],10)<33;return n._codecs={mp3:!(a||!d&&!q.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!d,opus:!!q.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!q.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!q.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!q.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!q.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!q.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(q.canPlayType("audio/x-m4a;")||q.canPlayType("audio/m4a;")||q.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(q.canPlayType("audio/x-mp4;")||q.canPlayType("audio/mp4;")||q.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!q.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!q.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!q.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,"")},n},_enableMobileAudio:function(){var i=this||f,n=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(i._navigator&&i._navigator.userAgent),a=!!("ontouchend" in window||i._navigator&&i._navigator.maxTouchPoints>0||i._navigator&&i._navigator.msMaxTouchPoints>0);if(!i._mobileEnabled&&i.ctx&&(n||a)){i._mobileEnabled=!1,i._mobileUnloaded||44100===i.ctx.sampleRate||(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var d=function(){var e=i.ctx.createBufferSource();e.buffer=i._scratchBuffer,e.connect(i.ctx.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),e.onended=function(){e.disconnect(0),i._mobileEnabled=!0,i.mobileAutoEnable=!1,document.removeEventListener("touchend",d,!0)}};return document.addEventListener("touchend",d,!0),i}},_autoSuspend:function(){var d=this;if(d.autoSuspend&&d.ctx&&"undefined"!=typeof d.ctx.suspend&&f.usingWebAudio){for(var i=0;i<d._howls.length;i++){if(d._howls[i]._webAudio){for(var a=0;a<d._howls[i]._sounds.length;a++){if(!d._howls[i]._sounds[a]._paused){return d}}}}return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){d.autoSuspend&&(d._suspendTimer=null,d.state="suspending",d.ctx.suspend().then(function(){d.state="suspended",d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())}))},30000),d}},_autoResume:function(){var a=this;if(a.ctx&&"undefined"!=typeof a.ctx.resume&&f.usingWebAudio){return"running"===a.state&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):"suspended"===a.state?(a.state="resuming",a.ctx.resume().then(function(){a.state="running"}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):"suspending"===a.state&&(a._resumeAfterSuspend=!0),a}}};var f=new h,c=function(a){var d=this;return a.src&&0!==a.src.length?void d.init(a):void console.error("An array of source files must be passed with any new Howl.")};c.prototype={init:function(a){var d=this;return f.ctx||l(),d._autoplay=a.autoplay||!1,d._format="string"!=typeof a.format?a.format:[a.format],d._html5=a.html5||!1,d._muted=a.mute||!1,d._loop=a.loop||!1,d._pool=a.pool||5,d._preload="boolean"!=typeof a.preload||a.preload,d._rate=a.rate||1,d._sprite=a.sprite||{},d._src="string"!=typeof a.src?a.src:[a.src],d._volume=void 0!==a.volume?a.volume:1,d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._onend=a.onend?[{fn:a.onend}]:[],d._onfade=a.onfade?[{fn:a.onfade}]:[],d._onload=a.onload?[{fn:a.onload}]:[],d._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],d._onpause=a.onpause?[{fn:a.onpause}]:[],d._onplay=a.onplay?[{fn:a.onplay}]:[],d._onstop=a.onstop?[{fn:a.onstop}]:[],d._onmute=a.onmute?[{fn:a.onmute}]:[],d._onvolume=a.onvolume?[{fn:a.onvolume}]:[],d._onrate=a.onrate?[{fn:a.onrate}]:[],d._onseek=a.onseek?[{fn:a.onseek}]:[],d._webAudio=f.usingWebAudio&&!d._html5,"undefined"!=typeof f.ctx&&f.ctx&&f.mobileAutoEnable&&f._enableMobileAudio(),f._howls.push(d),d._preload&&d.load(),d},load:function(){var q=this,t=null;if(f.noAudio){return void q._emit("loaderror",null,"No audio support.")}"string"==typeof q._src&&(q._src=[q._src]);for(var n=0;n<q._src.length;n++){var i,s;if(q._format&&q._format[n]){i=q._format[n]}else{if(s=q._src[n],"string"!=typeof s){q._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(s),i||(i=/\.([^.]+)$/.exec(s.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(f.codecs(i)){t=q._src[n];break}}return t?(q._src=t,q._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(q._html5=!0,q._webAudio=!1),new p(q),q._webAudio&&m(q),q):void q._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(A,v){var G=this,n=null;if("number"==typeof A){n=A,A=null}else{if("string"==typeof A&&"loaded"===G._state&&!G._sprite[A]){return null}if("undefined"==typeof A){A="__default";for(var F=0,D=0;D<G._sounds.length;D++){G._sounds[D]._paused&&!G._sounds[D]._ended&&(F++,n=G._sounds[D]._id)}1===F?A=null:n=null}}var B=n?G._soundById(n):G._inactiveSound();if(!B){return null}if(n&&!A&&(A=B._sprite||"__default"),"loaded"!==G._state&&!G._sprite[A]){return G._queue.push({event:"play",action:function(){G.play(G._soundById(B._id)?B._id:void 0)}}),B._id}if(n&&!B._paused){return v||setTimeout(function(){G._emit("play",B._id)},0),B._id}G._webAudio&&f._autoResume();var y=B._seek>0?B._seek:G._sprite[A][0]/1000,E=(G._sprite[A][0]+G._sprite[A][1])/1000-y,H=1000*E/Math.abs(B._rate);B._paused=!1,B._ended=!1,B._sprite=A,B._seek=y,B._start=G._sprite[A][0]/1000,B._stop=(G._sprite[A][0]+G._sprite[A][1])/1000,B._loop=!(!B._loop&&!G._sprite[A][2]);var x=B._node;if(G._webAudio){var z=function(){G._refreshBuffer(B);var a=B._muted||G._muted?0:B._volume;x.gain.setValueAtTime(a,f.ctx.currentTime),B._playStart=f.ctx.currentTime,"undefined"==typeof x.bufferSource.start?B._loop?x.bufferSource.noteGrainOn(0,y,86400):x.bufferSource.noteGrainOn(0,y,E):B._loop?x.bufferSource.start(0,y,86400):x.bufferSource.start(0,y,E),H!==1/0&&(G._endTimers[B._id]=setTimeout(G._ended.bind(G,B),H)),v||setTimeout(function(){G._emit("play",B._id)},0)};"loaded"===G._state?z():(G.once("load",z,B._id),G._clearTimer(B._id))}else{var C=function(){x.currentTime=y,x.muted=B._muted||G._muted||f._muted||x.muted,x.volume=B._volume*f.volume(),x.playbackRate=B._rate,setTimeout(function(){x.play(),H!==1/0&&(G._endTimers[B._id]=setTimeout(G._ended.bind(G,B),H)),v||G._emit("play",B._id)},0)},q="loaded"===G._state&&(window&&window.ejecta||!x.readyState&&f._navigator.isCocoonJS);if(4===x.readyState||q){C()}else{var w=function(){C(),x.removeEventListener(f._canPlayEvent,w,!1)};x.addEventListener(f._canPlayEvent,w,!1),G._clearTimer(B._id)}}return B._id},pause:function(i){var s=this;if("loaded"!==s._state){return s._queue.push({event:"pause",action:function(){s.pause(i)}}),s}for(var q=s._getSoundIds(i),a=0;a<q.length;a++){s._clearTimer(q[a]);var d=s._soundById(q[a]);if(d&&!d._paused){if(d._seek=s.seek(q[a]),d._rateSeek=0,d._paused=!0,s._stopFade(q[a]),d._node){if(s._webAudio){if(!d._node.bufferSource){return s}"undefined"==typeof d._node.bufferSource.stop?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),s._cleanBuffer(d._node)}else{isNaN(d._node.duration)&&d._node.duration!==1/0||d._node.pause()}}arguments[1]||s._emit("pause",d._id)}}return s},stop:function(q,v){var s=this;if("loaded"!==s._state){return s._queue.push({event:"stop",action:function(){s.stop(q)}}),s}for(var d=s._getSoundIds(q),i=0;i<d.length;i++){s._clearTimer(d[i]);var a=s._soundById(d[i]);if(a&&!a._paused&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,s._stopFade(d[i]),a._node)){if(s._webAudio){if(!a._node.bufferSource){return s}"undefined"==typeof a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),s._cleanBuffer(a._node)}else{isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())}}a&&!v&&s._emit("stop",a._id)}return s},mute:function(s,v){var n=this;if("loaded"!==n._state){return n._queue.push({event:"mute",action:function(){n.mute(s,v)}}),n}if("undefined"==typeof v){if("boolean"!=typeof s){return n._muted}n._muted=s}for(var q=n._getSoundIds(v),i=0;i<q.length;i++){var d=n._soundById(q[i]);d&&(d._muted=s,n._webAudio&&d._node?d._node.gain.setValueAtTime(s?0:d._volume,f.ctx.currentTime):d._node&&(d._node.muted=!!f._muted||s),n._emit("mute",d._id))}return n},volume:function(){var x,z,v=this,w=arguments;if(0===w.length){return v._volume}if(1===w.length){var q=v._getSoundIds(),n=q.indexOf(w[0]);n>=0?z=parseInt(w[0],10):x=parseFloat(w[0])}else{w.length>=2&&(x=parseFloat(w[0]),z=parseInt(w[1],10))}var y;if(!("undefined"!=typeof x&&x>=0&&x<=1)){return y=z?v._soundById(z):v._sounds[0],y?y._volume:0}if("loaded"!==v._state){return v._queue.push({event:"volume",action:function(){v.volume.apply(v,w)}}),v}"undefined"==typeof z&&(v._volume=x),z=v._getSoundIds(z);for(var s=0;s<z.length;s++){y=v._soundById(z[s]),y&&(y._volume=x,w[2]||v._stopFade(z[s]),v._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(x,f.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=x*f.volume()),v._emit("volume",y._id))}return v},fade:function(A,v,G,n){var F=this,D=Math.abs(A-v),B=A>v?"out":"in",y=D/0.01,E=G/y;if("loaded"!==F._state){return F._queue.push({event:"fade",action:function(){F.fade(A,v,G,n)}}),F}F.volume(A,n);for(var H=F._getSoundIds(n),x=0;x<H.length;x++){var z=F._soundById(H[x]);if(z){if(n||F._stopFade(H[x]),F._webAudio&&!z._muted){var C=f.ctx.currentTime,q=C+G/1000;z._volume=A,z._node.gain.setValueAtTime(A,C),z._node.gain.linearRampToValueAtTime(v,q)}var w=A;z._interval=setInterval(function(a,d){w+="in"===B?0.01:-0.01,w=Math.max(0,w),w=Math.min(1,w),w=Math.round(100*w)/100,F._webAudio?("undefined"==typeof n&&(F._volume=w),d._volume=w):F.volume(w,a,!0),w===v&&(clearInterval(d._interval),d._interval=null,F.volume(w,a),F._emit("fade",a))}.bind(F,H[x],z),E)}}return F},_stopFade:function(d){var i=this,a=i._soundById(d);return a&&a._interval&&(i._webAudio&&a._node.gain.cancelScheduledValues(f.ctx.currentTime),clearInterval(a._interval),a._interval=null,i._emit("fade",d)),i},loop:function(){var v,x,w,q=this,s=arguments;if(0===s.length){return q._loop}if(1===s.length){if("boolean"!=typeof s[0]){return w=q._soundById(parseInt(s[0],10)),!!w&&w._loop}v=s[0],q._loop=v}else{2===s.length&&(v=s[0],x=parseInt(s[1],10))}for(var i=q._getSoundIds(x),d=0;d<i.length;d++){w=q._soundById(i[d]),w&&(w._loop=v,q._webAudio&&w._node&&w._node.bufferSource&&(w._node.bufferSource.loop=v))}return q},rate:function(){var x,q,C=this,n=arguments;if(0===n.length){q=C._sounds[0]._id}else{if(1===n.length){var B=C._getSoundIds(),z=B.indexOf(n[0]);z>=0?q=parseInt(n[0],10):x=parseFloat(n[0])}else{2===n.length&&(x=parseFloat(n[0]),q=parseInt(n[1],10))}}var y;if("number"!=typeof x){return y=C._soundById(q),y?y._rate:C._rate}if("loaded"!==C._state){return C._queue.push({event:"rate",action:function(){C.rate.apply(C,n)}}),C}"undefined"==typeof q&&(C._rate=x),q=C._getSoundIds(q);for(var w=0;w<q.length;w++){if(y=C._soundById(q[w])){y._rateSeek=C.seek(q[w]),y._playStart=C._webAudio?f.ctx.currentTime:y._playStart,y._rate=x,C._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.value=x:y._node&&(y._node.playbackRate=x);var A=C.seek(q[w]),D=(C._sprite[y._sprite][0]+C._sprite[y._sprite][1])/1000-A,v=1000*D/Math.abs(y._rate);!C._endTimers[q[w]]&&y._paused||(C._clearTimer(q[w]),C._endTimers[q[w]]=setTimeout(C._ended.bind(C,y),v)),C._emit("rate",y._id)}}return C},seek:function(){var w,q,B=this,n=arguments;if(0===n.length){q=B._sounds[0]._id}else{if(1===n.length){var A=B._getSoundIds(),y=A.indexOf(n[0]);y>=0?q=parseInt(n[0],10):(q=B._sounds[0]._id,w=parseFloat(n[0]))}else{2===n.length&&(w=parseFloat(n[0]),q=parseInt(n[1],10))}}if("undefined"==typeof q){return B}if("loaded"!==B._state){return B._queue.push({event:"seek",action:function(){B.seek.apply(B,n)}}),B}var x=B._soundById(q);if(x){if(!("number"==typeof w&&w>=0)){if(B._webAudio){var v=B.playing(q)?f.ctx.currentTime-x._playStart:0,z=x._rateSeek?x._rateSeek-x._seek:0;return x._seek+(z+v*Math.abs(x._rate))}return x._node.currentTime}var C=B.playing(q);C&&B.pause(q,!0),x._seek=w,x._ended=!1,B._clearTimer(q),C&&B.play(q,!0),!B._webAudio&&x._node&&(x._node.currentTime=w),B._emit("seek",q)}return B},playing:function(d){var q=this;if("number"==typeof d){var i=q._soundById(d);return !!i&&!i._paused}for(var a=0;a<q._sounds.length;a++){if(!q._sounds[a]._paused){return !0}}return !1},duration:function(d){var q=this,i=q._duration,a=q._soundById(d);return a&&(i=q._sprite[a._sprite][1]/1000),i},state:function(){return this._state},unload:function(){for(var q=this,r=q._sounds,n=0;n<r.length;n++){r[n]._paused||(q.stop(r[n]._id),q._emit("end",r[n]._id)),q._webAudio||(r[n]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",r[n]._node.removeEventListener("error",r[n]._errorFn,!1),r[n]._node.removeEventListener(f._canPlayEvent,r[n]._loadFn,!1)),delete r[n]._node,q._clearTimer(r[n]._id);var i=f._howls.indexOf(q);i>=0&&f._howls.splice(i,1)}var d=!0;for(n=0;n<f._howls.length;n++){if(f._howls[n]._src===q._src){d=!1;break}}return b&&d&&delete b[q._src],q._state="unloaded",q._sounds=[],q=null,null},on:function(q,v,s,d){var i=this,a=i["_on"+q];return"function"==typeof v&&a.push(d?{id:s,fn:v,once:d}:{id:s,fn:v}),i},off:function(v,x,w){var q=this,s=q["_on"+v],i=0;if(x){for(i=0;i<s.length;i++){if(x===s[i].fn&&w===s[i].id){s.splice(i,1);break}}}else{if(v){q["_on"+v]=[]}else{var d=Object.keys(q);for(i=0;i<d.length;i++){0===d[i].indexOf("_on")&&Array.isArray(q[d[i]])&&(q[d[i]]=[])}}}return q},once:function(d,q,i){var a=this;return a.on(d,q,i,1),a},_emit:function(q,v,s){for(var d=this,i=d["_on"+q],a=i.length-1;a>=0;a--){i[a].id&&i[a].id!==v&&"load"!==q||(setTimeout(function(n){n.call(this,v,s)}.bind(d,i[a].fn),0),i[a].once&&d.off(q,i[a].fn,i[a].id))}return d},_loadQueue:function(){var a=this;if(a._queue.length>0){var d=a._queue[0];a.once(d.event,function(){a._queue.shift(),a._loadQueue()}),d.action()}return a},_ended:function(n){var q=this,d=n._sprite,i=!(!n._loop&&!q._sprite[d][2]);if(q._emit("end",n._id),!q._webAudio&&i&&q.stop(n._id,!0).play(n._id),q._webAudio&&i){q._emit("play",n._id),n._seek=n._start||0,n._rateSeek=0,n._playStart=f.ctx.currentTime;var a=1000*(n._stop-n._start)/Math.abs(n._rate);q._endTimers[n._id]=setTimeout(q._ended.bind(q,n),a)}return q._webAudio&&!i&&(n._paused=!0,n._ended=!0,n._seek=n._start||0,n._rateSeek=0,q._clearTimer(n._id),q._cleanBuffer(n._node),f._autoSuspend()),q._webAudio||i||q.stop(n._id),q},_clearTimer:function(a){var d=this;return d._endTimers[a]&&(clearTimeout(d._endTimers[a]),delete d._endTimers[a]),d},_soundById:function(a){for(var i=this,d=0;d<i._sounds.length;d++){if(a===i._sounds[d]._id){return i._sounds[d]}}return null},_inactiveSound:function(){var a=this;a._drain();for(var d=0;d<a._sounds.length;d++){if(a._sounds[d]._ended){return a._sounds[d].reset()}}return new p(a)},_drain:function(){var d=this,q=d._pool,i=0,a=0;if(!(d._sounds.length<q)){for(a=0;a<d._sounds.length;a++){d._sounds[a]._ended&&i++}for(a=d._sounds.length-1;a>=0;a--){if(i<=q){return}d._sounds[a]._ended&&(d._webAudio&&d._sounds[a]._node&&d._sounds[a]._node.disconnect(0),d._sounds.splice(a,1),i--)}}},_getSoundIds:function(d){var q=this;if("undefined"==typeof d){for(var i=[],a=0;a<q._sounds.length;a++){i.push(q._sounds[a]._id)}return i}return[d]},_refreshBuffer:function(a){var d=this;return a._node.bufferSource=f.ctx.createBufferSource(),a._node.bufferSource.buffer=b[d._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop),a._node.bufferSource.playbackRate.value=a._rate,d},_cleanBuffer:function(a){var d=this;if(d._scratchBuffer){a.bufferSource.onended=null,a.bufferSource.disconnect(0);try{a.bufferSource.buffer=d._scratchBuffer}catch(a){}}return a.bufferSource=null,d}};var p=function(a){this._parent=a,this.init()};p.prototype={init:function(){var a=this,d=a._parent;return a._muted=d._muted,a._loop=d._loop,a._volume=d._volume,a._muted=d._muted,a._rate=d._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=Math.round(Date.now()*Math.random()),d._sounds.push(a),a.create(),a},create:function(){var d=this,i=d._parent,a=f._muted||d._muted||d._parent._muted?0:d._volume;return i._webAudio?(d._node="undefined"==typeof f.ctx.createGain?f.ctx.createGainNode():f.ctx.createGain(),d._node.gain.setValueAtTime(a,f.ctx.currentTime),d._node.paused=!0,d._node.connect(f.masterGain)):(d._node=new Audio,d._errorFn=d._errorListener.bind(d),d._node.addEventListener("error",d._errorFn,!1),d._loadFn=d._loadListener.bind(d),d._node.addEventListener(f._canPlayEvent,d._loadFn,!1),d._node.src=i._src,d._node.preload="auto",d._node.volume=a*f.volume(),d._node.load()),d},reset:function(){var a=this,d=a._parent;return a._muted=d._muted,a._loop=d._loop,a._volume=d._volume,a._muted=d._muted,a._rate=d._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=Math.round(Date.now()*Math.random()),a},_errorListener:function(){var a=this;a._node.error&&4===a._node.error.code&&(f.noAudio=!0),a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorListener,!1)},_loadListener:function(){var a=this,d=a._parent;d._duration=Math.ceil(10*a._node.duration)/10,0===Object.keys(d._sprite).length&&(d._sprite={__default:[0,1000*d._duration]}),"loaded"!==d._state&&(d._state="loaded",d._emit("load"),d._loadQueue()),d._autoplay&&d.play(),a._node.removeEventListener(f._canPlayEvent,a._loadFn,!1)}};var b={},m=function(q){var s=q._src;if(b[s]){return q._duration=b[s].duration,void g(q)}if(/^data:[^;]+;base64,/.test(s)){for(var r=atob(s.split(",")[1]),i=new Uint8Array(r.length),d=0;d<r.length;++d){i[d]=r.charCodeAt(d)}j(i.buffer,q)}else{var a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType="arraybuffer",a.onload=function(){var e=(a.status+"")[0];return"0"!==e&&"2"!==e&&"3"!==e?void q._emit("loaderror",null,"Failed loading audio file with status: "+a.status+"."):void j(a.response,q)},a.onerror=function(){q._webAudio&&(q._html5=!0,q._webAudio=!1,q._sounds=[],delete b[s],q.load())},k(a)}},k=function(a){try{a.send()}catch(d){a.onerror()}},j=function(a,d){f.ctx.decodeAudioData(a,function(i){i&&d._sounds.length>0&&(b[d._src]=i,g(d,i))},function(){d._emit("loaderror",null,"Decoding audio data failed.")})},g=function(a,d){d&&!a._duration&&(a._duration=d.duration),0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1000*a._duration]}),"loaded"!==a._state&&(a._state="loaded",a._emit("load"),a._loadQueue()),a._autoplay&&a.play()},l=function(){f.noAudio=!1;try{"undefined"!=typeof AudioContext?f.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?f.ctx=new webkitAudioContext:f.usingWebAudio=!1}catch(n){f.usingWebAudio=!1}if(!f.usingWebAudio){if("undefined"!=typeof Audio){try{var n=new Audio;"undefined"==typeof n.oncanplaythrough&&(f._canPlayEvent="canplay")}catch(n){f.noAudio=!0}}else{f.noAudio=!0}}try{var n=new Audio;n.muted&&(f.noAudio=!0)}catch(n){}var q=/iP(hone|od|ad)/.test(f._navigator&&f._navigator.platform),d=f._navigator&&f._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=d?parseInt(d[1],10):null;if(q&&i&&i<9){var a=/safari/.test(f._navigator&&f._navigator.userAgent.toLowerCase());(f._navigator&&f._navigator.standalone&&!a||f._navigator&&!f._navigator.standalone&&!a)&&(f.usingWebAudio=!1)}f.usingWebAudio&&(f.masterGain="undefined"==typeof f.ctx.createGain?f.ctx.createGainNode():f.ctx.createGain(),f.masterGain.gain.value=1,f.masterGain.connect(f.ctx.destination)),f._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:f,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=f,exports.Howl=c),"undefined"!=typeof window?(window.HowlerGlobal=h,window.Howler=f,window.Howl=c,window.Sound=p):"undefined"!=typeof global&&(global.HowlerGlobal=h,global.Howler=f,global.Howl=c,global.Sound=p)}();
/* Spatial Plugin */
!function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(c){var d=this;if(!d.ctx||!d.ctx.listener){return d}for(var b=d._howls.length-1;b>=0;b--){d._howls[b].stereo(c)}return d},HowlerGlobal.prototype.pos=function(c,f,b){var d=this;return d.ctx&&d.ctx.listener?(f="number"!=typeof f?d._pos[1]:f,b="number"!=typeof b?d._pos[2]:b,"number"!=typeof c?d._pos:(d._pos=[c,f,b],d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]),d)):d},HowlerGlobal.prototype.orientation=function(h,k,d,j,f,c){var b=this;if(!b.ctx||!b.ctx.listener){return b}var g=b._orientation;return k="number"!=typeof k?g[1]:k,d="number"!=typeof d?g[2]:d,j="number"!=typeof j?g[3]:j,f="number"!=typeof f?g[4]:f,c="number"!=typeof c?g[5]:c,"number"!=typeof h?g:(b._orientation=[h,k,d,j,f,c],b.ctx.listener.setOrientation(h,k,d,j,f,c),b)},Howl.prototype.init=function(b){return function(d){var c=this;return c._orientation=d.orientation||[1,0,0],c._stereo=d.stereo||null,c._pos=d.pos||null,c._pannerAttr={coneInnerAngle:"undefined"!=typeof d.coneInnerAngle?d.coneInnerAngle:360,coneOuterAngle:"undefined"!=typeof d.coneOuterAngle?d.coneOuterAngle:360,coneOuterGain:"undefined"!=typeof d.coneOuterGain?d.coneOuterGain:0,distanceModel:"undefined"!=typeof d.distanceModel?d.distanceModel:"inverse",maxDistance:"undefined"!=typeof d.maxDistance?d.maxDistance:10000,panningModel:"undefined"!=typeof d.panningModel?d.panningModel:"HRTF",refDistance:"undefined"!=typeof d.refDistance?d.refDistance:1,rolloffFactor:"undefined"!=typeof d.rolloffFactor?d.rolloffFactor:1},c._onstereo=d.onstereo?[{fn:d.onstereo}]:[],c._onpos=d.onpos?[{fn:d.onpos}]:[],c._onorientation=d.onorientation?[{fn:d.onorientation}]:[],b.call(this,d)}}(Howl.prototype.init),Howl.prototype.stereo=function(h,d){var g=this;if(!g._webAudio){return g}if("loaded"!==g._state){return g._queue.push({event:"stereo",action:function(){g.stereo(h,d)}}),g}var e="undefined"==typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"==typeof d){if("number"!=typeof h){return g._stereo}g._stereo=h,g._pos=[h,0,0]}for(var c=g._getSoundIds(d),b=0;b<c.length;b++){var f=g._soundById(c[b]);if(f){if("number"!=typeof h){return f._stereo}f._stereo=h,f._pos=[h,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",f._panner&&f._panner.pan||a(f,e),"spatial"===e?f._panner.setPosition(h,0,0):f._panner.pan.value=h),g._emit("stereo",f._id)}}return g},Howl.prototype.pos=function(k,d,j,e){var c=this;if(!c._webAudio){return c}if("loaded"!==c._state){return c._queue.push({event:"pos",action:function(){c.pos(k,d,j,e)}}),c}if(d="number"!=typeof d?0:d,j="number"!=typeof j?-0.5:j,"undefined"==typeof e){if("number"!=typeof k){return c._pos}c._pos=[k,d,j]}for(var b=c._getSoundIds(e),h=0;h<b.length;h++){var g=c._soundById(b[h]);if(g){if("number"!=typeof k){return g._pos}g._pos=[k,d,j],g._node&&(g._panner&&!g._panner.pan||a(g,"spatial"),g._panner.setPosition(k,d,j)),c._emit("pos",g._id)}}return c},Howl.prototype.orientation=function(k,d,j,e){var c=this;if(!c._webAudio){return c}if("loaded"!==c._state){return c._queue.push({event:"orientation",action:function(){c.orientation(k,d,j,e)}}),c}if(d="number"!=typeof d?c._orientation[1]:d,j="number"!=typeof j?c._orientation[2]:j,"undefined"==typeof e){if("number"!=typeof k){return c._orientation}c._orientation=[k,d,j]}for(var b=c._getSoundIds(e),h=0;h<b.length;h++){var g=c._soundById(b[h]);if(g){if("number"!=typeof k){return g._orientation}g._orientation=[k,d,j],g._node&&(g._panner||(g._pos||(g._pos=c._pos||[0,0,-0.5]),a(g,"spatial")),g._panner.setOrientation(k,d,j)),c._emit("orientation",g._id)}}return c},Howl.prototype.pannerAttr=function(){var e,k,d,b=this,g=arguments;if(!b._webAudio){return b}if(0===g.length){return b._pannerAttr}if(1===g.length){if("object"!=typeof g[0]){return d=b._soundById(parseInt(g[0],10)),d?d._pannerAttr:b._pannerAttr}e=g[0],"undefined"==typeof k&&(b._pannerAttr={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:b._coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:b._coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:b._coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:b._distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:b._maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:b._panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:b._refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:b._rolloffFactor})}else{2===g.length&&(e=g[0],k=parseInt(g[1],10))}for(var j=b._getSoundIds(k),c=0;c<j.length;c++){if(d=b._soundById(j[c])){var h=d._pannerAttr;h={coneInnerAngle:"undefined"!=typeof e.coneInnerAngle?e.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:"undefined"!=typeof e.coneOuterAngle?e.coneOuterAngle:h.coneOuterAngle,coneOuterGain:"undefined"!=typeof e.coneOuterGain?e.coneOuterGain:h.coneOuterGain,distanceModel:"undefined"!=typeof e.distanceModel?e.distanceModel:h.distanceModel,maxDistance:"undefined"!=typeof e.maxDistance?e.maxDistance:h.maxDistance,panningModel:"undefined"!=typeof e.panningModel?e.panningModel:h.panningModel,refDistance:"undefined"!=typeof e.refDistance?e.refDistance:h.refDistance,rolloffFactor:"undefined"!=typeof e.rolloffFactor?e.rolloffFactor:h.rolloffFactor};var l=d._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.panningModel=h.panningModel,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor):(d._pos||(d._pos=b._pos||[0,0,-0.5]),a(d,"spatial"))}}return b},Sound.prototype.init=function(b){return function(){var d=this,c=d._parent;d._orientation=c._orientation,d._stereo=c._stereo,d._pos=c._pos,d._pannerAttr=c._pannerAttr,b.call(this),d._stereo?c.stereo(d._stereo):d._pos&&c.pos(d._pos[0],d._pos[1],d._pos[2],d._id)}}(Sound.prototype.init),Sound.prototype.reset=function(b){return function(){var d=this,c=d._parent;return d._orientation=c._orientation,d._pos=c._pos,d._pannerAttr=c._pannerAttr,b.call(this)}}(Sound.prototype.reset);var a=function(b,c){c=c||"spatial","spatial"===c?(b._panner=Howler.ctx.createPanner(),b._panner.coneInnerAngle=b._pannerAttr.coneInnerAngle,b._panner.coneOuterAngle=b._pannerAttr.coneOuterAngle,b._panner.coneOuterGain=b._pannerAttr.coneOuterGain,b._panner.distanceModel=b._pannerAttr.distanceModel,b._panner.maxDistance=b._pannerAttr.maxDistance,b._panner.panningModel=b._pannerAttr.panningModel,b._panner.refDistance=b._pannerAttr.refDistance,b._panner.rolloffFactor=b._pannerAttr.rolloffFactor,b._panner.setPosition(b._pos[0],b._pos[1],b._pos[2]),b._panner.setOrientation(b._orientation[0],b._orientation[1],b._orientation[2])):(b._panner=Howler.ctx.createStereoPanner(),b._panner.pan.value=b._stereo),b._panner.connect(b._node),b._paused||b._parent.pause(b._id,!0).play(b._id)}}();var NUMBERS="0123456789";var LOWERCASE="abcdefghijklmnopqrstuvwxyz";var UPPERCASE="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function ValidString(b,a){if(b==""){return false}for(i=0;i<b.length;i++){if(a.indexOf(b.charAt(i),0)==-1){return false}}return true}function IsNumber(a){return ValidString(a,NUMBERS)}function IsLower(a){return ValidString(a,LOWERCASE)}function IsUpper(a){return ValidString(a,UPPERCASE)}function IsAlpha(a){return ValidString(a,LOWERCASE+UPPERCASE)}function IsAlphanum(a){return ValidString(a,LOWERCASE+UPPERCASE+NUMBERS)}function EncodeEntities(a){if(!a){return""}return a.replace(/&/g,"&amp;").replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,function(d){var c=d.charCodeAt(0);var b=d.charCodeAt(1);return"&#"+(((c-55296)*1024)+(b-56320)+65536)+";"}).replace(/([^\#-~| |!])/g,function(b){return"&#"+b.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Merge(){var d={};for(var c=0,a=arguments.length;c<a;c++){var e=arguments[c];for(var b in e){d[b]=e[b]}}return d}function DeepCopy(d){var b,a,c;b=Array.isArray(d)?[]:{};for(c in d){a=d[c];b[c]=(typeof a==="object")?DeepCopy(a):a}return b}function PrintArray(e,a){var f=[];a=a||0;var h=[];for(var c=0;c<a+1;c++){h.push("\t")}h=h.join("");if(typeof(e)=="object"){var b=0;for(var l in e){if(l.length>b){b=l.length}}for(var l in e){var k=e[l];if(typeof(k)=="object"){f.push(h+l+":");f.push(PrintArray(k,a+1))}else{var n=l.length;var m=Math.floor((b-n)/6)+1;var g=[];for(var d=0;d<m;d++){g.push("\t")}g=g.join("");f.push(h+l+":"+g+k)}}}else{f.push(h+e+"\t("+typeof(e)+")")}return f.join("\n")}function PrintTimestamp(k,h){if(k){var f=new Date(k*1000)}else{var f=new Date()}var g=f.getFullYear();var e=f.getMonth()+1;e=e<10?"0"+e:e;var j=f.getDate();j=j<10?"0"+j:j;if(h){return g+"-"+e+"-"+j}var c=f.getHours();c=c<10?"0"+c:c;var b=f.getMinutes();b=b<10?"0"+b:b;var a=f.getSeconds();a=a<10?"0"+a:a;return g+"-"+e+"-"+j+" "+c+":"+b+":"+a}function SecondsToTime(d,b){b=b||0;var a=Math.floor(d/3600);a=a<10?"0"+a:a;var c=Math.floor((d%3600)/60);c=c<10?"0"+c:c;var e=d%60;e=e<10?"0"+e.toFixed(b):e.toFixed(b);return a+":"+c+":"+e}function GMTToLocal(a){if(!a){var f=new Date();var b=f.toISOString().substr(0,19);var a=f.toTimeString();return b.substr(0,11)+a.substr(0,8)+b.substr(19)}a=a.replace(" ","T");var f=new Date();var c=new Date(a);if(isNaN(c.getTime())){throw new Error("Invalid date: "+a)}c.setMinutes(c.getMinutes()+f.getTimezoneOffset());return c.toISOString().substr(0,19)}function LocalToGMT(a){var c=new Date();if(!a){var b=new Date(c.toISOString().substr(0,19).replace(" ","T")+"Z");b.setMinutes(b.getMinutes()-c.getTimezoneOffset());return b.toISOString().substr(0,19)}a=a.replace(" ","T");var b=new Date(a+"Z");if(isNaN(b.getTime())){throw new Error("Invalid date: "+a)}b.setMinutes(b.getMinutes()-c.getTimezoneOffset());return b.toISOString().substr(0,19)}function DisplayTime(a){return a.substr(0,19).replace("T"," ")}function Keys(c){var b=[];for(var a in c){b.push(a)}return b}function Values(c){var a=[];for(var b in c){switch(typeof c[b]){case"function":continue}a.push(c[b])}return a}function IsFunc(a){return typeof a==="function"}function IsEmpty(b){if(typeof b==="undefined"){return true}if(Array.isArray(b)){if(b.length==0){return true}}else{for(var a in b){if(b.hasOwnProperty(a)){return false}}return true}return false}function NestObjects(){var d=arguments[0];for(var c=1,a=arguments.length;c<a;c++){var b=arguments[c];if(IsEmpty(d[b])){d[b]={}}d=d[b]}return d}function basename(a){return a.replace(/\\/g,"/").replace(/.*\//,"")}function dirname(a){return a.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")}String.prototype.startswith=function(a){return this.indexOf(a)==0};String.prototype.endswith=function(a){return this.indexOf(a,this.length-a.length)!==-1};String.prototype.replaceAll=function(b,a,c){return this.replace(new RegExp(b.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),(c?"gi":"g")),(typeof(a)=="string")?a.replace(/\$/g,"$$$$"):a)};String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(b){return b.toUpperCase()})};Array.prototype.remove=function(){var e,c=arguments,b=c.length,d;while(b&&this.length){e=c[--b];while((d=this.indexOf(e))!==-1){this.splice(d,1)}}return this};Array.prototype.contains=function(c){var a=this.length;for(var b=0;b<this.length;b++){if(this[b]==c){return true}}return false};Array.prototype.addtext=function(a,b){b=b||"\n";this.push(a.join(b))};function Shuffle(b){var d=b.length,c,f,e;if(d==0){return false}while(--d){c=Math.floor(Math.random()*(d+1));f=b[d];e=b[c];b[d]=e;b[c]=f}return b}function strcmp(d,c,e){if(e){d=d.toUpperCase();c=c.toUpperCase()}if(d>c){return 1}if(c>d){return -1}return 0}function RandInt(b,a){return Math.floor(Math.random()*(a-b))+b}function Range(d,a,e){var b=Array();for(var c=d;c<a;c+=e){b.push(c)}return b}function IsString(a){return(typeof a=="string"||a instanceof String)}function IsNum(a){return typeof a=="number"}function IsArray(a){return(a instanceof Array)||(Object.prototype.toString.apply(a)==="[object Array]")}function IsObject(a){return a===Object(a)}function isIE(){var a=navigator.userAgent.toLowerCase();return(a.indexOf("msie")!=-1)?parseInt(a.split("msie")[1]):false}(function(){var d=/\{\{|\}\}|\{(\d*)((?:\.(?:\w+)|\[(?:[^\]]*)\])*)(?::(?:([^{}]?)([<>=^]))?([-+\x20])?(\#)?(0)?(\d*)(,)?(?:\.(\d+))?([bcdeEfFgGosxX%])?)?\}/g;function c(a){var h=-1;var g=Array.prototype.slice.call(arguments,1);return a.replace(d,function b(ai,aq,af,V,Z,e,G,al,ao,am,E,ap){function ae(l,k){var j="";while(k>0){if(k&1){j+=l}k>>=1;l+=l}return j}var an;var ac;var Y;var X=new ReferenceError(ai+" is "+an+".");var ak={b:function f(){if(G){G="0b"}return G+an.toString(16)},c:function n(){return String.fromCharCode(20)},d:function o(){return an},e:function s(){return an.toExponential(E||6)},E:function ah(){return an.toExponential(E||6).toUpperCase()},f:function x(){return an.toFixed(E||6)},F:function aj(){return ak.f()},g:function F(){if(an===0){return 1/an===Infinity?"0":"-0"}if(E===0){E=1}var j=Math.abs(an);if(0.0001<=j&&j<Math.pow(10,E||6)){return +ak.f()}else{return an.toExponential(E)}},G:function W(){return ak.g().toUpperCase()},n:function aa(){return ak.g()},o:function ab(){if(G){G="0o"}return G+an.toString(8)},s:function ag(){return(""+an).substring(0,E)},x:function ad(){if(G){G="0x"}return G+an.toString(16)},X:function ar(){if(G){G="0x"}return G+an.toString(16).toUpperCase()},"%":function at(){an*=100;return ak.f()+"%"}};if(ai==="{{"){return"{"}if(ai==="}}"){return"}"}if(al){V=V||"0";Z=Z||"="}aq=aq||++h;an=g[aq];af.replace(/\.(\w+)|\[([^\]]*)\]/g,function(k,l,j){if(an==null){throw X}an=an[l||j]});if(an==null){throw X}if(!an.toExponential){if(ap&&ap!="s"){throw new TypeError(ai+" used on "+an)}ap="s";Z=Z||"<"}if(an==null){throw new TypeError(ai+" is "+an)}ac=""+ak[ap||"g"]();if(am){Y=ac.split(".");Y[0]=Y[0].replace(/(?=\d(?:\d{3})+$)/g,",");ac=Y.join(".")}if(ao){V=V||" ";switch(Z){case"<":ac+=ae(V,ao-ac.length);break;case"=":switch(e){case"+":case" ":if(ac.charAt(0)==="-"){e="-";ac=ac.substring(1)}break;default:if(ac.charAt(0)!=="-"){e=""}break}ac=e+ae(V,ao-ac.length-(""+e).length)+ac;break;case"^":ao-=ac.length;ac=ae(V,Math.floor(ao/2))+ac+ae(V,Math.ceil(ao/2));break;default:ac=ae(V,ao-ac.length)+ac;break}}return ac})}if(typeof module!=="undefined"){module.exports=c}else{this.format=c}}.call(this));function ToParams(c){var e=[];for(var d in c){if(c.hasOwnProperty(d)){var b=d,a=c[d];e.push(typeof a=="object"?ToParams(a,b):encodeURIComponent(b)+"="+encodeURIComponent(a))}}return e.join("&")};function DB(){this.intransaction=false;this.commands=[]}DB.prototype.Begin=function(){this.intransaction=true;return this};DB.prototype.Commit=function(){if(!this.commands.length){return}var a=_.promise();P.API("db/run",{commands:this.commands},function(b){a.fire(b.error?false:true,b)},{timeout:300,handleerror:0});this.intransaction=false;this.commands=[];return a};DB.prototype.Load=function(b,d,e,a,c){a=a||"*";c=c||[];this.commands.push({result:b,command:"load",model:d,ids:e,fields:a,methods:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.LoadMany=function(b,c,d,a){a=a||"*";this.commands.push({result:b,command:"loadmany",model:c,ids:d,fields:a});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Find=function(a,c,d,b){var f=null;var e=0;var b=b||{};start=b.start||0;limit=b.limit||100;orderby=b.orderby||"";fields=b.fields||"*";methods=b.methods||[];this.commands.push({result:a,command:"find",model:c,cond:d,start:start,limit:limit,orderby:orderby,fields:fields});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Update=function(a,b,c,d){this.commands.push({result:a,command:"update",model:b,ids:c,data:d});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Save=function(a,b,c){this.commands.push({result:a,command:"save",model:b,data:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.SaveMany=function(a,b,c){this.commands.push({result:a,command:"savemany",model:b,data:c});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Delete=function(a,c,b){this.commands.push({command:"delete",model:a,ids:c,cond:b});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Link=function(g,d,e,c,b,a,f){b=b||0;a=a||0;f=f||"";this.commands.push({command:"link",model1:g,id1:d,model2:e,id2:c,linktype:b,num:a,comment:f});if(!this.intransaction){return this.Commit()}return this};DB.prototype.LinkArray=function(g,d,e,c,b,a,f){b=b||0;a=a||0;f=f||"";this.commands.push({command:"linkarray",model1:g,id1:d,model2:e,id2:c,linktype:b,num:a,comment:f});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Unlink=function(e,c,d,b,a){this.commands.push({command:"unlink",model1:e,id1:c,model2:d,id2:b,linktype:a});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Linked=function(a,g,d,f,c,e,b){c=c||0;e=e||"";b=b||[];this.commands.push({result:a,command:"linked",model1:g,id1:d,model2:f,linktype:c,orderby:e,methods:b});if(!this.intransaction){return this.Commit()}return this};DB.prototype.UnlinkMany=function(d,b,c,a){a=a||0;this.commands.push({command:"unlinkmany",model1:d,id1:b,model2:c,linktype:a});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Query=function(a,b){this.commands.push({result:a,command:"query",query:b});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Eval=function(a,b){this.commands.push({result:a,command:"eval",code:b});if(!this.intransaction){return this.Commit()}return this};DB.prototype.Fields=function(a,b){this.commands.push({result:a,command:"fields",model:b});if(!this.intransaction){return this.Commit()}return this};DB.prototype.ListTypes=function(a){this.commands.push({result:a,command:"listtypes"});if(!this.intransaction){return this.Commit()}return this};DB.prototype.SaveTranslation=function(a,c,d,b){this.commands.push({result:a,command:"savetranslation",model:c,ids:d,translations:b});if(!this.intransaction){return this.Commit()}return this};var _db=new DB();LBUTTON=0;RBUTTON=1;MBUTTON=2;P={Init:function(){this.lang=1;this.userid=0;this.wallpaper="blue";this.texttheme="dark";this.media={};this.mediatoload=[];this.onmedialoaded=[];this.currentmediaid=0;this.events={};this.messageboxids=[];this.features=[];this.possumbot="possum";this.quickfuncs=[];this.istouch=0;this.mousex=0;this.mousey=0;this.currenty=0;this.holdpos=0;this.ignoreup=0;this.lastclicktime=0;this.emsize=0;this.firstview=1;this.screensize="small";this.currenturl="";this.viewportwidth=0;this.viewportheight=0;this.dontrestorecontent=[];this.timeoffset=new Date().getTimezoneOffset();this.ischrome=/\bChrome\b/.test(navigator.userAgent);this.isfirefox=/\bFirefox\b/.test(navigator.userAgent);this.issafari=/\bSafari\b/.test(navigator.userAgent);this.isedge=/\bEdge\b/.test(navigator.userAgent);this.useadvanced=this.ischrome||this.isfirefox||this.issafari||this.isedge;this.preloads={};this.screenorientation=window.innerWidth>window.innerHeight?"landscape":"portrait";this.currentpermissions="";this.inphoneapp=(typeof JSBridge!="undefined");this.onuploadfinished=0;this.layerstack=[]},URL:function(a,b){b=b||P.currentapp;return P.baseurl+b+"/"+a},APIURL:function(a,b){b=b||P.currentapp;return P.baseurl+"a/"+b+"/"+a},DataURL:function(a,b){b=b||P.currentapp;return P.baseurl+"d/"+b+"/"+a},ImageURL:function(a,b){b=b||P.currentapp;return P.baseurl+"i/"+b+"/"+a},SoundURL:function(a,b){b=b||P.currentapp;return P.baseurl+"s/"+b+"/"+a},CSSURL:function(a,b){b=b||P.currentapp;return P.baseurl+"c/"+b+"/"+a+".css"},JSURL:function(a,b){b=b||P.currentapp;return P.baseurl+"j/"+b+"/"+a+".js"},Target:function(b){b=b||window.event;var a=b.target||b.srcElement;return $(a)},Selected:function(a){var b=$$(a);return b.options[b.selectedIndex]},Debug:function(a){$$(".DebugMessages").innerHTML+=a+"\n"},CancelBubble:function(a){a=a||window.event;if(a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.cancelBubble=true}},HTML:function(a,b){var c=$$(a);if(c){c.innerHTML=b.join("\n")}},CodeDir:function(e){var b=[];for(var c=0,a=e.length;c<a;c+=3){b.push(e.substr(c,3))}return b.join("/")},DoneTyping:function(a,e,f){f=f||1000;var b=$(a);var c=b[0];b.on("|change |keydown |paste |input",function(g){if(c.typingtimeoutid){clearTimeout(c.typingtimeoutid)}c.typingtimeoutid=setTimeout(function(){c.typingtimeoutid=0;e(b)},f)});b.on("|blur",function(g){if(c.typingtimeoutid){clearTimeout(c.typingtimeoutid);c.typingtimeoutid=0;e(b)}})},OnClick:function(a,f,c,b,e){var g=interact(a);if(c){g.on("tap",function(j){var h=Date.now();if(c&&(j.button==f||j.button==undefined)){if((!P.holdpos||(Math.abs(j.screenX-P.holdpos.x)>32||Math.abs(j.screenY-P.holdpos.y)>32))&&(P.lastclicktime+300<h)){P.lastclicktime=h;c(j)}P.holdpos=0}})}if(b){g.on("doubletap",function(h){if(b&&(h.button==f||h.button==undefined)){b(h)}})}if(e){g.on("hold",function(h){if(e&&(h.button==f||h.button==undefined)){e(h);P.holdpos={x:h.screenX,y:h.screenY}}})}},AddHandler:function(b,a){if(!this.events[b]){this.events[b]=[]}this.events[b].push(a)},ClearHandlers:function(a){this.events[a]=[]},Loading:function(a){var b=$(a);if(b.length){b.ht(["<div class=Center>",'<img style="height: 1.3em;" src="'+this.baseurl+'i/h/loading.gif">',"<div class=Cleared></div>","</div>"].join("\n"));P.ScrollTo(b)}},ScrollTo:function(a){setTimeout(function(){var e=$(a);if(e.length){var c=P.AbsoluteRect(e);var b=c.top<window.pageYOffset;if(b||c.bottom>window.pageYOffset+window.innerHeight){e[0].scrollIntoView({behavior:"smooth",block:b?"start":"end"})}}},200)},AbsoluteRect:function(c){var b=$$(c);if(!b){return 0}var a=b.getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,right:a.right+window.pageXOffset,bottom:a.bottom+window.pageYOffset,width:a.width,height:a.height}},EMSize:function(a){a=a||document.body;return Number(getComputedStyle(a,"").fontSize.match(/(\d*(\.\d*)?)px/)[1])},AutoWidth:function(){$(".AutoWidth").each(function(o,g,a){o=$(o);var l=o.up();var n=l.get("$width",true);var m=P.EMSize($$(l));var b=o.get("%autowidth",true);var e=Math.round(n/(m*b));var j=0;var c=o.get(["$marginLeft","$paddingLeft","$paddingRight","$marginRight"],true);for(var f in c){if(c[f]){j+=c[f]}}if(!e){e=1}var h=Math.floor((n/e)-j);o.set("$width",h+"px");if(o.get("%autosquare")){o.set("$height",h+"px")}})},SameWidth:function(f,b,n){var a=$(f);if(!a.length){return}var p=$(a[0]);var m=p.up();var o=m.get("$width",true);var h=P.EMSize($$(m));var e=Math.round(o/(b*h));var l=0;var c=p.get(["$marginLeft","$paddingLeft","$paddingRight","$marginRight"],true);for(var g in c){if(c[g]){l+=c[g]}}if(!e){e=1}var j=Math.floor((o/e)-l);a.set("$width",j+"px");if(n){a.set("$height",Math.floor(j*n)+"px")}return j+"px"},SameMaxWidth:function(b){var a=0;var f=$(b);if(!f.length){return}f.each(function(k,g,h){var j=parseFloat($$(k).clientWidth);if(j>a){a=j}});var c=P.EMSize($$(f[0]));var e=Math.round(((a/c)+0.00001)*100)/100;f.set("$width",e+"em")},SameMaxHeight:function(a){var f=0;var e=$(a);if(!e.length){return}e.each(function(k,h,j){var g=parseFloat($$(k).clientHeight);if(g>f){f=g}});var b=P.EMSize($$(e[0]));var c=Math.round(((f/b)+0.00001)*100)/100;e.set("$height",c+"em")},Trace:function(){StackTrace.get().then(function(a){var b=a.map(function(c){return c.toString()}).join("\n");console.log(b)})},Popup:function(h,l){var f={"$width":"16em","$color":"black","$backgroundColor":"transparent","$zIndex":1000};switch(P.screensize){case"medium":f.width="22em";break;case"large":f.width="30em";break}l=Merge(f,l);var c=l.popupclass?l.popupclass:0;if(!c){for(;;){c="Popup"+RandInt(1,999999999);if(!$("."+c).length){break}}}$("body").add(HTML('<div class="Popup '+c+'" style="position: absolute; left: 0; top: 0;"></div>'));var a=$("."+c);a.fill(h);a.set(l);var k=P.ViewPortRect();var b=a[0].getBoundingClientRect();var e=0;var j=0;if(l.parent){var g=P.AbsoluteRect(l.parent);switch(l.position){case"left":e=g.left-b.width;j=g.top;break;case"top":e=g.left;j=g.top-b.height;break;case"right":e=g.right;j=g.top;break;default:e=g.left;j=g.bottom}}else{var g={left:P.mousex,top:P.mousey,width:0,height:0};e=l["$left"]?parseInt(l["$left"]):k.width/2-b.width/2+k.left;j=l["$top"]?parseInt(l["$top"]):k.height/2-b.height/2+k.top}if(e+b.width>k.right){e=k.right-b.width-P.emsize}if(j+b.height>k.bottom){j=k.bottom-b.height}if(e<k.left){e=k.left}if(j<k.top){j=k.top}a.set({"$left":g.left+"px","$top":g.top+"px","$width":g.width+"px","$height":g.height+"px"}).show().animate({"$left":e+"px","$top":j+"px","$width":l["$width"],"$height":"auto"},300);if(l.closeonmouseout){setTimeout(function(){P.mousex=e+1;P.mousey=j+1;P.ClosePopupOnMouseOut([l.parent,"."+c])},500)}P.AddLayer(c);return"."+c},ClosePopupOnMouseOut:function(h,b){var f=0;for(var g=0,e=h.length;g<e;g++){var c=P.AbsoluteRect(h[g]);if(P.InRect(P.mousex,P.mousey,c)){f=1;break}}if(!f){var a=h[h.length-1];P.RemoveLayer(a);$(a).remove();if(b){b()}return}setTimeout(function(){P.ClosePopupOnMouseOut(h,b)},500)},CloseThisPopup:function(a){var b=$(a);if(b.is(".Popup")){P.ClosePopup(b)}else{P.ClosePopup(b.up("div.Popup"))}},MessageBox:function(e,c,b){if(!b){b={}}if(!b.popupclass){var f=RandInt(1,99999999);while(P.messageboxids.indexOf(f)!=-1){f=RandInt(1,99999999)}b.popupclass="MsgBox"+f}var a=['<div class="Pad50 whiteb Raised">',];if(!IsArray(e)){e=[e]}a.addtext(e);a.push("<div class=MessageBoxBar></div></div>");P.Popup(HTML(a.join("\n")),b);if(!c){c=[[T[1],function(){P.CloseThisPopup("."+b.popupclass+" .MessageBoxBar")}]]}P.MakeButtonBar("."+b.popupclass+" .MessageBoxBar",c)},ErrorPopup:function(b,a){P.MessageBox(['<div class="Pad100 Error">','<img src="/i/h/icons/caution.png" class="FloatLeft Padded">',"<span class=ErrorPopupMsg>"+b+"</span>","</div>","<br class=Cleared>"],[[T[1],function(){P.CloseThisPopup(".ErrorPopupMsg")}]],Merge({popupclass:"ErrorPopup"},a))},ClosePopup:function(a){a=a||".Popup";$(a).animate({"$left":"0px","$top":"0px","$width":"0px","$height":"0px"},300);setTimeout(function(){var b=$(a);if(b.length){b.remove()}},300)},EditPopup:function(z,D,g){g=g||{};var r={"$backgroundColor":"white",popupclass:"EditPopup"};var f=g.formdiv;var c=f?f+"Form":"EditPopupForm";var J=g.cancelfunc;var b=g.fullscreen;var n=g.gobuttontext;var x=g.cancelbuttontext;var p=g.extrabuttons||"";var w=f?(f+"Results"):"EditPopupResults";delete g.formdiv;delete g.cancelfunc;delete g.fullscreen;delete g.gobuttontext;delete g.cancelbuttontext;delete g.extrabuttons;g=Merge(r,g);var o=['<form class="'+c+'">'];if(P.screensize!="small"){o.push('<table class="Width100 EditPopupTable"><tbody>');if(!g["$width"]){g["$width"]="40em"}}for(var H=0,E=z.length;H<E;H++){if(!z[H]){continue}var K=z[H][0];var y=z[H][1];var C=z[H][2];var a=z[H][3];var h=z[H][4];var A=z[H][5];if(!A){A=""}if(!C){C=""}if(!h){h=""}switch(y){case"select":var u=[];if(IsArray(h)){for(var G=0,B=h.length;G<B;G++){var t=h[G];u.push("<option "+((C==t)?"selected":"")+">"+t+"</option>")}}else{for(var F in h){var t=h[F];u.push('<option value="'+t+'" '+((C==t)?"selected":"")+">"+F+"</option>")}}editfield='<select name="'+K+'" class="'+K+'" '+A+">"+u.join("\n")+"</select>";break;case"multitext":editfield='<div class=FlexInput data-name="'+K+'" class="'+K+'" data-value="'+EncodeEntities(C.toString())+'" placeholder="'+EncodeEntities(h)+'" data-attrs="'+EncodeEntities(A)+'">';break;case"int":editfield='<input type=number name="'+K+'" class="'+K+'" value="'+C+'" placeholder="'+EncodeEntities(h)+'" '+A+">";break;case"float":editfield='<input type=number step=any name="'+K+'" class="'+K+'" value="'+C+'" placeholder="'+EncodeEntities(h)+'"'+A+">";break;case"datetime-local":editfield='<input type=datetime-local name="'+K+'" class="'+K+'" value="'+GMTToLocal(C)+'" placeholder="'+EncodeEntities(h)+'"'+A+">";break;case"custom":editfield='<input type=hidden name="'+K+'" class="'+K+'" value="'+EncodeEntities(C.toString())+'"'+A+'><div class="FormRow '+h+'"></div>';break;default:editfield="<input type="+y+' name="'+K+'" class="'+K+'" value="'+EncodeEntities(C.toString())+'" placeholder="'+EncodeEntities(h)+'"'+A+">"}if(y=="hidden"){o.push(editfield)}else{if(P.screensize=="small"){o=o.concat(['<div class="'+K+'Row">',"<label>"+a+"</label>",editfield,"</div>"])}else{o=o.concat(['<tr class="'+K+'Row">',"<th class=Width8>"+a+"</th>","<td>"+editfield+"</td>","</tr>"])}}}if(P.screensize!="small"){o.push("</tbody></table><br>")}o.addtext(["<br class=Cleared>","<div class=ButtonBar>",'<a class="ConfirmButton Color3"><img class="LineHeight BusyIcon">'+(n?n:T[47])+"</a>",'<a class="Spacer Width2"></a>',f?'<a class="ResetButton Color2"><img class="LineHeight BusyIcon">'+T[39]+"</a>":"",'<a class="CancelButton Color1"><img class="LineHeight BusyIcon">'+(x?x:T[1])+"</a>",p,"</div>","</form>",'<div class="'+w+'"></div>',"<div class=Cleared></div>"]);if(f){P.HTML("."+f,o);var s="."+f+" .ResetButton";$(s).on("click",P.Busy(s,function(){$$("."+c).reset()}));if(J){var I="."+f+" .CancelButton";$(I).on("click",P.Busy(I,function(){J("."+f)}))}}else{if(b||P.screensize=="small"){$(".FullScreen").set("+dblueg").ht(o.join("\n")).show();var I=".FullScreen .CancelButton";$(I).on("click",P.Busy(I,function(){$(".FullScreen").hide();if(J){J(".FullScreen")}}));f="FullScreen"}else{f=P.Popup(HTML('<div class="whiteb Pad50 Raised">'+o.join("\n")+"</div>"),g);var I=f+" .CancelButton";$(I).on("click",P.Busy(I,function(){$(f).remove();if(J){J(f)}}))}}var q="."+c+" .ConfirmButton";$(q).on("click",P.Busy(q,function(){if(D("."+f,P.FormToArray("."+c),$("."+w))){if(f=="FullScreen"){$(".FullScreen").hide()}else{if(f.indexOf("#Popup")!=-1){P.CloseThisPopup(this)}}}}));$("."+c).on("submit",function(j){if(j.preventDefault){j.preventDefault()}});P.FlexInput();var e=$("."+c+" input");if(e.length){e[0].focus()}else{e=$("."+c+" textarea");if(e.length){e[0].focus()}}if(P.screensize!="small"){$(".EditPopupTable select").set({"$position":"relative","$top":"1em"});$(".EditPopupTable th").set({"$position":"relative","$top":"0.5em"});$(".EditPopupTable input").set({"$margin":"0px","$width":"110%"});$(".EditPopupTable .FlexInput").set({"$marginTop":"1em","$border":"0.01em solid transparent"})}},EditThis:function(c,b,a){c=$(c);if(a){a=[["newvalue"].concat(a)]}else{a=[["newvalue","multitext",e,"Change text"]]}var e=c.text();P.EditPopup(a,function(){var f=$(".newvalue").get("value");c.fill(f);if(b){b(c,f)}return true},{parent:c,popupclass:"EditThisPopup"})},FlagToToggle:function(e,b,a){var c=" data-toggled=";if(e&b){return c+"on"}if(e&a){return c+"off"}return c+"unset"},EditPermissionPopup:function(a,b){P.HTML(".FullScreenContent",['<div class="Pad50 EditPermissions">',"<h2>Editing Permissions for "+a+"("+JSON.stringify(b)+")</h2>","<div class=PermissionResults></div>","<div class=ButtonBar>",'<a class="ConfirmButton Color3" onclick="P.SavePermissions()">'+T[34]+"</a>",'<a class="AddButton Color2" onclick="P.AddPermissionPopup()">'+T[21]+"</a>",'<a class="CancelButton Color1" onclick="$(\'.FullScreen\').hide();">'+T[1]+"</a>","</div>","<div class=Cleared></div>","<div class=SavePermissionResults></div>","</div>"]);$(".FullScreen").set("+dblueg").show();P.LoadingAPI(".PermissionResults","permissions/get",{model:a,objid:b,},function(e,c){e.item.model=a;e.item.ids=b;P.currentpermissions=e.item;P.DisplayPermissions()})},DisplayPermissions:function(){var g=$(".PermissionResults");if(!P.currentpermissions){g.ht("No permissions found");return}var h=P.currentpermissions;var c=['<table class="Width100 Permissions">',"<tr data-type=owner>","<th>Owner</th>",'<td colspan=7 class="greeng Owner HoverHighlight" data-objid='+h.owner+">"+h.ownername+"</td>","</tr>","<tr data-type=defaults>","<th>Defaults</th>","<td class=ToggleButton"+P.FlagToToggle(h.access,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(h.access,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(h.access,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(h.access,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(h.access,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(h.access,4096,8192)+">View All</td>","<td></td>","</tr>","<tr data-type=header class=usersheader>","<th colspan=7>Users</th>","</tr>"];var b=h.users.length;if(!b){c.push("<tr data-type=none><td colspan=7>No users added.</td></tr>")}else{for(var f=0,b=h.users.length;f<b;f++){var e=h.users[f];var a=e.access;c.addtext(["<tr data-type=user data-objid="+e.id+">","<th>"+e.name+"</th>","<td class=ToggleButton"+P.FlagToToggle(a,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(a,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(a,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(a,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(a,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(a,4096,8192)+">View All</td>",'<td class=Color1 onclick="P.DeletePermissions(this)">Delete</td>',"</tr>"])}}c.addtext(["<tr data-type=header class=groupsheader>","<th colspan=7>Groups</th>","</tr>"]);if(!b){c.push("<tr data-type=none><td colspan=7>No groups added.</td></tr>")}else{for(var f=0,b=h.groups.length;f<b;f++){var j=h.groups[f];var a=j.access;c.addtext(["<tr data-type=user data-objid="+j.id+">","<th>"+j.name+"</th>","<td class=ToggleButton"+P.FlagToToggle(a,1,2)+">Create</td>","<td class=ToggleButton"+P.FlagToToggle(a,64,128)+">Read</td>","<td class=ToggleButton"+P.FlagToToggle(a,4,8)+">Write</td>","<td class=ToggleButton"+P.FlagToToggle(a,16,32)+">Delete</td>","<td class=ToggleButton"+P.FlagToToggle(a,256,512)+">Link</td>","<td class=ToggleButton"+P.FlagToToggle(a,4096,8192)+">View All</td>",'<td class=Color1 onclick="P.DeletePermissions(this)">Delete</td>',"</tr>"])}}c.push("</table>");P.HTML(g,c);P.MakeToggleButtons(".EditPermissions .ToggleButton",1);P.OnClick(".Permissions .Owner",LBUTTON,P.ChangeOwnerPopup)},DeletePermissions:function(g){var h=$(g).up("tr");var m=parseInt(h.get("%objid"));var a=$("th",h,1).text();var k=P.currentpermissions;switch(h.get("%type")){case"user":for(var f=0,b=k.users.length;f<b;f++){var c=k.users[f];if((m&&c.id==m)||c.name==a){P.currentpermissions.users.splice(f,1);break}}break;case"groups":for(var f=0,b=k.groups.length;f<b;f++){var j=k.groups[f];if((m&&j.id==m)||j.name==a){P.currentpermissions.groups.splice(f,1);break}}break}P.DisplayPermissions()},ChangeOwner:function(){var a=$$(".newowner").value;$(".Permissions .Owner").set("%objid",0).fill(a);P.currentpermissions.owner=0;P.currentpermissions.ownername=a;P.ClosePopup(".ChangeOwnerPopup");return true},ChangeOwnerPopup:function(){P.EditPopup([["newowner","text","",T[53]]],P.ChangeOwner,{parent:".Permissions .Owner",cancelfunc:function(a){P.CloseThisPopup(a)},popupclass:"ChangeOwnerPopup"});P.OnEnter(".newowner",P.ChangeOwner)},AddPermissionPopup:function(a,b){P.Popup(HTML(['<div class="Pad50 whiteb AddPermission">',"<div>Type of permissions to add:</div>",'<div class="Radio AddTypeSelect">',"<input type=text value=users class=addtype>","<div data-value=users>User</div>","<div data-value=groups>Group</div>","</div>","<br class=Cleared><br>","<div>","Name or phone to add:","</div>","<div>","<input type=text class=addid>","</div>","<div class=ButtonBar>",'<a class="ConfirmButton Color3" onclick="P.AddPermission()">'+T[21]+"</a>",'<a class="Spacer Width400"></>','<a class="CancelButton Color1" onclick="P.CloseThisPopup(this);">'+T[1]+"</a>","</div>","<div class=Cleared></div>","</div>"].join("\n")),{popupclass:"AddPermissionPopup"});P.MakeRadioButtons(".AddTypeSelect");P.OnEnter(".addid",P.AddPermission)},AddPermission:function(){P.currentpermissions[$$(".addtype").value].push({id:0,name:$$(".addid").value,access:0});P.DisplayPermissions();P.ClosePopup(".AddPermissionPopup")},RowToAccess:function(b){var a=0;$("td",b,1).each(function(e,c){var f=$(e).get("%toggled");switch(f){case"on":switch(c){case 0:a|=1;break;case 1:a|=64;break;case 2:a|=4;break;case 3:a|=16;break;case 4:a|=256;break;case 5:a|=4096;break}break;case"off":switch(c){case 0:a|=2;break;case 1:a|=128;break;case 2:a|=8;break;case 3:a|=32;break;case 4:a|=512;break;case 5:a|=8192;break}break}});return a},SavePermissions:function(){var a={owner:$(".Owner").get("%objid"),ownername:$(".Owner").text(),users:[],groups:[],model:P.currentpermissions.model,objid:P.currentpermissions.ids};$(".Permissions tr").each(function(b){b=$(b);switch(b.get("%type")){case"user":a.users.push({id:b.get("%objid"),name:$("th",b,1).text(),access:P.RowToAccess(b)});break;case"group":a.groups.push({id:b.get("%objid"),name:$("th",b,1).text(),access:P.RowToAccess(b)});break;case"owner":var c=$("td",b,1);a.owner=c.get("%objid");a.ownername=c.text();break;case"defaults":a.access=P.RowToAccess(b);break}});P.LoadingAPI(".SavePermissionResults","permissions/set",a,function(){$(".FullScreen").hide()},{timeout:600})},Icon:function(a){return'<img class=LineHeight src="'+P.IconURL(a)+'">'},IconURL:function(a){return P.baseurl+"i/h/svg/"+a+".svg"},IconTD:function(b,a){return'<td class="Color'+a+' Center"><img class=LineHeight src="'+P.IconURL(b)+'"></td>'},Tooltip:function(a,c,b){b=b||1000;$(a).onOver(function(f,e){var g=$(this);if(f){g.set("%tooltiptimer",setTimeout(function(){var j=P.Popup(HTML(c(g)),{parent:g,position:"top",closeonmouseout:1});$(j).set("+Tooltip")},b))}else{var h=g.get("%tooltiptimer");if(h){clearTimeout(h);g.set("%tooltiptimer","")}}})},MakeButtonBar:function(a,j){var e=[];var f=1;var h=0;var c="";for(var g=0,b=j.length;g<b;g++){h=j[g];if(h[1]=="custom"){e.push(h[0]);continue}if(h.length>2&&h[2]){f=h[2]}c=(h.length>3)?h[3]:"";e.push('<a class="Color'+f+" Button"+g+" "+c+'"><img class="LineHeight BusyIcon">'+h[0]+"</a>");f++;if(f>6){f=1}}$(a).set("+ButtonBar").ht(e.join("\n"));for(var g=0,b=j.length;g<b;g++){var h=a+" .Button"+g;P.OnClick(h,LBUTTON,P.Busy(h,j[g][1]))}},DragMoveListener:function(b){var c=b.target,a=(parseFloat(c.getAttribute("data-x"))||0)+b.dx,e=(parseFloat(c.getAttribute("data-y"))||0)+b.dy;c.style.webkitTransform=c.style.transform="translate("+a+"px, "+e+"px)";c.setAttribute("data-x",a);c.setAttribute("data-y",e)},MakeFloatingButton:function(a,e){var c=$(a);if(!c.length){var b=P.Popup(HTML(e));c=$(b);c.hide()}setTimeout(function(){c.set("+"+a.substr(1)).set({"$zIndex":"1100","$position":"fixed","$left":"110%","$top":"80%","$cursor":"nwse-resize"}).show().animate({"$left":"80%","$top":"80%","$width":"auto"},300)},500);interact(a).draggable({inertia:true,autoScroll:true,onmove:P.DragMoveListener,restrict:{restriction:"parent",endOnly:true,elementRect:{top:0,left:0,bottom:1,right:1}},});return a},Busy:function(a,b){return function(c,g){var e=$(a+" .BusyIcon");var f=e.get("@src");e.set("@src",P.ImageURL("busy.svg","h"));b(c,g);setTimeout(function(){e.set("@src",f)},500)}},MakeRange:function(b,h,e,a,g,j,c){g=g?g:e;j=j||"";var f=$(b);P.HTML(f,["<div class=ButtonBar>",j?"<span class=RangeTitle>"+j+"</span>":"",'<meter class="Range '+h+'" min='+e+" max="+a+" value="+g+"></meter>","<span class=RangeDisplay>"+g+"</span>","</div>"]);P.OnClick(b+" .Range",LBUTTON,function(q){var n=$(b+" .Range");var o=parseInt(n.get("@min"));var k=parseInt(n.get("@max"));var p=n[0].value;var l=P.AbsoluteRect(n);var m=Math.round(((P.mousex-l.left)/l.width)*(k-o))+o;if(p==m){return}n[0].value=m;$(b+" .RangeDisplay").fill(m);c(n,m)})},MoveUp:function(c,a,b){c=$(c);if(a){c=c.up(a)}if(!c.length){return}var e=$(c.trav("previousSibling")[0]);c.addAfter(e.clone());e.remove();if(b){b(c)}},MoveDown:function(e,a,b){e=$(e);if(a){e=e.up(a)}if(!e.length){return}var c=e.next();e.addBefore(c.clone());c.remove();if(b){b(e)}},MakeSortableTable:function(a){$(a).on("click",function(f){var c=P.Target(f);if(c[0].tagName!="TD"){c=c.up("td")}var b=c.up("tr");var g=$("img",c).get("@src");if(!g){return}if(g.indexOf("up")!=-1){P.MoveUp(b)}else{if(g.indexOf("down")!=-1){P.MoveDown(b)}else{if(g.indexOf("delete")!=-1){b.remove()}}}})},ConfirmDeletePopup:function(b,a){P.Popup(HTML(['<div class="DeletePopup yellowb Pad50">',"<p>",T[57]+b+"?","</p>","<div class=DeleteButtonBar></div>","<div class=Cleared></div>","<div class=ConfirmDeleteResults></div>","<div class=Cleared></div>","</div>"].join("\n")),{popupclass:"ConfirmDeletePopup"});P.MakeButtonBar(".DeleteButtonBar",[[T[34],a][T[1],function(c,e){P.CloseThisPopup(e)}]])},ViewPortRect:function(){var b=window,j=document,h=j.documentElement,f=j.getElementsByTagName("body")[0];var c=b.innerWidth;var a=b.innerHeight;return{left:b.pageXOffset,top:b.pageYOffset,right:b.pageXOffset+c,bottom:b.pageYOffset+a,width:c,height:a}},OnResize:function(){if(!P.emsize){return}var e=P.ViewPortRect();P.viewportwidth=e.width;P.viewportheight=e.height;P.numems=e.width/P.emsize;if(P.numems<25){P.screensize="small"}else{if(P.numems<50){P.screensize="medium"}else{P.screensize="large"}}$("#ScreenSizeStylesheet").set("@href",P.baseurl+"c/h/"+P.screensize+".css");if(P.wallpaper){$("body").set("$backgroundImage","url('/i/h/wallpapers/"+P.wallpaper+"-"+P.screensize+".jpg')")}if(P.texttheme){$("#TextThemeStylesheet").set("@href","/c/h/themes/"+P.texttheme+".css")}if(!IsEmpty(P.events.resize)){var b=P.events.resize;for(var c=0,a=b.length;c<a;c++){b[c]()}}},StoreInArray:function(c,e,j){var h=e.split(".");var b=h.length;var a=c;for(var g=0;g<b;g++){var f=h[g];if(g!=b-1){if(!IsObject(a[f])){a[f]={}}}else{if(a[f]){if(!IsArray(a[f])){a[f]=[]}a[f].push(j)}else{a[f]=j}}a=a[h[g]]}return c},FormToArray:function(a){var c={};var b=$(a);$("input",b).each(function(k,g,h){var e=$(k);var f=e.get("@name");var l=e.get("value");var j=e.get("@type");if(!f){return}switch(j){case"number":l=parseFloat(l);break;case"datetime-local":l=LocalToGMT(l);break}P.StoreInArray(c,f,l)});$("textarea",b).each(function(j,g,h){var e=$(j);var f=e.get("@name");var k=e.get("value");if(!f){return}P.StoreInArray(c,f,k)});$("select",b).each(function(j,g,h){var e=$(j);var f=e.get("@name");var k=e.get("value");if(!f){return}P.StoreInArray(c,f,k)});$(".ToggleButton",b).each(function(j,g,h){var e=$(j);var f=e.get("%name");var k=e.get("%toggled");if(f){P.StoreInArray(c,f,k)}});$(".FormInput",b).each(function(j,g,h){var e=$(j);var f=e.get("%name");var k=e.get("%value");if(f&&k){P.StoreInArray(c,f,k)}});return c},NumToPath:function(b,g){g=g||9;var f=format("{:0"+g+"}",b);var e=[];var a=f.length-2;for(var c=0;c<a;c+=3){e.push(f.substr(c,3))}return e.join("/")},DeleteParent:function(b,a){$(a).up(b).remove()},SortArray:function(h,f,g,e){var b=[];var c=null;for(var a in h){if(h[a]){if(e){c=h[a][g][e]}else{if(g){c=h[a][g]}else{c=h[a]}}if(c==undefined){continue}if(c&&f){c=c.toString().toLowerCase()}b.push([a,c])}}b.sort(function(k,j){if(k[1]==j[1]){return 0}return(k[1]>j[1])?1:-1});return b},MakeToggleNext:function(a){$(a).each(function(f,c){var b=$(f);var e=b.next();e.hide();b.set("+HoverHighlight");b.add(HTML('<img src="'+P.baseurl+'i/h/icons/down.png" class="ToggleIcon">'));e.add(HTML('<a class="Button MiniButton Color4" onclick="P.ToggleThis(this)">'+T[37]+'<img src="'+P.baseurl+'i/h/icons/up.png" class="ToggleIcon"></a>'))});P.OnClick(a,LBUTTON,P.ToggleNext)},ToggleNext:function(h,f){var a=$(f);var c=a.next();var g=$(".ToggleIcon",a);var b=g.get("@src")==(P.baseurl+"i/h/icons/up.png");if(b){c.hide();g.set("@src",P.baseurl+"i/h/icons/down.png")}else{c.show();g.set("@src",P.baseurl+"i/h/icons/up.png")}},ToggleThis:function(c){var a=$(c).up();var b=$(a.trav("previousSibling")[0]);a.hide();$(".ToggleIcon",b).set("@src",P.baseurl+"i/h/icons/down.png")},SortChildrenByText:function(a,b,c){c=c||"";var f=$(a);var e=f.children(b).get();e.sort(function(h,g){var k=$(h).find(c).text().toLowerCase();var j=$(g).find(c).text().toLowerCase();return(k<j)?-1:(k>j)?1:0});f.empty().append(e)},MakeToggleButtons:function(a,b){$(a).each(function(f,e){var c=$(f);switch(c.get("%toggled")){case"on":c.set("-redg -grayg +greeng");break;case"off":c.set("+redg -grayg -greeng");break;case"unset":c.set("-redg +grayg -greeng")}});P.OnClick(a,LBUTTON,function(g){var c=P.Target(g);switch(c.get("%toggled")){case"on":if(b){c.set("%toggled","off").set("+redg -grayg -greeng")}else{c.set("%toggled","unset").set("-redg +grayg -greeng")}break;case"off":c.set("%toggled","unset").set("-redg +grayg -greeng");break;default:c.set("%toggled","on").set("-redg -grayg +greeng")}var f=c.get("%ontoggle");console.log("ontoggle",f);if(f){window[f](g,c)}})},ToggledButtons:function(a){var b={on:[],off:[],unset:[]};$(a).each(function(g,e,f){var c=$(g);var h=c.get("%value");b[c.get("%toggled")].push(c.text())});return b},MakeRadioButtons:function(a){$(a).each(function(e){var c=$(e);var b=$("input",e);var f=b[0].value;$("div",c,true).each(function(h){var g=$(h);if(g.get("%value")==f){g.set("-grayg +greeng")}else{g.set("-greeng +grayg")}});P.OnClick($("div",c,true),LBUTTON,function(k){var g=$(this);var j=g.get("%value");var h=g.up();h.select("input",true)[0].value=j;h.select("div",true).each(function(l){var m=$(l);if(m.get("%value")==j){m.set("-grayg +greeng")}else{m.set("-greeng +grayg")}})})})},Set:function(a){P.API("h/sessions/set",{values:a})},API:function(f,c,a,b){var e={method:"post",timeout:10,handleerror:1};b=Merge(e,b);P.AJAX("/a/"+f,JSON.stringify(c),b).then(function(g){var h=$.parseJSON(g.response);if(!h){throw new Error("P.API: No JSON returned! "+g.statusText+": "+g.response)}else{if(h.error&&b.handleerror){throw new Error("P.API: "+h.error)}else{if(a){a(h)}}}},function(g){throw new Error("P.API: "+g.statusText+": "+g.response)})},LoadingAPI:function(b,g,e,c,a){var f={handleerror:0};a=Merge(f,a);b=$(b);P.Loading(b);this.API(g,e,function(h){if(h.error){b.ht("<div class=Error>"+h.error+"</div>")}else{c(h,b)}},a)},LoadingDialog:function(){return P.Popup(HTML(['<div class="LoadingResults Padded FullWidth Centered">','<img src="/i/h/loading.gif" style="width: 96%"></div>'].join("\n")))},DialogAPI:function(g,e,c,a){var f={handleerror:0};a=Merge(f,a);var b=P.LoadingDialog();this.API(g,e,function(h){if(h.error){$(".LoadingResults").ht(['<div class="whiteb Rounded Pad50">',"<div class=Error>"+h.error+"</div>","<br>",'<div><a class="Button Color1 Width93" onclick="P.CloseThisPopup(this)">'+T[37]+"</a></div>","</div>"].join("\n"))}else{P.ClosePopup(b);c(h)}},a)},ChangeWallpaper:function(a,b){var c=a.split("-");this.wallpaper=c[0];this.texttheme=c[1].replace(".jpg","");this.OnResize();if(!b){this.API("wallpapers/set",{filename:c[0]},function(){})}},SetLanguage:function(a){this.API("translations/setlang",{langcode:a},function(){window.location.reload(1)})},AJAX:function(a,e,b){var g={method:"get",timeout:15,};b=Merge(g,b||{});if(b.method=="get"&&e){a+="?"+ToParams(e)}var f=_.promise();var c=new XMLHttpRequest();c.open(b.method,a);c.timeout=b.timeout*1000;c.addEventListener("load",function(){f.fire(true,[c,"loaded"])});c.addEventListener("error",function(){f.fire(false,[c,"error"])});c.addEventListener("abort",function(){f.fire(false,[c,"aborted"])});c.addEventListener("timeout",function(){f.fire(false,[c,"timeout"])});if(b.method=="post"&&e){c.send(e)}else{c.send()}return f},EvalInlineScripts:function(contentdiv){$("script",contentdiv).each(function(item,index,context){var src=$(item).get("@src");if(!src){eval($(this).text())}})},LoadURL:function(c,a,b){b=b||{};title=b.title||"";content=b.content||"";contentfunc=b.contentfunc||"";data=b.data||{};contentdiv=b.contentdiv||"#Content";if(c==P.currenturl){return}P.currenturl=c;if(!a||!P.useadvanced){P.LoadingDialog();window.location=c}else{if(content||contentfunc){history.pushState({title:title,content:content,contentdiv:contentdiv,contentfunc:contentfunc,data:data},title,c);if(contentfunc){window[contentfunc](data);P.dontrestorecontent.push(1)}}else{contentdiv=$(contentdiv);P.Loading(contentdiv);P.AJAX(c,{contentonly:true},{timeout:10000}).then(function(e){d=$.parseJSON(e.response);if(!d){contentdiv.ht("<div class=Error>Problem getting content... Please try again</div>")}else{if(d.error){contentdiv.ht("<div class=Error>"+d.error+"</div>")}else{contentdiv[0].innerHTML=d.content;$("script",contentdiv).each(function(h,f,g){var j=$(h).get("@src");if(j){_loader.Load(j)}});_loader.OnFinished(function(){P.EvalInlineScripts(contentdiv)});history.pushState(d,d.title,c);window.scrollTo(0,0)}}}).error(function(e,f){contentdiv.ht("<div class=Error>"+e.reason+"<br>"+e.responseText+"</div>")})}}},CloseTopLayer:function(){if(P.layerstack.length){for(;;){if(!P.layerstack.length){break}var a=P.layerstack.pop();var b=$(a);if(!b.length){break}if(a.indexOf("Popup")>-1){$(a).remove()}else{$(a).ht("").hide()}window.history.back();return 1}}return 0},OnPopState:function(e){if(P.CloseTopLayer()){return}if(e.state){if(e.state.contentfunc){window[e.state.contentfunc](e.state.data)}else{if(!P.dontrestorecontent.pop()){var contentdiv=$(e.state.contentdiv);contentdiv.ht(e.state.content);$("script",contentdiv).each(function(){eval($(this).text())})}}}else{if(!P.dontrestorecontent.pop()){window.location.reload(1)}}},PageBar:function(k,a,f,l,m,n){k=parseInt(k);a=parseInt(a);m=parseInt(m);n=n||"ListObjects";f=parseInt(f)||100;numpages=Math.ceil(k/f);var h=["<div class=Cleared></div>","<div class=Pad50>",(k?(a+1):0)+" - "+(a+m)+" / ~"+k,"</div>",'<div class="ButtonBar PageBar">'];if(k>f){if(a){h.push('<a class="FirstPage" onclick="'+n+"('"+l+"', 0)\">&lt;&lt;</a>");if(a>=f){h.push('<a class="PreviousPage" onclick="'+n+"('"+l+"', "+(a-f)+')">&lt;</a>')}}var b=Math.floor(a/f);var c=0;var j=numpages;if(numpages>16){c=b>8?b-8:0;j=b+8<numpages?b+8:numpages}for(var g=c;g<j;g++){var e=g*f;if(e!=a){h.push('<a onclick="'+n+"('"+l+"', "+e+')">'+e+"</a>")}}if(a+f<k){if(a+f<k-f){h.push('<a class="NextPage" onclick="'+n+"('"+l+"', "+(a+f)+')">&gt;</a>')}h.push('<a class="LastPage" onclick="'+n+"('"+l+"', "+(Math.ceil((k-f)/f)*f)+')">&gt;&gt;</a>')}}if(numpages>16){h.push("<a class=ChoosePage onclick=\"P.ChoosePage('"+l+"', "+a+", "+f+", "+k+", '"+n+"')\">"+T[34]+"</a>")}h.push("</div>");h.push("<div class=Cleared></div>");return h},ChoosePage:function(e,h,a,b,g){var f=Math.floor(h/a)+1;var c=Math.ceil(b/a);P.EditPopup([["pagenum","int",f,T[35]+" (1-"+c+")","","min=1 max="+c],],function(){P.GotoPage(e,a,g)});P.OnEnter(".pagenum",function(){P.GotoPage(e,a,g)});setTimeout(function(){var j=$$(".pagenum");j.focus();j.select()},500)},GotoPage:function(b,a,c){var e=a*(parseInt($$(".pagenum").value)-1);P.ClosePopup();window[c](b,e,a)},OnPauseButton:function(a){var b=P.media[a];if(b){if(b.playing()){$(".PlayBar .PauseButton").set("@src",P.ImageURL("icons/pause.png","h"));b.pause()}else{$(".PlayBar .PauseButton").set("@src",P.ImageURL("icons/play.png","h"));b.play(P.currentmediaid)}}},OnPlayTimer:function(a){if(P.media[a]&&P.media[a].playing()){var b=P.media[a].seek();$(".PlayBar .CurrentPos").fill(SecondsToTime(b,1));$(".PlayBar .Position").set("value",b);setTimeout(function(){P.OnPlayTimer(a)},300)}},MakePlayButtons:function(a){$(a).each(function(c,b){$(c).set("+HoverHighlight").ht('<img class=DoubleLineHeight src="'+P.ImageURL("icons/play.png","h")+'"/>')});P.OnClick(a,LBUTTON,function(g){var f=P.Target(g);var c=f.get("%url");var b=$("img",f,1);var h=b.get("@src");b.set("@src",P.ImageURL("busy.svg","h"));P.Popup(HTML(['<div class="whiteb Pad50 Raised Rounded PlayBar">','<img src="'+P.ImageURL("loading.gif","h")+'"/>',"</div>"].join("\n")),{closeonmouseout:1,parent:f});P.Play(c,c,{autoplay:1,onplay:function(){var e=P.media[c];var j=e.duration();P.HTML(".PlayBar",['<img class="DoubleLineHeight PauseButton HoverHighlight" src="'+P.ImageURL("icons/play.png","h")+'"/>',"<span class=CurrentPos>"+SecondsToTime(0,1)+"</span> / <span class=Duration>"+SecondsToTime(j,1)+"</span>",'<meter class="Position Width100" min=0 max='+j.toFixed(0)+"></meter>"]);P.OnClick(".PlayBar .PauseButton",LBUTTON,function(){P.OnPauseButton(c)});P.OnClick(".PlayBar .Position",LBUTTON,function(q){var n=P.Target(q);var o=parseInt(n.get("@min"));var k=parseInt(n.get("@max"));var p=n[0].value;var l=P.AbsoluteRect(n);var m=Math.round(((P.mousex-l.left)/l.width)*(k-o))+o;if(p==m){return}n[0].value=m;if(P.media[c]){P.media[c].seek(m)}});b.set("@src",h);setTimeout(function(){P.OnPlayTimer(c)},300)},onloaderror:function(j,e){$(".PlayBar").ht("<div class=Error>"+e+"</div>");b.set("@src",h)}})})},Play:function(e,b,a){a=a||{};a.src=[b];if(!P.media[e]){P.mediatoload.push(b);var c=a.onload;a.onload=function(){P.mediatoload.remove(b);if(!P.mediatoload.length){for(var g=0,f=P.onmedialoaded.length;g<f;g++){P.onmedialoaded[g]()}P.onmedialoaded=[]}if(c){c()}};P.media[e]=new Howl(a)}else{if(a.autoplay!=0){P.currentmediaid=P.media[e].play()}}},OnMediaLoaded:function(a){P.onmedialoaded.push(a)},AddLayer:function(a){P.layerstack.push(a)},RemoveLayer:function(a){var b=P.layerstack.indexOf(a);if(b>-1){P.layerstack.remove(b)}},EnterFullScreen:function(a,c,b){a=parseInt(a);a=a||"";P.AddLayer(".FullScreen"+a);var e=$(".FullScreen"+a);if(c){e.set(c)}e.ht(b.join("\n")).set("$left","-"+window.outerWidth+"px").show().animate({$left:"0px"},300)},ExitFullScreen:function(b){b=parseInt(b);b=b||"";var a="FullScreen"+b;P.RemoveLayer("."+a);var c=$("."+a);c.animate({"$left":"-"+window.outerWidth+"px"},300);setTimeout(function(){c.set("@class",a).ht("").hide()},500)},ShowDrawer:function(f,e,c,b){var g=$("."+f+"Drawer");if(c){g.set(c)}var h=(f=="left"||f=="right")?"$width":"$height";var a={};a[h]=e;g.ht(b.join("\n")).set(h,"0px").show().animate(a,300)},HideDrawer:function(b){var c=$("."+b+"Drawer");c.set("@class","Drawer "+b+"Drawer");var e=(b=="left"||b=="right")?"$width":"$height";var a={};a[e]="0px";c.animate(a,300)},ReloadPage:function(){window.location.reload(1)},NoPaste:function(a){$(a).on("copy paste drag drop",function(b){b.preventDefault()})},CaptureMousePos:function(a){P.mousex=a.changedTouches?a.changedTouches[0].pageX:a.pageX;P.mousey=a.changedTouches?a.changedTouches[0].pageY:a.pageY;P.istouch=(a.type.indexOf("touch")!=-1)},MousePos:function(){return[P.mousex,P.mousey]},InRect:function(a,c,b){if(!b){return 0}return(b.left<=a&&a<=b.right&&b.top<=c&&c<=b.bottom)},FlexInput:function(){$(".FlexInput").each(function(g,c){var a=$(g);var b=a.get("%name");var h=a.get("%value");if(!b){a.ht("<div class=Error>No name provided</div>");return}P.HTML(a,["<pre><span></span><br></pre>",'<textarea class="'+b+'" name="'+b+'"></textarea>']);var f=$("textarea",a);var e=$("span",a);f.on("input",function(){e.fill(f.get("value"))});f.fill(h);e.fill(h);a.set("+active")})},SetCookie:function(c,g,b,j,f,h){j=j||"/";var a=new Date();if(b){b=expires*1000*60*60*24}var e=new Date(a.getTime()+b);document.cookie=c+"="+escape(g)+(b?";expires="+e.toGMTString():"")+";path="+j+(f?";domain="+f:"")+(h?";secure":"")},Emit:function(b,c){if(document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent(c,true,true);return !b.dispatchEvent(a)}else{var a=document.createEventObject();return b.fireEvent("on"+c,a)}},MakeCalendar:function(m,t,a,k){var r=t?new Date(t):new Date();if(isNaN(r.getTime())){$(m).ht("<div class=Error>Invalid date: "+t+"</div>");return}var e=r.getDate();var b=r.getDay();var n=r.getFullYear();var j=r.getMonth();var s=j==11?0:j+1;var o=(j==11)?(n+1)+"-01":n+"-"+(j<8?"0"+(j+2):(j+2));var l=(j==0)?(n-1)+"-12":n+"-"+(j<10?"0"+j:j);var g=['<table class="Styled Calendar Width100 Center">',"<tr>",a?'<td class="Color1 PreviousMonthButton">&lt;&lt;</td>':"<th></th>","<td colspan=5 class=ThisMonth>"+n+"-"+(j<9?"0"+(j+1):(j+1))+"</td>",a?'<td class="Color2 NextMonthButton">&gt;&gt;</td>':"<th></th>","</tr>","<tr>","<th>"+T_CALENDAR[9]+"</th>","<th>"+T_CALENDAR[10]+"</th>","<th>"+T_CALENDAR[11]+"</th>","<th>"+T_CALENDAR[12]+"</th>","<th>"+T_CALENDAR[13]+"</th>","<th>"+T_CALENDAR[14]+"</th>","<th>"+T_CALENDAR[15]+"</th>","</tr>"];r.setDate(1);r.setDate(r.getDate()-r.getDay()+1);var p=0;var c=new Date();var v=c.getMonth();var u=c.getDate();for(;;){g.push("<tr>");for(var p=0;p<7;p++){var h=r.getDate();var q=r.getMonth();var f=(h<10?"0"+h:h);g.addtext(['<td class="'+((q==v&&h==u)?"Today ":"")+(q==j?"Day Day"+f+'" data-date="'+f:"OtherMonth")+'">'+h+"</td>"]);r.setDate(h+1)}g.push("</tr>");if(r.getMonth()==s||p>60){break}p++}g.push("</table>");P.HTML(m,g);if(a){P.OnClick(m+" .NextMonthButton",LBUTTON,function(){a(m,o)});P.OnClick(m+" .PreviousMonthButton",LBUTTON,function(){a(m,l)})}if(k){P.OnClick(m+" .Calendar",LBUTTON,k)}},OnEnter:function(a,b){$(a).on("?keypress",function(c){if(c.keyCode==13){b();return false}return true})},MiniLogin:function(){P.DialogAPI("login/login",{phonenumber:$(".MiniLogin input.phonenumber").sub(1).get("value"),place:$(".MiniLogin input.place").sub(1).get("value"),password:$(".MiniLogin input.password").sub(1).get("value"),},function(a){window.location=document.location})},PopupMiniLogin:function(){$(".MiniLogin .phonenumber")[1].focus();P.OnEnter(".MiniLogin",P.MiniLogin);P.OnClick(".MiniLoginButton",LBUTTON,P.MiniLogin)},PreloadImage:function(e){if(IsArray(e)){for(var f=0,a=e.length;f<a;f++){P.Preload(e[f])}return}for(var c in P.preloads){if(c==e){return P.preloads[c]}}var b=new Image();b.src=e;P.preloads[e]=b;return b},SlideShow:function(a,g,c){var b={nextimage:"random",timeout:4000,imgfraction:0.7};Merge(b,c);var f=$(a);var h=f[0];h.slides=g;h.slidepos=0;h.imgfraction=b.imgfraction;h.nextimage=b.nextimage;h.timeout=b.timeout;h.selector=a;f.set("+SlideShow");P.NextSlide(h)},NextSlide:function(a){var b=P.ViewPortRect().width;$(a.selector+" .Slide").set("$transform","translate(-"+(b*1.2)+"px, 0)");setTimeout(function(){var c=-1;if(a.nextimage=="random"){do{c=RandInt(0,a.slides.length)}while(c==a.slidepos)}else{c=a.slidepos+1;if(c>=a.urls.length){c=0}}a.slidepos=c;a.innerHTML='<div class=Slide style="position: relative; left: '+(b*0.5)+'px;">'+a.slides[a.slidepos]+"</div>";$(a.selector+" img").set("$height",$$(".SlideShow").getBoundingClientRect().height*a.imgfraction+"px");$(a.selector+" img").set("$width","auto");$(a.selector+" .Slide").set("$transform","translate(-"+(b*0.5)+"px, 0)");setTimeout(function(){P.NextSlide(a)},a.timeout)},1000)},MakeTabs:function(a,f){a=$(a);a.set("+TabBar");var c=[];for(var e=0,b=f.length;e<b;e++){var h=f[e];var g=window.location.href.match(h[1])?"class=Selected":"";c.push('<a data-regex="'+EncodeEntities(h[1])+'" href="'+EncodeEntities(h[2])+'" '+g+">"+h[0]+"</a>")}c.push("<div class=Cleared></div>");P.HTML(a,c)},MakeEditTags:function(b,a,f){var g=$(b);g.set("+EditTags");var e=g[0];e.origtaglist=a.slice();var c=["<p class=EditTagsList>","</p>","<div class=ButtonBar>",'<a class="Color1 AddTagButton">+</a>','<a class="Color2 ResetTagsButton">'+T[39]+"</a>",'<a class="Color3 SaveTagsButton">'+T[25]+"</a>","</div>","<div class=SaveTagsResults></div>"];P.HTML(g,c);P.MakeEditTagsContent(b,a);P.OnClick(".EditTags .Tag",LBUTTON,function(){$(this).remove()});$(".AddTagButton").on("click",function(){var h=$(this);P.EditPopup([["newtag","text",T[54]]],function(){var j=$(".newtag").get("value");if(!a.contains(j)){a.push(j);P.MakeEditTagsContent(b,a)}return true},{parent:h})});$(".ResetTagsButton").on("click",function(){P.MakeEditTagsContent(b,e.origtaglist)});P.OnClick(".SaveTagButton",LBUTTON,function(){onsavefunc(b)})},MakeEditTagsContent:function(b,a){a.sort();var e=[];for(var f=0,c=a.length;f<c;f++){e.push('<a class=Tag><img src="/i/h/svg/tag.svg">'+a[f]+"</a>")}P.HTML(b+" .EditTagsList",e)},InterceptHREF:function(){$("body").on("?click",function(c){var b=P.Target(c);if(b[0].tagName!="A"){b=b.up("a")}if(!b.length){return 1}var a=b.get("@href");if(P.baseurl!="/"&&!a.indexOf(P.baseurl)){P.LoadingDialog();return 1}if(!b.get("%nointercept")&&a&&a.indexOf("http")!=-1){P.LoadURL(a,1);c.preventDefault();c.stopPropagation();return 0}return 1})},ListObjects:function(a){start=a.start||0;limit=a.limit||100;data=Merge({start:start,limit:limit,orderby:a.orderby},a.data);P.LoadingAPI(a.selector,a.api,data,function(h,g){var e=h.items;if(!e.length){g.ht("No items found");return}var c=[];for(var f=0,b=e.length;f<b;f++){c.addtext(a.itemfunc(f,e[f]))}c.addtext(P.PageBar(h.count,start,limit,a.orderby,e.length,a.listfunc));P.HTML(g,c);P.AutoWidth()})},RotateImage:function(a,b){},RotateImage:function(a,c){var b=$(a);var e=parseInt(b.get("%angle"));if(!e){e=0}e+=c;if(e<0){e+=360}if(e>=360){e-=360}b.set({"%angle":e,"$transform":"rotate("+e+"deg)"})},Emit:function(h,c,f){f=Merge({pointerX:0,pointerY:0,button:0,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,bubbles:true,cancelable:true},f||{});var b,g=null;for(var e in {HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/}){if(eventMatchers[e].test(c)){g=e;break}}if(!g){throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported")}if(document.createEvent){b=document.createEvent(g);if(g=="HTMLEvents"){b.initEvent(c,f.bubbles,f.cancelable)}else{b.initMouseEvent(c,f.bubbles,f.cancelable,document.defaultView,f.button,f.pointerX,f.pointerY,f.pointerX,f.pointerY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,f.button,h)}h.dispatchEvent(b)}else{f.clientX=f.pointerX;f.clientY=f.pointerY;var a=document.createEventObject();b=extend(a,f);h.fireEvent("on"+c,b)}return h},ChangeWallpaperPopup:function(){var b=['<div class="Wallpapers">'];for(var c=0,a=availablewallpapers.length;c<a;c++){var e=availablewallpapers[c];b.push('<img class=HoverHighlight src="'+P.ImageURL("wallpapers/"+e,"h")+'" onclick="P.ChangeWallpaper(\''+e+"')\">")}b.push("</div>");P.Popup(HTML(b.join("\n")),{closeonmouseout:1,parent:".WallpapersMenu","$width":"10em"})},ChangeLanguagePopup:function(){var b=['<div class="Languages">'];var c=1;for(var e=0,a=availablelanguages.length;e<a;e++){var f=availablelanguages[e];b.push('<a class="Button Color'+c+'" onclick="P.SetLanguage(\''+f[0]+"')\">"+f[1]+"</a>");c++;if(c>6){c=1}}b.push("</div>");P.Popup(HTML(b.join("\n")),{closeonmouseout:1,parent:".LanguagesMenu","$width":"10em"})},UserMenuPopup:function(){var a=["<div>"];var b=1;if(P.userid){a.push('<a class="Button Color1" href="/logout">'+T[27]+"</a>")}else{P.EditPopup([["phonenumber","text","",T[42]],["place","text","",T[43]],["password","password","",T[17]],],P.MiniLogin,{parent:".UserMenu",closeonmouseout:1,gobuttontext:T[47],cancelbuttontext:T[1],cancelfunc:function(){P.CloseThisPopup(".password")}});P.OnEnter(".EditPopupForm input",function(){P.MiniLogin($(".EditPopup"),P.FormToArray(".EditPopupForm"))});setTimeout(function(){var c=$$(".EditPopup .phonenumber");if(c){c.focus()}},200);return}a.push("</div>");P.Popup(HTML(a.join("\n")),{closeonmouseout:1,parent:".UserMenu","$width":"10em"})},MiniLogin:function(b,a){if(!a.phonenumber||!a.place||!a.password){P.ErrorPopup("<?=$T_SYSTEM[48]?>");return}P.LoadingAPI(".EditPopupResults","login/login",a,function(e,c){window.location.reload(1)})},AdminMenuPopup:function(){var b=["<div>"];var e=1;adminpages.sort();for(var f=0,a=adminpages.length;f<a;f++){var g=adminpages[f];if(g.indexOf("/")>-1){var c=P.baseurl+"m/"+g}else{var c=P.baseurl+"m/h/"+g}b.push('<a class="Button Color'+e+'" href="'+c+'">'+g+"</a>");e++;if(e>6){e=1}}b.push("</div>");P.Popup(HTML(b.join("\n")),{closeonmouseout:1,parent:".AdminMenu","$width":"10em"})},HoverPopup:function(a,b){$(a).set("+HoverHighlight");P.OnClick(a,LBUTTON,b)},UploadFilePopup:function(b,a){a=a||{};a.accept=a.accept||"image/*; capture=camera";a.maxsize=a.maxsize||4294967296;a.filetype=a.filetype||"";a.title=a.title||0;a.onfinished=a.onfinished||0;a.resizeimage=a.resizeimage||0;P.MessageBox(['<form class="UploadFileForm" method="post" enctype="multipart/form-data">','<input type=file class=FilesToUpload accept="'+a.accept+'" data-maxsize="'+a.maxsize+'" data-filetype="'+a.filetype+'" data-uploadurl="'+EncodeEntities(b)+'" multiple style="cursor: pointer;"><br><br>',(a.title?("<label>"+EncodeEntities(a.title)+"</label><input type=text class=uploadtitle>"):""),"<div class=UploadedFiles></div>","</form>","<br>"],[[T[47],function(){P.UploadFile(0,a)},3],[T[1],function(){P.CloseThisPopup(".UploadFileForm")},1]]);$$(".FilesToUpload").click();if(!a.title){$(".FilesToUpload").on("change",function(){P.UploadFile(0,a)})}},MakeProgressHandler:function(a){return function(c){var b=$(".UploadedFiles .Upload"+a+" .Right");P.UploadFileProgress(c,b)}},UploadProgress:function(b,a){return function(f){var c=$(".UploadedFiles .Upload"+i+" .Right");P.UploadFileProgress(f,c)}},UploadFile:function(c,r){c=c||".FilesToUpload";var g=$(c);var e=$$(g).files;var j=e.length;var a=$(".uploadtitle");var q=a.length?$$(a).value:0;if(!j){P.ErrorPopup(T[65]);return}if(a.length&&!q){P.ErrorPopup(T[48]);return}var p=g.get("%uploadurl");var o=g.get("%filetype");var n=g.get("%maxsize");for(var m=0;m<j;m++){var h=e[m];if(o&&!h.type.match(o)){P.ErrorPopup(h.name+" is the wrong type");continue}$(".UploadedFiles").add(HTML(['<table class="Width100 Upload'+m+'">',"<tr><td>"+EncodeEntities(h.name)+"</td><td class=Right>0%</td></tr>","</table>"].join("\n")));var b=p+"/"+(q?encodeURIComponent(q)+"/":"")+encodeURIComponent(h.name);if(r.resizeimage&&h.type.match(/image.*/)){var k=document.createElement("img");k.src=window.URL.createObjectURL(h);var f=document.createElement("canvas");f.width=r.resizeimage[0];f.height=r.resizeimage[1];pica.resizeCanvas(k,f,{unsharpAmount:50,unsharpRadius:1,unsharpThreshold:70},function(l){P.SendFile(m,b,h,r)})}else{P.SendFile(m,b,h,r)}}},SendFile:function(e,b,c,a){var f=new XMLHttpRequest();f.open("post",b,true);f.upload.addEventListener("progress",P.MakeProgressHandler(e,c.name));if(a&&a.onfinished){f.onload=function(g){a.onfinished(g,f,c.name)}}f.send(c)},UploadFileProgress:function(c,a){var b=Math.round(c.loaded/c.total*100);a.fill(b+"%")},DeleteUpload:function(b,a){P.DialogAPI("upload/delete/"+b,{},function(c){if(a){a(c,b)}})},Location:function(a){if(P.inphoneapp){a(JSON.parse(JSBridge.Location()))}else{navigator.geolocation.getCurrentPosition(function(b){a(b.coords)},function(){P.ErrorPopup(T[66])},{enableHighAccuracy:true,maximumAge:30000,timeout:20000})}},MakeOnClick:function(a,b){return function(c){var f=P.Target(c);if(!f.is(a)){f=f.up(a)}if(!f){return}if($(a+" .Selected").length){if(f.is(".Selected")){f.set("-Selected");if(!$(a+" .Selected").length){$(".BottomDrawer").hide()}}else{f.set("+Selected")}return}if(b){b(c,f)}}},MakeOnHold:function(a,c,b){return function(m){if(m.button==1||m.button==2){return}var f=P.Target(m);if(!f.is(a)){f=f.up(a)}if(!f){return}var k=$(".Selected").length;var g=f.get(c);var p=$(a);var o=0;for(var j=0,h=p.length;j<h;j++){var n=$(p[j]);if(n.get(c)==g){break}if(o){n.set("+Selected")}else{if(n.is(".Selected")){o=1}}}o=0;for(var j=p.length-1;j>=0;j--){var n=$(p[j]);if(n.get(c)==g){break}if(o){n.set("+Selected")}else{if(n.is(".Selected")){o=1}}}f.set("+Selected");$(".BottomDrawer").set({"$width":"100%","$height":"2.3em"}).set("+lgrayg").show();if(b){b(m,f)}}},MakeContextMenu:function(a,b){b=b||{};b.width=b.width||"12em";return function(k){var h=P.Target(k);if(b.topclass&&!h.is(b.topclass)){h=h.up(b.topclass)}if(!h.length){return}P.CancelBubble(k);var f=['<div class="Raised">',"<div class=ContextMenu>"];var m=IsFunc(a)?a(h):a;for(var g=0,c=m.length;g<c;g++){var j=m[g];f.push("<a class=ContextMenuItem data-pos="+g+">"+j[0]+"</a>")}f.push("</div></div>");P.Popup(HTML(f.join("\n")),{"$left":P.mousex+"px","$top":P.mousey+"px","$width":b.width,closeonmouseout:1});P.contextmenuitems=m;P.OnClick(".ContextMenu",LBUTTON,function(o){var n=P.Target(o);if(!n.is(".ContextMenuItem")){n=n.up(".ContextMenuItem")}if(!n.length){return}P.CloseThisPopup(".ContextMenu");var l=P.contextmenuitems[parseInt(n.get("%pos"))][1];l(o,h)})}},OnAltEnter:function(a,b){$(a).on("?keydown",function(f){if(f.defaultPrevented){return}var c=false;if(f.key!==undefined){if(f.key==="Enter"&&f.altKey){b(a,f)}}else{if(f.keyIdentifier!==undefined){if(f.keyIdentifier==="Enter"&&f.altKey){alert("Alt + Enter pressed!")}}else{if(f.keyCode!==undefined){if(f.keyCode===13&&f.altKey){alert("Alt + Enter pressed!")}}}}if(c){f.preventDefault();return 0}return 1})},MakeQuickFuncsButton:function(a,b){a=a||".QuickFuncsButton";b=b||P.possumbot;P.MakeFloatingButton(a,'<div class="redb HoverHighlight Pad50 Rounded Raised"><img class=DoubleLineHeight src="/i/h/avatars/'+b+'.png" /></div>');P.OnClick(a,LBUTTON,P.ShowQuickFuncsPopup)},ShowQuickFuncsPopup:function(c,f){f=f||"";var b=P.Popup(HTML(['<div class="whiteb Pad50 Raised">','<div class="FlexInput QuickFuncInput" data-name="quickfuncinput" data-value="'+EncodeEntities(f)+'"></div>',"<div class=QuickFuncsButtons></div>","<div class=QuickFuncResults></div>","</div>"].join("\n")),{"$width":(window.innerWidth*0.8)+"px"});P.FlexInput();P.MakeButtonBar(".QuickFuncsButtons",[[T[47],P.ProcessQuickFunc],[T[71],P.QuickFuncsHelp],[T[1],function(){P.CloseThisPopup(".QuickFuncInput")}]]);var a=$(b+" textarea");P.OnAltEnter(a,P.ProcessQuickFunc);$$(a).focus()},AddQuickFunc:function(e,a,c,b){P.quickfuncs.push([e,a,c,b]);P.quickfuncs.sort(function(h,g){var f=h[0].length;var j=g[0].length;if(f>j){return -1}if(f<j){return 1}return 0})},ProcessQuickFunc:function(){var g=$(".QuickFuncInput textarea").get("value");if(g){var b=g.toLowerCase();var e=0;for(var c=0,a=P.quickfuncs.length;c<a;c++){var f=P.quickfuncs[c][0];if(b.startswith(f.toLowerCase())){P.quickfuncs[c][3](g.substr(f.length).trim(),$(".QuickFuncResults"));e=1;break}}if(!e){$(".QuickFuncResults").ht('<div class="yellowb Pad50">'+T[72]+"</div>")}}},QuickFuncsHelp:function(){var f=['<div class="Pad50 whiteb">',"<div class=Left>","<h2>"+T_POSSUMBOT[1]+"</h2>","<p>"+T_POSSUMBOT[2]+"</p>","<h3>"+T_POSSUMBOT[3]+"</h3>","<dl>"];for(var c=0,a=P.quickfuncs.length;c<a;c++){var e=P.quickfuncs[c];var b=(c%6)+1;f.addtext(["<dt>",'<a class="Button Color'+b+'" onclick="P.CopyQuickFuncCommand(\''+EncodeEntities(e[0])+"')\">",e[1],"</a>","</dt>","<dd><p>"+e[2]+"</p></dd>"])}f.addtext(["</dl>","<p>"+T_POSSUMBOT[9]+"</p>","<div class=ButtonBar>",'<a class=Color1 onclick="P.ExitFullScreen(1)">'+T[1]+"</a>","</div>","</div>","</div>"]);P.CloseThisPopup(".QuickFuncInput");P.EnterFullScreen(1,"",f)},CopyQuickFuncCommand:function(a){P.ExitFullScreen(1);P.ShowQuickFuncsPopup(0,a)},QuickChangePassword:function(b,a){if(!b){a.ht('<div class="yellowb Pad50">'+T[4]+"</div>");return}P.LoadingAPI(a,"login/changepassword",{password:b},function(e,c){c.ht('<div class="greenb Pad50">'+T[41]+"</div>");setTimeout(function(){P.CloseThisPopup(".QuickFuncInput")},2000)})},QuickChangeAvatar:function(b,a){if(b.length){P.LoadingAPI(a,"possumbot/set",{avatar:b},function(e,c){$(".QuickFuncsButton img").set("@src",P.ImageURL("avatars/"+b+".png","h"));c.ht('<div class="greenb Pad50">'+T[41]+"</div>")})}else{P.LoadingAPI(a,"possumbot/list",{},function(j,g){var h=j.items;var e=["<div class=Cards4>"];for(var f=0,c=h.length;f<c;f++){e.addtext(['<div class="lgrayb Card HoverHighlight" onclick="P.QuickChangeAvatar(\''+h[f]+"')\">",'<img class=CardIcon src="'+P.ImageURL("avatars/"+h[f]+".png","h")+'">',"<div class=Center>"+h[f]+"</div>","</div>"])}e.push("</div><div class=Cleared></div>");P.HTML(g,e)})}}};P.Init();$.ready(function(){P.emsize=P.EMSize();window.onerror=function(g,f,b,e,c){StackTrace.fromError(c).then(function(h){var j=h.map(function(k){return k.toString()}).join("\n");console.log(j);P.Debug(g+"\n"+j)})};P.SetCookie("timeoffset",P.timeoffset);P.ChangeWallpaper(P.wallpaper+"-"+P.texttheme+".jpg",1);for(var a=1;a<=6;a++){$(".Color"+a).set("$color","white !important")}P.HoverPopup(".WallpapersMenu",P.ChangeWallpaperPopup);P.HoverPopup(".LanguagesMenu",P.ChangeLanguagePopup);P.HoverPopup(".UserMenu",P.UserMenuPopup);P.HoverPopup(".AdminMenu",P.AdminMenuPopup);$(window).on("|resize",P.OnResize).on("|mousemove |mouseenter |touchmove",P.CaptureMousePos).on("|orientationchange",function(){switch(window.orientation){case 90:case -90:P.screenorientation="landscape";break;default:P.screenorientation="portrait"}P.OnResize()});if(P.useadvanced){if(P.isfirefox||P.ischrome||P.issafari){$(window).on("popstate",P.OnPopState)}$(window).on(P.isfirefox?"|keypress ":"|keypress |keydown ",function(b){if(b.keyCode==27){P.CloseTopLayer()}});P.InterceptHREF()}if(window.location.href.indexOf("pafera.com")==-1){$("body").set("$fontFamily","serif")}if(P.userid){P.MakeQuickFuncsButton();P.AddQuickFunc(T_POSSUMBOT[8],T_POSSUMBOT[4],T_POSSUMBOT[5],P.QuickChangePassword);P.AddQuickFunc(T_POSSUMBOT[6],T_POSSUMBOT[6],T_POSSUMBOT[7],function(){$(".QuickFuncsButton").hide();P.CloseThisPopup(".QuickFuncInput")});P.AddQuickFunc(T_POSSUMBOT[10],T_POSSUMBOT[10],T_POSSUMBOT[11],P.QuickChangeAvatar)}interact.pointerMoveTolerance(32)});